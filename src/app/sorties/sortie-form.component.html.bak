<div class="form-container">
  <div class="form-header">
    <h1 class="form-title">{{ (isEditMode ? 'SORTIES.EDIT' : 'SORTIES.ADD') | translate }}</h1>
  </div>

  <!-- Affichage du bateau sélectionné -->
  <div class="selected-boat-info" *ngIf="selectedBoat">
    <div class="boat-badge">
      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
      </svg>
      <span>{{ 'BOATS.BOAT' | translate }}: <strong>{{ selectedBoat.nom }}</strong> ({{ selectedBoat.immatriculation }})</span>
    </div>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form">
    <div class="form-grid">
      
      <div class="form-group">
        <label class="form-label">{{ 'SORTIES.DESTINATION' | translate }} *</label>
        <input 
          type="text" 
          formControlName="destination" 
          class="form-input"
          [class.error]="form.get('destination')?.invalid && form.get('destination')?.touched">
        <span class="error-message" *ngIf="form.get('destination')?.hasError('required') && form.get('destination')?.touched">
          {{ 'FORM.REQUIRED' | translate }}
        </span>
      </div>

      <div class="form-group">
        <label class="form-label">{{ 'SORTIES.DATEDEPART' | translate }} *</label>
        <input 
          type="date" 
          formControlName="dateDepart" 
          class="form-input"
          [class.error]="form.get('dateDepart')?.invalid && form.get('dateDepart')?.touched">
      </div>

      <div class="form-group">
        <label class="form-label">{{ 'SORTIES.DATERETOUR' | translate }} *</label>
        <input 
          type="date" 
          formControlName="dateRetour" 
          class="form-input"
          [class.error]="form.get('dateRetour')?.invalid && form.get('dateRetour')?.touched">
      </div>

      <div class="form-group">
        <label class="form-label">{{ 'SORTIES.STATUT' | translate }} *</label>
        <select formControlName="statut" class="form-input">
          <option value="en-cours">{{ 'SORTIES.STATUS.ONGOING' | translate }}</option>
          <option value="terminee">{{ 'SORTIES.STATUS.COMPLETED' | translate }}</option>
          <option value="annulee">{{ 'SORTIES.STATUS.CANCELLED' | translate }}</option>
        </select>
      </div>

      <div class="form-group full-width">
        <label class="form-label">{{ 'SORTIES.OBSERVATIONS' | translate }}</label>
        <textarea formControlName="observations" class="form-input" rows="3"></textarea>
      </div>

    </div>

    <div class="form-actions">
      <button type="button" (click)="cancel()" class="btn btn-secondary" [disabled]="loading">
        {{ 'FORM.CANCEL' | translate }}
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="loading">
        <span *ngIf="loading">{{ 'MESSAGES.SAVING' | translate }}...</span>
        <span *ngIf="!loading">{{ (isEditMode ? 'FORM.EDIT' : 'FORM.ADD') | translate }}</span>
      </button>
    </div>
  </form>
</div>
