var pR=Object.create;var Wf=Object.defineProperty,gR=Object.defineProperties,mR=Object.getOwnPropertyDescriptor,yR=Object.getOwnPropertyDescriptors,vR=Object.getOwnPropertyNames,Fc=Object.getOwnPropertySymbols,tI=Object.getPrototypeOf,Kf=Object.prototype.hasOwnProperty,nI=Object.prototype.propertyIsEnumerable,_R=Reflect.get;var eI=(t,e,n)=>e in t?Wf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,me=(t,e)=>{for(var n in e||={})Kf.call(e,n)&&eI(t,n,e[n]);if(Fc)for(var n of Fc(e))nI.call(e,n)&&eI(t,n,e[n]);return t},Re=(t,e)=>gR(t,yR(e));var c$=(t,e)=>{var n={};for(var r in t)Kf.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Fc)for(var r of Fc(t))e.indexOf(r)<0&&nI.call(t,r)&&(n[r]=t[r]);return n};var u$=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ER=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of vR(e))!Kf.call(t,i)&&i!==n&&Wf(t,i,{get:()=>e[i],enumerable:!(r=mR(e,i))||r.enumerable});return t};var l$=(t,e,n)=>(n=t!=null?pR(tI(t)):{},ER(e||!t||!t.__esModule?Wf(n,"default",{value:t,enumerable:!0}):n,t));var Xn=(t,e,n)=>_R(tI(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{c(n.next(u))}catch(l){i(l)}},s=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((n=n.apply(t,e)).next())});function K(t){return typeof t=="function"}function Ki(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Lc=Ki(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function zr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Pe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(K(r))try{r()}catch(o){e=o instanceof Lc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{rI(o)}catch(s){e=e??[],s instanceof Lc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Lc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)rI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&zr(n,e)}remove(e){let{_finalizers:n}=this;n&&zr(n,e),e instanceof t&&e._removeParent(this)}};Pe.EMPTY=(()=>{let t=new Pe;return t.closed=!0,t})();var Qf=Pe.EMPTY;function Vc(t){return t instanceof Pe||t&&"closed"in t&&K(t.remove)&&K(t.add)&&K(t.unsubscribe)}function rI(t){K(t)?t():t.unsubscribe()}var Vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qi={setTimeout(t,e,...n){let{delegate:r}=Qi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Qi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function jc(t){Qi.setTimeout(()=>{let{onUnhandledError:e}=Vt;if(e)e(t);else throw t})}function Ns(){}var iI=Yf("C",void 0,void 0);function oI(t){return Yf("E",void 0,t)}function sI(t){return Yf("N",t,void 0)}function Yf(t,e,n){return{kind:t,value:e,error:n}}var Gr=null;function Yi(t){if(Vt.useDeprecatedSynchronousErrorHandling){let e=!Gr;if(e&&(Gr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Gr;if(Gr=null,n)throw r}}else t()}function aI(t){Vt.useDeprecatedSynchronousErrorHandling&&Gr&&(Gr.errorThrown=!0,Gr.error=t)}var Wr=class extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Vc(e)&&e.add(this)):this.destination=TR}static create(e,n,r){return new Tn(e,n,r)}next(e){this.isStopped?Jf(sI(e),this):this._next(e)}error(e){this.isStopped?Jf(oI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Jf(iI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},IR=Function.prototype.bind;function Zf(t,e){return IR.call(t,e)}var Xf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Bc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Bc(r)}else Bc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Bc(n)}}},Tn=class extends Wr{constructor(e,n,r){super();let i;if(K(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Vt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zf(e.next,o),error:e.error&&Zf(e.error,o),complete:e.complete&&Zf(e.complete,o)}):i=e}this.destination=new Xf(i)}};function Bc(t){Vt.useDeprecatedSynchronousErrorHandling?aI(t):jc(t)}function wR(t){throw t}function Jf(t,e){let{onStoppedNotification:n}=Vt;n&&Qi.setTimeout(()=>n(t,e))}var TR={closed:!0,next:Ns,error:wR,complete:Ns};var Zi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(t){return t}function cI(...t){return eh(t)}function eh(t){return t.length===0?It:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Y=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=bR(n)?n:new Tn(n,r,i);return Yi(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=uI(r),new r((i,o)=>{let s=new Tn({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Zi](){return this}pipe(...n){return eh(n)(this)}toPromise(n){return n=uI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function uI(t){var e;return(e=t??Vt.Promise)!==null&&e!==void 0?e:Promise}function DR(t){return t&&K(t.next)&&K(t.error)&&K(t.complete)}function bR(t){return t&&t instanceof Wr||DR(t)&&Vc(t)}var{isArray:CR}=Array,{getPrototypeOf:SR,prototype:AR,keys:NR}=Object;function Uc(t){if(t.length===1){let e=t[0];if(CR(e))return{args:e,keys:null};if(RR(e)){let n=NR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function RR(t){return t&&typeof t=="object"&&SR(t)===AR}function th(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function dI(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function lI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kr(t){return this instanceof Kr?(this.v=t,this):new Kr(t)}function fI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function c(y,C){r[y]&&(i[y]=function(R){return new Promise(function(N,k){o.push([y,R,N,k])>1||u(y,R)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(R){g(o[0][3],R)}}function l(y){y.value instanceof Kr?Promise.resolve(y.value.v).then(f,p):g(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function g(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function hI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof lI=="function"?lI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var $c=t=>t&&typeof t.length=="number"&&typeof t!="function";function Hc(t){return K(t?.then)}function qc(t){return K(t[Zi])}function zc(t){return Symbol.asyncIterator&&K(t?.[Symbol.asyncIterator])}function Gc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function PR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wc=PR();function Kc(t){return K(t?.[Wc])}function Qc(t){return fI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Kr(n.read());if(i)return yield Kr(void 0);yield yield Kr(r)}}finally{n.releaseLock()}})}function Yc(t){return K(t?.getReader)}function we(t){if(t instanceof Y)return t;if(t!=null){if(qc(t))return MR(t);if($c(t))return kR(t);if(Hc(t))return xR(t);if(zc(t))return pI(t);if(Kc(t))return OR(t);if(Yc(t))return FR(t)}throw Gc(t)}function MR(t){return new Y(e=>{let n=t[Zi]();if(K(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kR(t){return new Y(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function xR(t){return new Y(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,jc)})}function OR(t){return new Y(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function pI(t){return new Y(e=>{LR(t,e).catch(n=>e.error(n))})}function FR(t){return pI(Qc(t))}function LR(t,e){var n,r,i,o;return dI(this,void 0,void 0,function*(){try{for(n=hI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function gt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function nh(t){return K(t?.lift)}function re(t){return e=>{if(nh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ie(t,e,n,r,i){return new rh(t,e,n,r,i)}var rh=class extends Wr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function er(t,e=0){return re((n,r)=>{n.subscribe(ie(r,i=>gt(r,t,()=>r.next(i),e),()=>gt(r,t,()=>r.complete(),e),i=>gt(r,t,()=>r.error(i),e)))})}function tr(t,e=0){return re((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function gI(t,e){return we(t).pipe(tr(e),er(e))}function mI(t,e){return we(t).pipe(tr(e),er(e))}function yI(t,e){return new Y(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function vI(t,e){return new Y(n=>{let r;return gt(n,e,()=>{r=t[Wc](),gt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>K(r?.return)&&r.return()})}function Zc(t,e){if(!t)throw new Error("Iterable cannot be null");return new Y(n=>{gt(n,e,()=>{let r=t[Symbol.asyncIterator]();gt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function _I(t,e){return Zc(Qc(t),e)}function EI(t,e){if(t!=null){if(qc(t))return gI(t,e);if($c(t))return yI(t,e);if(Hc(t))return mI(t,e);if(zc(t))return Zc(t,e);if(Kc(t))return vI(t,e);if(Yc(t))return _I(t,e)}throw Gc(t)}function Jt(t,e){return e?EI(t,e):we(t)}function lt(t,e){return re((n,r)=>{let i=0;n.subscribe(ie(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:VR}=Array;function jR(t,e){return VR(e)?t(...e):t(e)}function Jc(t){return lt(e=>jR(t,e))}function II(t){return t&&K(t.schedule)}function wI(t){return t[t.length-1]}function Xc(t){return K(wI(t))?t.pop():void 0}function nr(t){return II(wI(t))?t.pop():void 0}function eu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function BR(...t){let e=nr(t),n=Xc(t),{args:r,keys:i}=Uc(t);if(r.length===0)return Jt([],e);let o=new Y(UR(r,e,i?s=>eu(i,s):It));return n?o.pipe(Jc(n)):o}function UR(t,e,n=It){return r=>{TI(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)TI(e,()=>{let l=Jt(t[u],e),f=!1;l.subscribe(ie(r,p=>{o[u]=p,f||(f=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function TI(t,e,n){t?gt(n,t,e):e()}var Rs=new Y(t=>t.complete());function Dn(t){return t<=0?()=>Rs:re((e,n)=>{let r=0;e.subscribe(ie(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ih(){return re((t,e)=>{let n=null;t._refCount++;let r=ie(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var oh=class extends Y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,nh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pe;let n=this.getSubject();e.add(this.source.subscribe(ie(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pe.EMPTY)}return e}refCount(){return ih()(this)}};var DI=Ki(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Be=(()=>{class t extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new tu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new DI}next(n){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Qf:(this.currentObservers=null,o.push(n),new Pe(()=>{this.currentObservers=null,zr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Y;return n.source=this,n}}return t.create=(e,n)=>new tu(e,n),t})(),tu=class extends Be{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Qf}};var Ps=class extends Be{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ms={now(){return(Ms.delegate||Date).now()},delegate:void 0};var ks=class extends Be{constructor(e=1/0,n=1/0,r=Ms){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),c=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)c=u;c&&r.splice(0,c+1)}}};var nu=class extends Pe{constructor(e,n){super()}schedule(e,n=0){return this}};var xs={setInterval(t,e,...n){let{delegate:r}=xs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=xs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ji=class extends nu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return xs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&xs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,zr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Xi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Xi.now=Ms.now;var eo=class extends Xi{constructor(e,n=Xi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var sh=new eo(Ji);var ru=class extends Ji{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var iu=class extends eo{};var ah=new iu(ru);function Qr(...t){let e=nr(t);return Jt(t,e)}function $R(t,e){let n=K(t)?t:()=>t,r=i=>i.error(n());return new Y(e?i=>e.schedule(r,0,i):r)}function rr(t){return!!t&&(t instanceof Y||K(t.lift)&&K(t.subscribe))}var Yr=Ki(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function bI(t,e,n,r,i,o,s,c){let u=[],l=0,f=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?C(R):u.push(R),C=R=>{o&&e.next(R),l++;let N=!1;we(n(R,f++)).subscribe(ie(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let k=u.shift();s?gt(e,s,()=>C(k)):C(k)}g()}catch(k){e.error(k)}}))};return t.subscribe(ie(e,y,()=>{p=!0,g()})),()=>{c?.()}}function Zr(t,e,n=1/0){return K(e)?Zr((r,i)=>lt((o,s)=>e(r,o,i,s))(we(t(r,i))),n):(typeof e=="number"&&(n=e),re((r,i)=>bI(r,i,t,n)))}function ch(t=1/0){return Zr(It,t)}function CI(){return ch(1)}function Jr(...t){return CI()(Jt(t,nr(t)))}function ou(t){return new Y(e=>{we(t()).subscribe(e)})}function uh(...t){let e=Xc(t),{args:n,keys:r}=Uc(t),i=new Y(o=>{let{length:s}=n;if(!s){o.complete();return}let c=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;we(n[f]).subscribe(ie(o,g=>{p||(p=!0,l--),c[f]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?eu(r,c):c),o.complete())}))}});return e?i.pipe(Jc(e)):i}function to(t,e){return re((n,r)=>{let i=0;n.subscribe(ie(r,o=>t.call(e,o,i++)&&r.next(o)))})}function SI(t){return re((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ie(n,void 0,void 0,s=>{o=we(t(s,SI(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function AI(t,e,n,r,i){return(o,s)=>{let c=n,u=e,l=0;o.subscribe(ie(s,f=>{let p=l++;u=c?t(u,f,p):(c=!0,f),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function lh(t,e){return K(e)?Zr(t,e,1):Zr(t,1)}function Os(t){return re((e,n)=>{let r=!1;e.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function su(t=HR){return re((e,n)=>{let r=!1;e.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function HR(){return new Yr}function qR(t){return re((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function zR(t,e){let n=arguments.length>=2;return r=>r.pipe(t?to((i,o)=>t(i,o,r)):It,Dn(1),n?Os(e):su(()=>new Yr))}function dh(t){return t<=0?()=>Rs:re((e,n)=>{let r=[];e.subscribe(ie(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function GR(t,e){let n=arguments.length>=2;return r=>r.pipe(t?to((i,o)=>t(i,o,r)):It,dh(1),n?Os(e):su(()=>new Yr))}function NI(t,e){return re(AI(t,e,arguments.length>=2,!0))}function RI(t={}){let{connector:e=()=>new Be,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,c,u,l=0,f=!1,p=!1,g=()=>{c?.unsubscribe(),c=void 0},y=()=>{g(),s=u=void 0,f=p=!1},C=()=>{let R=s;y(),R?.unsubscribe()};return re((R,N)=>{l++,!p&&!f&&g();let k=u=u??e();N.add(()=>{l--,l===0&&!p&&!f&&(c=fh(C,i))}),k.subscribe(N),!s&&l>0&&(s=new Tn({next:V=>k.next(V),error:V=>{p=!0,g(),c=fh(y,n,V),k.error(V)},complete:()=>{f=!0,g(),c=fh(y,r),k.complete()}}),we(R).subscribe(s))})(o)}}function fh(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Tn({next:()=>{r.unsubscribe(),t()}});return we(e(...n)).subscribe(r)}function au(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,RI({connector:()=>new ks(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function PI(...t){let e=nr(t);return re((n,r)=>{(e?Jr(t,n,e):Jr(t,n)).subscribe(r)})}function cu(t,e){return re((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(ie(r,u=>{i?.unsubscribe();let l=0,f=o++;we(t(u,f)).subscribe(i=ie(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function WR(t){return re((e,n)=>{we(t).subscribe(ie(n,()=>n.complete(),Ns)),!n.closed&&e.subscribe(n)})}function KR(t,e,n){let r=K(t)||e||n?{next:t,error:e,complete:n}:t;return r?re((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(ie(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var hh;function uu(){return hh}function Xt(t){let e=hh;return hh=t,e}var MI=Symbol("NotFound");function no(t){return t===MI||t?.name==="\u0275NotFound"}var tt=null,lu=!1,ph=1,QR=null,nt=Symbol("SIGNAL");function X(t){let e=tt;return tt=t,e}function pu(){return tt}var ro={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function io(t){if(lu)throw new Error("");if(tt===null)return;tt.consumerOnSignalRead(t);let e=tt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=tt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:tt.producers,n!==void 0&&n.producer===t)){tt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===tt&&(!r||ZR(i,tt)))return;let o=so(tt),s={producer:t,consumer:tt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};tt.producersTail=s,e!==void 0?e.nextProducer=s:tt.producers=s,o&&FI(t,s)}function kI(){ph++}function gu(t){if(!(so(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ph)){if(!t.producerMustRecompute(t)&&!Vs(t)){hu(t);return}t.producerRecomputeValue(t),hu(t)}}function gh(t){if(t.consumers===void 0)return;let e=lu;lu=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||YR(r)}}finally{lu=e}}function mh(){return tt?.consumerAllowSignalWrites!==!1}function YR(t){t.dirty=!0,gh(t),t.consumerMarkedDirty?.(t)}function hu(t){t.dirty=!1,t.lastCleanEpoch=ph}function oo(t){return t&&xI(t),X(t)}function xI(t){t.producersTail=void 0,t.recomputing=!0}function Ls(t,e){X(e),t&&OI(t)}function OI(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(so(t))do n=yh(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Vs(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(gu(n),r!==n.version))return!0}return!1}function js(t){if(so(t)){let e=t.producers;for(;e!==void 0;)e=yh(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function FI(t,e){let n=t.consumersTail,r=so(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)FI(i.producer,i)}function yh(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!so(e)){let o=e.producers;for(;o!==void 0;)o=yh(o)}return n}function so(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function mu(t){QR?.(t)}function ZR(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function yu(t,e){return Object.is(t,e)}function vu(t,e){let n=Object.create(JR);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(gu(n),io(n),n.value===Fs)throw n.error;return n.value};return r[nt]=n,mu(n),r}var du=Symbol("UNSET"),fu=Symbol("COMPUTING"),Fs=Symbol("ERRORED"),JR=Re(me({},ro),{value:du,dirty:!0,error:null,equal:yu,kind:"computed",producerMustRecompute(t){return t.value===du||t.value===fu},producerRecomputeValue(t){if(t.value===fu)throw new Error("");let e=t.value;t.value=fu;let n=oo(t),r,i=!1;try{r=t.computation(),X(null),i=e!==du&&e!==Fs&&r!==Fs&&t.equal(e,r)}catch(o){r=Fs,t.error=o}finally{Ls(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function XR(){throw new Error}var LI=XR;function VI(t){LI(t)}function vh(t){LI=t}var eP=null;function _h(t,e){let n=Object.create(_u);n.value=t,e!==void 0&&(n.equal=e);let r=()=>jI(n);return r[nt]=n,mu(n),[r,s=>ao(n,s),s=>Eh(n,s)]}function jI(t){return io(t),t.value}function ao(t,e){mh()||VI(t),t.equal(t.value,e)||(t.value=e,tP(t))}function Eh(t,e){mh()||VI(t),ao(t,e(t.value))}var _u=Re(me({},ro),{equal:yu,value:void 0,kind:"signal"});function tP(t){t.version++,kI(),gh(t),eP?.(t)}function BI(t){let e=X(null);try{return t()}finally{X(e)}}var ei=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},kh=new ei("20.3.6");var Tu="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(uo(e,n)),this.code=e}};function nP(t){return`NG0${Math.abs(t)}`}function uo(t,e){return`${nP(t)}${e?": "+e:""}`}var An=globalThis;function ue(t){for(let e in t)if(t[e]===ue)return e;throw Error("")}function HI(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Cn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Cn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function xh(t,e){return t?e?`${t} ${e}`:t:e||""}var rP=ue({__forward_ref__:ue});function Du(t){return t.__forward_ref__=Du,t.toString=function(){return Cn(this())},t}function We(t){return Oh(t)?t():t}function Oh(t){return typeof t=="function"&&t.hasOwnProperty(rP)&&t.__forward_ref__===Du}function J(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ii(t){return{providers:t.providers||[],imports:t.imports||[]}}function Hs(t){return oP(t,bu)}function iP(t){return Hs(t)!==null}function oP(t,e){return t.hasOwnProperty(e)&&t[e]||null}function sP(t){let e=t?.[bu]??null;return e||null}function wh(t){return t&&t.hasOwnProperty(Iu)?t[Iu]:null}var bu=ue({\u0275prov:ue}),Iu=ue({\u0275inj:ue}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=J({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Fh(t){return t&&!!t.\u0275providers}var Lh=ue({\u0275cmp:ue}),Vh=ue({\u0275dir:ue}),jh=ue({\u0275pipe:ue}),Bh=ue({\u0275mod:ue}),Us=ue({\u0275fac:ue}),oi=ue({__NG_ELEMENT_ID__:ue}),UI=ue({__NG_ENV_ID__:ue});function jt(t){return typeof t=="string"?t:t==null?"":String(t)}function qI(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():jt(t)}var zI=ue({ngErrorCode:ue}),aP=ue({ngErrorMessage:ue}),cP=ue({ngTokenPath:ue});function Uh(t,e){return GI("",-200,e)}function Cu(t,e){throw new j(-201,!1)}function GI(t,e,n){let r=new j(e,t);return r[zI]=e,r[aP]=t,n&&(r[cP]=n),r}function uP(t){return t[zI]}var Th;function WI(){return Th}function dt(t){let e=Th;return Th=t,e}function $h(t,e,n){let r=Hs(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Cu(t,"Injector")}var lP={},Xr=lP,Dh="__NG_DI_FLAG__",bh=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=ti(n)||0;try{return this.injector.get(e,r&8?null:Xr,r)}catch(i){if(no(i))return i;throw i}}};function dP(t,e=0){let n=uu();if(n===void 0)throw new j(-203,!1);if(n===null)return $h(t,void 0,e);{let r=fP(e),i=n.retrieve(t,r);if(no(i)){if(r.optional)return null;throw i}return i}}function _e(t,e=0){return(WI()||dP)(We(t),e)}function F(t,e){return _e(t,ti(e))}function ti(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function fP(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Ch(t){let e=[];for(let n=0;n<t.length;n++){let r=We(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=hP(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(_e(i,o))}else e.push(_e(r))}return e}function KI(t,e){return t[Dh]=e,t.prototype[Dh]=e,t}function hP(t){return t[Dh]}function ir(t,e){let n=t.hasOwnProperty(Us);return n?t[Us]:null}function QI(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function YI(t){return t.flat(Number.POSITIVE_INFINITY)}function Su(t,e){t.forEach(n=>Array.isArray(n)?Su(n,e):e(n))}function Hh(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function qs(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ZI(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function JI(t,e,n){let r=lo(t,e);return r>=0?t[r|1]=n:(r=~r,ZI(t,r,e,n)),r}function Au(t,e){let n=lo(t,e);if(n>=0)return t[n|1]}function lo(t,e){return pP(t,e,1)}function pP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var ar={},wt=[],si=new $(""),qh=new $("",-1),zh=new $(""),$s=class{get(e,n=Xr){if(n===Xr){let i=GI("",-201);throw i.name="\u0275NotFound",i}return n}};function Gh(t){return t[Bh]||null}function Nn(t){return t[Lh]||null}function Wh(t){return t[Vh]||null}function XI(t){return t[jh]||null}function Rn(t){return{\u0275providers:t}}function ew(...t){return{\u0275providers:Kh(!0,t),\u0275fromNgModule:!0}}function Kh(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Su(e,s=>{let c=s;wu(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&tw(i,o),n}function tw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Qh(i,o=>{e(o,r)})}}function wu(t,e,n,r){if(t=We(t),!t)return!1;let i=null,o=wh(t),s=!o&&Nn(t);if(!o&&!s){let u=t.ngModule;if(o=wh(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)wu(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{Su(o.imports,f=>{wu(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&tw(l,e)}if(!c){let l=ir(i)||(()=>new i);e({provide:i,useFactory:l,deps:wt},i),e({provide:zh,useValue:i,multi:!0},i),e({provide:si,useValue:()=>_e(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;Qh(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Qh(t,e){for(let n of t)Fh(n)&&(n=n.\u0275providers),Array.isArray(n)?Qh(n,e):e(n)}var gP=ue({provide:String,useValue:ue});function nw(t){return t!==null&&typeof t=="object"&&gP in t}function mP(t){return!!(t&&t.useExisting)}function yP(t){return!!(t&&t.useFactory)}function ni(t){return typeof t=="function"}function rw(t){return!!t.useClass}var Yh=new $(""),Eu={},$I={},Ih;function zs(){return Ih===void 0&&(Ih=new $s),Ih}var mt=class{},ri=class extends mt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Ah(e,s=>this.processProvider(s)),this.records.set(qh,co(void 0,this)),i.has("environment")&&this.records.set(mt,co(void 0,this));let o=this.records.get(Yh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(zh,wt,{self:!0}))}retrieve(e,n){let r=ti(n)||0;try{return this.get(e,Xr,r)}catch(i){if(no(i))return i;throw i}}destroy(){Bs(this),this._destroyed=!0;let e=X(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),X(e)}}onDestroy(e){return Bs(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Bs(this);let n=Xt(this),r=dt(void 0),i;try{return e()}finally{Xt(n),dt(r)}}get(e,n=Xr,r){if(Bs(this),e.hasOwnProperty(UI))return e[UI](this);let i=ti(r),o,s=Xt(this),c=dt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=wP(e)&&Hs(e);f&&this.injectableDefInScope(f)?l=co(Sh(e),Eu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?zs():this.parent;return n=i&8&&n===Xr?null:n,u.get(e,n)}catch(u){let l=uP(u);throw l===-200||l===-201?new j(l,null):u}finally{dt(c),Xt(s)}}resolveInjectorInitializers(){let e=X(null),n=Xt(this),r=dt(void 0),i;try{let o=this.get(si,wt,{self:!0});for(let s of o)s()}finally{Xt(n),dt(r),X(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Cn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=We(e);let n=ni(e)?e:We(e&&e.provide),r=_P(e);if(!ni(e)&&e.multi===!0){let i=this.records.get(n);i||(i=co(void 0,Eu,!0),i.factory=()=>Ch(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=X(null);try{if(n.value===$I)throw Uh(Cn(e));return n.value===Eu&&(n.value=$I,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&IP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{X(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=We(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Sh(t){let e=Hs(t),n=e!==null?e.factory:ir(t);if(n!==null)return n;if(t instanceof $)throw new j(204,!1);if(t instanceof Function)return vP(t);throw new j(204,!1)}function vP(t){if(t.length>0)throw new j(204,!1);let n=sP(t);return n!==null?()=>n.factory(t):()=>new t}function _P(t){if(nw(t))return co(void 0,t.useValue);{let e=Zh(t);return co(e,Eu)}}function Zh(t,e,n){let r;if(ni(t)){let i=We(t);return ir(i)||Sh(i)}else if(nw(t))r=()=>We(t.useValue);else if(yP(t))r=()=>t.useFactory(...Ch(t.deps||[]));else if(mP(t))r=(i,o)=>_e(We(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=We(t&&(t.useClass||t.provide));if(EP(t))r=()=>new i(...Ch(t.deps));else return ir(i)||Sh(i)}return r}function Bs(t){if(t.destroyed)throw new j(205,!1)}function co(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function EP(t){return!!t.deps}function IP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function wP(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Ah(t,e){for(let n of t)Array.isArray(n)?Ah(n,e):n&&Fh(n)?Ah(n.\u0275providers,e):e(n)}function cr(t,e){let n;t instanceof ri?(Bs(t),n=t):n=new bh(t);let r,i=Xt(n),o=dt(void 0);try{return e()}finally{Xt(i),dt(o)}}function Jh(){return WI()!==void 0||uu()!=null}var Bt=0,q=1,z=2,Ue=3,Nt=4,Rt=5,Gs=6,fo=7,rt=8,ur=9,en=10,De=11,ho=12,Xh=13,ai=14,Pt=15,lr=16,ci=17,tn=18,Ws=19,ep=20,bn=21,Nu=22,Ks=23,Tt=24,ui=25,Qs=26,Ke=27,iw=1;var dr=7,Ys=8,li=9,ft=10;function nn(t){return Array.isArray(t)&&typeof t[iw]=="object"}function Ut(t){return Array.isArray(t)&&t[iw]===!0}function tp(t){return(t.flags&4)!==0}function fr(t){return t.componentOffset>-1}function Zs(t){return(t.flags&1)===1}function rn(t){return!!t.template}function po(t){return(t[z]&512)!==0}function di(t){return(t[z]&256)===256}var np="svg",ow="math";function Mt(t){for(;Array.isArray(t);)t=t[Bt];return t}function rp(t,e){return Mt(e[t])}function $t(t,e){return Mt(e[t.index])}function Ru(t,e){return t.data[e]}function Pu(t,e){return t[e]}function ip(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function kt(t,e){let n=e[t];return nn(n)?n:n[Bt]}function sw(t){return(t[z]&4)===4}function Mu(t){return(t[z]&128)===128}function aw(t){return Ut(t[Ue])}function Js(t,e){return e==null?null:t[e]}function op(t){t[ci]=0}function sp(t){t[z]&1024||(t[z]|=1024,Mu(t)&&go(t))}function cw(t,e){for(;t>0;)e=e[ai],t--;return e}function Xs(t){return!!(t[z]&9216||t[Tt]?.dirty)}function ku(t){t[en].changeDetectionScheduler?.notify(8),t[z]&64&&(t[z]|=1024),Xs(t)&&go(t)}function go(t){t[en].changeDetectionScheduler?.notify(0);let e=or(t);for(;e!==null&&!(e[z]&8192||(e[z]|=8192,!Mu(e)));)e=or(e)}function ap(t,e){if(di(t))throw new j(911,!1);t[bn]===null&&(t[bn]=[]),t[bn].push(e)}function uw(t,e){if(t[bn]===null)return;let n=t[bn].indexOf(e);n!==-1&&t[bn].splice(n,1)}function or(t){let e=t[Ue];return Ut(e)?e[Ue]:e}function cp(t){return t[fo]??=[]}function up(t){return t.cleanup??=[]}function lw(t,e,n,r){let i=cp(e);i.push(n),t.firstCreatePass&&up(t).push(r,i.length-1)}var Z={lFrame:Aw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Nh=!1;function dw(){return Z.lFrame.elementDepthCount}function fw(){Z.lFrame.elementDepthCount++}function hw(){Z.lFrame.elementDepthCount--}function lp(){return Z.bindingsEnabled}function pw(){return Z.skipHydrationRootTNode!==null}function gw(t){return Z.skipHydrationRootTNode===t}function mw(){Z.skipHydrationRootTNode=null}function te(){return Z.lFrame.lView}function it(){return Z.lFrame.tView}function yw(t){return Z.lFrame.contextLView=t,t[rt]}function vw(t){return Z.lFrame.contextLView=null,t}function Qe(){let t=dp();for(;t!==null&&t.type===64;)t=t.parent;return t}function dp(){return Z.lFrame.currentTNode}function _w(){let t=Z.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function mo(t,e){let n=Z.lFrame;n.currentTNode=t,n.isParent=e}function fp(){return Z.lFrame.isParent}function Ew(){Z.lFrame.isParent=!1}function Iw(){return Z.lFrame.contextLView}function hp(){return Nh}function pp(t){let e=Nh;return Nh=t,e}function ea(){let t=Z.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function gp(){return Z.lFrame.bindingIndex}function ww(t){return Z.lFrame.bindingIndex=t}function yo(){return Z.lFrame.bindingIndex++}function xu(t){let e=Z.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Tw(){return Z.lFrame.inI18n}function Dw(t,e){let n=Z.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ou(e)}function bw(){return Z.lFrame.currentDirectiveIndex}function Ou(t){Z.lFrame.currentDirectiveIndex=t}function Cw(t){let e=Z.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function mp(){return Z.lFrame.currentQueryIndex}function Fu(t){Z.lFrame.currentQueryIndex=t}function TP(t){let e=t[q];return e.type===2?e.declTNode:e.type===1?t[Rt]:null}function yp(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=TP(o),i===null||(o=o[ai],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Z.lFrame=Sw();return r.currentTNode=e,r.lView=t,!0}function Lu(t){let e=Sw(),n=t[q];Z.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Sw(){let t=Z.lFrame,e=t===null?null:t.child;return e===null?Aw(t):e}function Aw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Nw(){let t=Z.lFrame;return Z.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var vp=Nw;function Vu(){let t=Nw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Rw(t){return(Z.lFrame.contextLView=cw(t,Z.lFrame.contextLView))[rt]}function Pn(){return Z.lFrame.selectedIndex}function hr(t){Z.lFrame.selectedIndex=t}function ju(){let t=Z.lFrame;return Ru(t.tView,t.selectedIndex)}function Pw(){Z.lFrame.currentNamespace=np}function Mw(){DP()}function DP(){Z.lFrame.currentNamespace=null}function kw(){return Z.lFrame.currentNamespace}var xw=!0;function Bu(){return xw}function Uu(t){xw=t}function Rh(t,e=null,n=null,r){let i=_p(t,e,n,r);return i.resolveInjectorInitializers(),i}function _p(t,e=null,n=null,r,i=new Set){let o=[n||wt,ew(t)];return r=r||(typeof t=="object"?void 0:Cn(t)),new ri(o,e||zs(),r||null,i)}var Ve=class t{static THROW_IF_NOT_FOUND=Xr;static NULL=new $s;static create(e,n){if(Array.isArray(e))return Rh({name:""},n,e,"");{let r=e.name??"";return Rh({name:r},e.parent,e.providers,r)}}static \u0275prov=J({token:t,providedIn:"any",factory:()=>_e(qh)});static __NG_ELEMENT_ID__=-1},fi=new $(""),hi=(()=>{class t{static __NG_ELEMENT_ID__=bP;static __NG_ENV_ID__=n=>n}return t})(),Ph=class extends hi{_lView;constructor(e){super(),this._lView=e}get destroyed(){return di(this._lView)}onDestroy(e){let n=this._lView;return ap(n,e),()=>uw(n,e)}};function bP(){return new Ph(te())}var sr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ht=new $("",{providedIn:"root",factory:()=>{let t=F(mt),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(sr),e.handleError(n))}}}),Ow={provide:si,useValue:()=>void F(sr),multi:!0};function Ep(t){return typeof t=="function"&&t[nt]!==void 0}function Ip(t,e){let[n,r,i]=_h(t,e?.equal),o=n,s=o[nt];return o.set=r,o.update=i,o.asReadonly=Fw.bind(o),o}function Fw(){let t=this[nt];if(t.readonlyFn===void 0){let e=()=>this();e[nt]=t,t.readonlyFn=e}return t.readonlyFn}function wp(t){return Ep(t)&&typeof t.set=="function"}var $u=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=CP}return t})();function CP(){return new $u(te(),Qe())}var Sn=class{},Hu=new $("",{providedIn:"root",factory:()=>!1});var Tp=new $(""),Dp=new $(""),pr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ps(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Y(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=J({token:t,providedIn:"root",factory:()=>new t})}return t})(),vo=(()=>{class t{internalPendingTasks=F(pr);scheduler=F(Sn);errorHandler=F(Ht);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=J({token:t,providedIn:"root",factory:()=>new t})}return t})();function ta(...t){}var bp=(()=>{class t{static \u0275prov=J({token:t,providedIn:"root",factory:()=>new Mh})}return t})(),Mh=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Do(t){return{toString:t}.toString()}var qu="__parameters__";function kP(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function xP(t,e,n){return Do(()=>{let r=kP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,f){let p=u.hasOwnProperty(qu)?u[qu]:Object.defineProperty(u,qu,{value:[]})[qu];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Dt=KI(xP("Optional"),8);function pT(t){let e=An.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function OP(t){return typeof t=="function"}var Xu=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function gT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var mT=(()=>{let t=()=>yT;return t.ngInherit=!0,t})();function yT(t){return t.type.prototype.ngOnChanges&&(t.setInput=LP),FP}function FP(){let t=_T(this),e=t?.current;if(e){let n=t.previous;if(n===ar)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function LP(t,e,n,r,i){let o=this.declaredInputs[r],s=_T(t)||VP(t,{previous:ar,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new Xu(l&&l.currentValue,n,u===ar),gT(t,e,i,n)}var vT="__ngSimpleChanges__";function _T(t){return t[vT]||null}function VP(t,e){return t[vT]=e}var Lw=[];var pe=function(t,e=null,n){for(let r=0;r<Lw.length;r++){let i=Lw[r];i(t,e,n)}};function jP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=yT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function ET(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Qu(t,e,n){IT(t,e,3,n)}function Yu(t,e,n,r){(t[z]&3)===n&&IT(t,e,n,r)}function Cp(t,e){let n=t[z];(n&3)===e&&(n&=16383,n+=1,t[z]=n)}function IT(t,e,n,r){let i=r!==void 0?t[ci]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[ci]+=65536),(c<o||o==-1)&&(BP(t,n,e,u),t[ci]=(t[ci]&4294901760)+u+2),u++}function Vw(t,e){pe(4,t,e);let n=X(null);try{e.call(t)}finally{X(n),pe(5,t,e)}}function BP(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[z]>>14<t[ci]>>16&&(t[z]&3)===e&&(t[z]+=16384,Vw(c,o)):Vw(c,o)}var Eo=-1,gi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function UP(t){return(t.flags&8)!==0}function $P(t){return(t.flags&16)!==0}function HP(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];qP(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function wT(t){return t===3||t===4||t===6}function qP(t){return t.charCodeAt(0)===64}function ia(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?jw(t,n,i,null,e[++r]):jw(t,n,i,null,null))}}return t}function jw(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function TT(t){return t!==Eo}function el(t){return t&32767}function zP(t){return t>>16}function tl(t,e){let n=zP(t),r=e;for(;n>0;)r=r[ai],n--;return r}var Lp=!0;function nl(t){let e=Lp;return Lp=t,e}var GP=256,DT=GP-1,bT=5,WP=0,on={};function KP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(oi)&&(r=n[oi]),r==null&&(r=n[oi]=WP++);let i=r&DT,o=1<<i;e.data[t+(i>>bT)]|=o}function rl(t,e){let n=CT(t,e);if(n!==-1)return n;let r=e[q];r.firstCreatePass&&(t.injectorIndex=e.length,Sp(r.data,t),Sp(e,null),Sp(r.blueprint,null));let i=cg(t,e),o=t.injectorIndex;if(TT(i)){let s=el(i),c=tl(i,e),u=c[q].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function Sp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function CT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function cg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=PT(i),r===null)return Eo;if(n++,i=i[ai],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Eo}function Vp(t,e,n){KP(t,e,n)}function QP(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(wT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function ST(t,e,n){if(n&8||t!==void 0)return t;Cu(e,"NodeInjector")}function AT(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[ur],o=dt(void 0);try{return i?i.get(e,r,n&8):$h(e,r,n&8)}finally{dt(o)}}return ST(r,e,n)}function NT(t,e,n,r=0,i){if(t!==null){if(e[z]&2048&&!(r&2)){let s=XP(t,e,n,r,on);if(s!==on)return s}let o=RT(t,e,n,r,on);if(o!==on)return o}return AT(e,n,r,i)}function RT(t,e,n,r,i){let o=ZP(n);if(typeof o=="function"){if(!yp(e,t,r))return r&1?ST(i,n,r):AT(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Cu(n);else return s}finally{vp()}}else if(typeof o=="number"){let s=null,c=CT(t,e),u=Eo,l=r&1?e[Pt][Rt]:null;for((c===-1||r&4)&&(u=c===-1?cg(t,e):e[c+8],u===Eo||!Uw(r,!1)?c=-1:(s=e[q],c=el(u),e=tl(u,e)));c!==-1;){let f=e[q];if(Bw(o,c,f.data)){let p=YP(c,e,n,s,r,l);if(p!==on)return p}u=e[c+8],u!==Eo&&Uw(r,e[q].data[c+8]===l)&&Bw(o,c,e)?(s=f,c=el(u),e=tl(u,e)):c=-1}}return i}function YP(t,e,n,r,i,o){let s=e[q],c=s.data[t+8],u=r==null?fr(c)&&Lp:r!=s&&(c.type&3)!==0,l=i&1&&o===c,f=Zu(c,s,n,u,l);return f!==null?oa(e,s,f,c,i):on}function Zu(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?c:c+f,g=i?c+f:l;for(let y=p;y<g;y++){let C=s[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=s[u];if(y&&rn(y)&&y.type===n)return u}return null}function oa(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof gi){let c=o;if(c.resolving){let y=qI(s[n]);throw Uh(y)}let u=nl(c.canSeeViewProviders);c.resolving=!0;let l=s[n].type||s[n],f,p=c.injectImpl?dt(c.injectImpl):null,g=yp(t,r,0);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&jP(n,s[n],e)}finally{p!==null&&dt(p),nl(u),c.resolving=!1,vp()}}return o}function ZP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(oi)?t[oi]:void 0;return typeof e=="number"?e>=0?e&DT:JP:e}function Bw(t,e,n){let r=1<<t;return!!(n[e+(t>>bT)]&r)}function Uw(t,e){return!(t&2)&&!(t&1&&e)}var pi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return NT(this._tNode,this._lView,e,ti(r),n)}};function JP(){return new pi(Qe(),te())}function ha(t){return Do(()=>{let e=t.prototype.constructor,n=e[Us]||jp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Us]||jp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function jp(t){return Oh(t)?()=>{let e=jp(We(t));return e&&e()}:ir(t)}function XP(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[z]&2048&&!po(s);){let c=RT(o,s,n,r|2,on);if(c!==on)return c;let u=o.parent;if(!u){let l=s[ep];if(l){let f=l.get(n,on,r);if(f!==on)return f}u=PT(s),s=s[ai]}o=u}return i}function PT(t){let e=t[q],n=e.type;return n===2?e.declTNode:n===1?t[Rt]:null}function ug(t){return QP(Qe(),t)}function eM(){return bo(Qe(),te())}function bo(t,e){return new kn($t(t,e))}var kn=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=eM}return t})();function tM(t){return t instanceof kn?t.nativeElement:t}function nM(){return this._results[Symbol.iterator]()}var il=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Be}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=YI(e);(this._changesDetected=!QI(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=nM};function MT(t){return(t.flags&128)===128}var lg=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(lg||{}),kT=new Map,rM=0;function iM(){return rM++}function oM(t){kT.set(t[Ws],t)}function Bp(t){kT.delete(t[Ws])}var $w="__ngContext__";function Io(t,e){nn(e)?(t[$w]=e[Ws],oM(e)):t[$w]=e}function xT(t){return FT(t[ho])}function OT(t){return FT(t[Nt])}function FT(t){for(;t!==null&&!Ut(t);)t=t[Nt];return t}var Up;function sM(t){Up=t}function LT(){if(Up!==void 0)return Up;if(typeof document<"u")return document;throw new j(210,!1)}var aM=new $("",{providedIn:"root",factory:()=>cM}),cM="ng",VT=new $(""),dg=new $("",{providedIn:"platform",factory:()=>"unknown"});var uM=new $(""),lM=new $("",{providedIn:"root",factory:()=>LT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var dM="h",fM="b";var jT=!1,BT=new $("",{providedIn:"root",factory:()=>jT});var hM=new $("");var pM=(t,e,n,r)=>{};function gM(t,e,n,r){pM(t,e,n,r)}function fg(t){return(t.flags&32)===32}var mM=()=>null;function UT(t,e,n=!1){return mM(t,e,n)}function $T(t,e){let n=t.contentQueries;if(n!==null){let r=X(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];Fu(o),c.contentQueries(2,e[s],s)}}}finally{X(r)}}}function $p(t,e,n){Fu(0);let r=X(null);try{e(t,n)}finally{X(r)}}function HT(t,e,n){if(tp(e)){let r=X(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{X(r)}}}var wo=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(wo||{});var zu;function yM(){if(zu===void 0&&(zu=null,An.trustedTypes))try{zu=An.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return zu}function Hw(t){return yM()?.createScriptURL(t)||t}var ol=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Tu})`}};function pa(t){return t instanceof ol?t.changingThisBreaksApplicationSecurity:t}function hg(t,e){let n=qT(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Tu})`)}return n===e}function qT(t){return t instanceof ol&&t.getTypeName()||null}var vM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zT(t){return t=String(t),t.match(vM)?t:"unsafe:"+t}var ml=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(ml||{});function GT(t){let e=KT();return e?e.sanitize(ml.URL,t)||"":hg(t,"URL")?pa(t):zT(jt(t))}function WT(t){let e=KT();if(e)return Hw(e.sanitize(ml.RESOURCE_URL,t)||"");if(hg(t,"ResourceURL"))return Hw(pa(t));throw new j(904,!1)}function _M(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?WT:GT}function EM(t,e,n){return _M(e,n)(t)}function KT(){let t=te();return t&&t[en].sanitizer}function QT(t){return t instanceof Function?t():t}function IM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var YT="ng-template";function wM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&IM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(pg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function pg(t){return t.type===4&&t.value!==YT}function TM(t,e,n){let r=t.type===4&&!n?YT:t.value;return e===r}function DM(t,e,n){let r=4,i=t.attrs,o=i!==null?SM(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!qt(r)&&!qt(u))return!1;if(s&&qt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!TM(t,u,n)||u===""&&e.length===1){if(qt(r))return!1;s=!0}}else if(r&8){if(i===null||!wM(t,i,u,n)){if(qt(r))return!1;s=!0}}else{let l=e[++c],f=bM(u,i,pg(t),n);if(f===-1){if(qt(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(qt(r))return!1;s=!0}}}}return qt(r)||s}function qt(t){return(t&1)===0}function bM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return AM(e,t)}function CM(t,e,n=!1){for(let r=0;r<e.length;r++)if(DM(t,e[r],n))return!0;return!1}function SM(t){for(let e=0;e<t.length;e++){let n=t[e];if(wT(n))return e}return t.length}function AM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function qw(t,e){return t?":not("+e.trim()+")":e}function NM(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!qt(s)&&(e+=qw(o,i),i=""),r=s,o=o||!qt(r);n++}return i!==""&&(e+=qw(o,i)),e}function RM(t){return t.map(NM).join(",")}function PM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!qt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var ht={};function MM(t,e){return t.createText(e)}function kM(t,e,n){t.setValue(e,n)}function ZT(t,e,n){return t.createElement(e,n)}function sl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function JT(t,e,n){t.appendChild(e,n)}function zw(t,e,n,r,i){r!==null?sl(t,e,n,r,i):JT(t,e,n)}function xM(t,e,n,r){t.removeChild(null,e,n,r)}function OM(t,e,n){t.setAttribute(e,"style",n)}function FM(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function XT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&HP(t,e,r),i!==null&&FM(t,e,i),o!==null&&OM(t,e,o)}function gg(t,e,n,r,i,o,s,c,u,l,f){let p=Ke+r,g=p+i,y=LM(p,g),C=typeof l=="function"?l():l;return y[q]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:f}}function LM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ht);return n}function VM(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=gg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function mg(t,e,n,r,i,o,s,c,u,l,f){let p=e.blueprint.slice();return p[Bt]=i,p[z]=r|4|128|8|64|1024,(l!==null||t&&t[z]&2048)&&(p[z]|=2048),op(p),p[Ue]=p[ai]=t,p[rt]=n,p[en]=s||t&&t[en],p[De]=c||t&&t[De],p[ur]=u||t&&t[ur]||null,p[Rt]=o,p[Ws]=iM(),p[Gs]=f,p[ep]=l,p[Pt]=e.type==2?t[Pt]:p,p}function jM(t,e,n){let r=$t(e,t),i=VM(n),o=t[en].rendererFactory,s=yg(t,mg(t,i,null,eD(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function eD(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function tD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function yg(t,e){return t[ho]?t[Xh][Nt]=e:t[ho]=e,t[Xh]=e,e}function BM(t=1){nD(it(),te(),Pn()+t,!1)}function nD(t,e,n,r){if(!r)if((e[z]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Qu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Yu(e,o,0,n)}hr(n)}var yl=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(yl||{});function Hp(t,e,n,r){let i=X(null);try{let[o,s,c]=t.inputs[n],u=null;(s&yl.SignalBased)!==0&&(u=e[o][nt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):gT(e,u,o,r)}finally{X(i)}}var sa=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(sa||{}),UM;function vg(t,e){return UM(t,e)}var al=new Set,vl=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(vl||{}),ga=new $(""),Gw=new Set;function _l(t){Gw.has(t)||(Gw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var rD=!1,qp=class extends Be{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Jh()&&(this.destroyRef=F(hi,{optional:!0})??void 0,this.pendingTasks=F(pr,{optional:!0})??void 0)}emit(e){let n=X(null);try{super.next(e)}finally{X(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Pe&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Mn=qp;function iD(t){let e,n;function r(){t=ta;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Ww(t){return queueMicrotask(()=>t()),()=>{t=ta}}var _g="isAngularZone",cl=_g+"_ID",$M=0,ge=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Mn(!1);onMicrotaskEmpty=new Mn(!1);onStable=new Mn(!1);onError=new Mn(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=rD}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,zM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(_g)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,HM,ta,ta);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},HM={};function Eg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function qM(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){iD(()=>{t.callbackScheduled=!1,zp(t),t.isCheckStableRunning=!0,Eg(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),zp(t)}function zM(t){let e=()=>{qM(t)},n=$M++;t._inner=t._inner.fork({name:"angular",properties:{[_g]:!0,[cl]:n,[cl+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(GM(u))return r.invokeTask(o,s,c,u);try{return Kw(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Qw(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return Kw(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!WM(u)&&e(),Qw(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,zp(t),Eg(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function zp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Kw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Qw(t){t._nesting--,Eg(t)}var aa=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Mn;onMicrotaskEmpty=new Mn;onStable=new Mn;onError=new Mn;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function GM(t){return oD(t,"__ignore_ng_zone__")}function WM(t){return oD(t,"__scheduler_tick__")}function oD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}function sD(t="zone.js",e){return t==="noop"?new aa:t==="zone.js"?new ge(e):t}var Ig=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=J({token:t,providedIn:"root",factory:()=>new t})}return t})(),aD=[0,1,2,3],cD=(()=>{class t{ngZone=F(ge);scheduler=F(Sn);errorHandler=F(sr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){F(ga,{optional:!0})}execute(){let n=this.sequences.size>0;n&&pe(16),this.executing=!0;for(let r of aD)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&pe(17)}register(n){let{view:r}=n;r!==void 0?((r[ui]??=[]).push(n),go(r),r[z]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(vl.AFTER_NEXT_RENDER,n):n()}static \u0275prov=J({token:t,providedIn:"root",factory:()=>new t})}return t})(),ul=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ui];e&&(this.view[ui]=e.filter(n=>n!==this))}};function KM(t,e){let n=e?.injector??F(Ve);return _l("NgAfterNextRender"),YM(t,n,e,!0)}function QM(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function YM(t,e,n,r){let i=e.get(Ig);i.impl??=e.get(cD);let o=e.get(ga,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(hi):null,c=e.get($u,null,{optional:!0}),u=new ul(i.impl,QM(t),c?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var ZM=new $("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function uD(t,e){let n=t.get(ZM);if(Array.isArray(e))for(let r of e)n.queue.add(r);else n.queue.add(e);n.scheduler&&n.scheduler(t)}function JM(t,e){for(let[n,r]of e)uD(t,r.animateFns)}function Yw(t,e,n,r){let i=t?.[Qs]?.enter;e!==null&&i&&i.has(n.index)&&JM(r,i)}function _o(t,e,n,r,i,o,s,c){if(i!=null){let u,l=!1;Ut(i)?u=i:nn(i)&&(l=!0,i=i[Bt]);let f=Mt(i);t===0&&r!==null?(Yw(c,r,o,n),s==null?JT(e,r,f):sl(e,r,f,s||null,!0)):t===1&&r!==null?(Yw(c,r,o,n),sl(e,r,f,s||null,!0)):t===2?Zw(c,o,n,p=>{xM(e,f,l,p)}):t===3&&Zw(c,o,n,()=>{e.destroyNode(f)}),u!=null&&dk(e,t,n,u,o,r,s)}}function XM(t,e){lD(t,e),e[Bt]=null,e[Rt]=null}function ek(t,e,n,r,i,o){r[Bt]=i,r[Rt]=e,El(t,r,n,1,i,o)}function lD(t,e){e[en].changeDetectionScheduler?.notify(9),El(t,e,e[De],2,null,null)}function tk(t){let e=t[ho];if(!e)return Ap(t[q],t);for(;e;){let n=null;if(nn(e))n=e[ho];else{let r=e[ft];r&&(n=r)}if(!n){for(;e&&!e[Nt]&&e!==t;)nn(e)&&Ap(e[q],e),e=e[Ue];e===null&&(e=t),nn(e)&&Ap(e[q],e),n=e&&e[Nt]}e=n}}function wg(t,e){let n=t[li],r=n.indexOf(e);n.splice(r,1)}function dD(t,e){if(di(e))return;let n=e[De];n.destroyNode&&El(t,e,n,3,null,null),tk(e)}function Ap(t,e){if(di(e))return;let n=X(null);try{e[z]&=-129,e[z]|=256,e[Tt]&&js(e[Tt]),ik(t,e),rk(t,e),e[q].type===1&&e[De].destroy();let r=e[lr];if(r!==null&&Ut(e[Ue])){r!==e[Ue]&&wg(r,e);let i=e[tn];i!==null&&i.detachView(t)}Bp(e)}finally{X(n)}}function Zw(t,e,n,r){let i=t?.[Qs];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);if(i.skipLeaveAnimations)return i.skipLeaveAnimations=!1,r(!1);t&&al.add(t),uD(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s)for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:f}=l();c.push(f)}i.running=Promise.allSettled(c),nk(t,r)}else t&&al.delete(t),r(!1)})}function nk(t,e){let n=t[Qs]?.running;if(n){n.then(()=>{t[Qs].running=void 0,al.delete(t),e(!0)});return}e(!1)}function rk(t,e){let n=t.cleanup,r=e[fo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[fo]=null);let i=e[bn];if(i!==null){e[bn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[Ks];if(o!==null){e[Ks]=null;for(let s of o)s.destroy()}}function ik(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof gi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];pe(4,c,u);try{u.call(c)}finally{pe(5,c,u)}}else{pe(4,i,o);try{o.call(i)}finally{pe(5,i,o)}}}}}function ok(t,e,n){return sk(t,e.parent,n)}function sk(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Bt];if(fr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===wo.None||i===wo.Emulated)return null}return $t(r,n)}function ak(t,e,n){return uk(t,e,n)}function ck(t,e,n){return t.type&40?$t(t,n):null}var uk=ck,Jw;function Tg(t,e,n,r){let i=ok(t,r,e),o=e[De],s=r.parent||e[Rt],c=ak(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)zw(o,i,n[u],c,!1);else zw(o,i,n,c,!1);Jw!==void 0&&Jw(o,r,e,n,i)}function na(t,e){if(e!==null){let n=e.type;if(n&3)return $t(e,t);if(n&4)return Gp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return na(t,r);{let i=t[e.index];return Ut(i)?Gp(-1,i):Mt(i)}}else{if(n&128)return na(t,e.next);if(n&32)return vg(e,t)()||Mt(t[e.index]);{let r=fD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=or(t[Pt]);return na(i,r)}else return na(t,e.next)}}}return null}function fD(t,e){if(e!==null){let r=t[Pt][Rt],i=e.projection;return r.projection[i]}return null}function Gp(t,e){let n=ft+t+1;if(n<e.length){let r=e[n],i=r[q].firstChild;if(i!==null)return na(r,i)}return e[dr]}function Dg(t,e,n,r,i,o,s){for(;n!=null;){let c=r[ur];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Io(Mt(u),r),n.flags|=2),!fg(n))if(l&8)Dg(t,e,n.child,r,i,o,!1),_o(e,t,c,i,u,n,o,r);else if(l&32){let f=vg(n,r),p;for(;p=f();)_o(e,t,c,i,p,n,o,r);_o(e,t,c,i,u,n,o,r)}else l&16?lk(t,e,r,n,i,o):_o(e,t,c,i,u,n,o,r);n=s?n.projectionNext:n.next}}function El(t,e,n,r,i,o){Dg(n,r,t.firstChild,e,i,o,!1)}function lk(t,e,n,r,i,o){let s=n[Pt],u=s[Rt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];_o(e,t,n[ur],i,f,r,o,n)}else{let l=u,f=s[Ue];MT(r)&&(l.flags|=128),Dg(t,e,l,f,i,o,!0)}}function dk(t,e,n,r,i,o,s){let c=r[dr],u=Mt(r);c!==u&&_o(e,t,n,o,c,i,s);for(let l=ft;l<r.length;l++){let f=r[l];El(f[q],f,t,e,o,c)}}function fk(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:sa.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=sa.Important),t.setStyle(n,r,i,o))}}function hD(t,e,n,r,i){let o=Pn(),s=r&2;try{hr(-1),s&&e.length>Ke&&nD(t,e,Ke,!1),pe(s?2:0,i,n),n(r,i)}finally{hr(o),pe(s?3:1,i,n)}}function bg(t,e,n){_k(t,e,n),(n.flags&64)===64&&Ek(t,e,n)}function pD(t,e,n=$t){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function hk(t,e,n,r){let o=r.get(BT,jT)||n===wo.ShadowDom,s=t.selectRootElement(e,o);return pk(s),s}function pk(t){gk(t)}var gk=()=>null;function mk(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function gD(t,e,n,r,i,o){let s=e[q];if(Cg(t,s,e,n,r)){fr(t)&&vk(e,t.index);return}t.type&3&&(n=mk(n)),yk(t,e,n,r,i,o)}function yk(t,e,n,r,i,o){if(t.type&3){let s=$t(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function vk(t,e){let n=kt(e,t);n[z]&16||(n[z]|=64)}function _k(t,e,n){let r=n.directiveStart,i=n.directiveEnd;fr(n)&&jM(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||rl(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=oa(e,t,s,n);if(Io(u,e),o!==null&&Dk(e,s-r,u,c,n,o),rn(c)){let l=kt(n.index,e);l[rt]=oa(e,t,s,n)}}}function Ek(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=bw();try{hr(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Ou(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Ik(u,l)}}finally{hr(-1),Ou(s)}}function Ik(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function mD(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];CM(e,o.selectors,!1)&&(r??=[],rn(o)?r.unshift(o):r.push(o))}return r}function wk(t,e,n,r,i,o){let s=$t(t,e);Tk(e[De],s,o,t.value,n,r,i)}function Tk(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let c=s==null?jt(o):s(o,r||"",i);t.setAttribute(e,i,c,n)}}function Dk(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];Hp(r,n,u,l)}}function bk(t,e,n,r,i){let o=Ke+n,s=e[q],c=i(s,e,t,r,n);e[o]=c,mo(t,!0);let u=t.type===2;return u?(XT(e[De],c,t),(dw()===0||Zs(t))&&Io(c,e),fw()):Io(c,e),Bu()&&(!u||!fg(t))&&Tg(s,e,c,t),t}function Ck(t){let e=t;return fp()?Ew():(e=e.parent,mo(e,!1)),e}function Sk(t,e){let n=t[ur];if(!n)return;let r;try{r=n.get(Ht,null)}catch{r=null}r?.(e)}function Cg(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];Hp(p,n[l],f,i),c=!0}if(o)for(let u of o){let l=n[u],f=e.data[u];Hp(f,l,r,i),c=!0}return c}function Ak(t,e){let n=kt(e,t),r=n[q];Nk(r,n);let i=n[Bt];i!==null&&n[Gs]===null&&(n[Gs]=UT(i,n[ur])),pe(18),Sg(r,n,n[rt]),pe(19,n[rt])}function Nk(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Sg(t,e,n){Lu(e);try{let r=t.viewQuery;r!==null&&$p(1,r,n);let i=t.template;i!==null&&hD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[tn]?.finishViewCreation(t),t.staticContentQueries&&$T(t,e),t.staticViewQueries&&$p(2,t.viewQuery,n);let o=t.components;o!==null&&Rk(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[z]&=-5,Vu()}}function Rk(t,e){for(let n=0;n<e.length;n++)Ak(t,e[n])}function Pk(t,e,n,r){let i=X(null);try{let o=e.tView,c=t[z]&4096?4096:16,u=mg(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[lr]=l;let f=t[tn];return f!==null&&(u[tn]=f.createEmbeddedView(o)),Sg(o,u,n),u}finally{X(i)}}function Xw(t,e){return!e||e.firstChild===null||MT(t)}function ca(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Mt(o)),Ut(o)&&yD(o,r);let s=n.type;if(s&8)ca(t,e,n.child,r);else if(s&32){let c=vg(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=fD(e,n);if(Array.isArray(c))r.push(...c);else{let u=or(e[Pt]);ca(u[q],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function yD(t,e){for(let n=ft;n<t.length;n++){let r=t[n],i=r[q].firstChild;i!==null&&ca(r[q],r,i,e)}t[dr]!==t[Bt]&&e.push(t[dr])}function vD(t){if(t[ui]!==null){for(let e of t[ui])e.impl.addSequence(e);t[ui].length=0}}var _D=[];function Mk(t){return t[Tt]??kk(t)}function kk(t){let e=_D.pop()??Object.create(Ok);return e.lView=t,e}function xk(t){t.lView[Tt]!==t&&(t.lView=null,_D.push(t))}var Ok=Re(me({},ro),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{go(t.lView)},consumerOnSignalRead(){this.lView[Tt]=this}});function Fk(t){let e=t[Tt]??Object.create(Lk);return e.lView=t,e}var Lk=Re(me({},ro),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=or(t.lView);for(;e&&!ED(e[q]);)e=or(e);e&&sp(e)},consumerOnSignalRead(){this.lView[Tt]=this}});function ED(t){return t.type!==2}function ID(t){if(t[Ks]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Ks])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[z]&8192)}}var Vk=100;function wD(t,e=0){let r=t[en].rendererFactory,i=!1;i||r.begin?.();try{jk(t,e)}finally{i||r.end?.()}}function jk(t,e){let n=hp();try{pp(!0),Wp(t,e);let r=0;for(;Xs(t);){if(r===Vk)throw new j(103,!1);r++,Wp(t,1)}}finally{pp(n)}}function Bk(t,e,n,r){if(di(e))return;let i=e[z],o=!1,s=!1;Lu(e);let c=!0,u=null,l=null;o||(ED(t)?(l=Mk(e),u=oo(l)):pu()===null?(c=!1,l=Fk(e),u=oo(l)):e[Tt]&&(js(e[Tt]),e[Tt]=null));try{op(e),ww(t.bindingStartIndex),n!==null&&hD(t,e,n,2,r);let f=(i&3)===3;if(!o)if(f){let y=t.preOrderCheckHooks;y!==null&&Qu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Yu(e,y,0,null),Cp(e,0)}if(s||Uk(e),ID(e),TD(e,0),t.contentQueries!==null&&$T(t,e),!o)if(f){let y=t.contentCheckHooks;y!==null&&Qu(e,y)}else{let y=t.contentHooks;y!==null&&Yu(e,y,1),Cp(e,1)}Hk(t,e);let p=t.components;p!==null&&bD(e,p,0);let g=t.viewQuery;if(g!==null&&$p(2,g,r),!o)if(f){let y=t.viewCheckHooks;y!==null&&Qu(e,y)}else{let y=t.viewHooks;y!==null&&Yu(e,y,2),Cp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Nu]){for(let y of e[Nu])y();e[Nu]=null}o||(vD(e),e[z]&=-73)}catch(f){throw o||go(e),f}finally{l!==null&&(Ls(l,u),c&&xk(l)),Vu()}}function TD(t,e){for(let n=xT(t);n!==null;n=OT(n))for(let r=ft;r<n.length;r++){let i=n[r];DD(i,e)}}function Uk(t){for(let e=xT(t);e!==null;e=OT(e)){if(!(e[z]&2))continue;let n=e[li];for(let r=0;r<n.length;r++){let i=n[r];sp(i)}}}function $k(t,e,n){pe(18);let r=kt(e,t);DD(r,n),pe(19,r[rt])}function DD(t,e){Mu(t)&&Wp(t,e)}function Wp(t,e){let r=t[q],i=t[z],o=t[Tt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Vs(o)),s||=!1,o&&(o.dirty=!1),t[z]&=-9217,s)Bk(r,t,r.template,t[rt]);else if(i&8192){let c=X(null);try{ID(t),TD(t,1);let u=r.components;u!==null&&bD(t,u,1),vD(t)}finally{X(c)}}}function bD(t,e,n){for(let r=0;r<e.length;r++)$k(t,e[r],n)}function Hk(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)hr(~i);else{let o=i,s=n[++r],c=n[++r];Dw(s,o);let u=e[o];pe(24,u),c(2,u),pe(25,u)}}}finally{hr(-1)}}function Ag(t,e){let n=hp()?64:1088;for(t[en].changeDetectionScheduler?.notify(e);t;){t[z]|=n;let r=or(t);if(po(t)&&!r)return t;t=r}return null}function CD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function qk(t,e,n,r=!0){let i=e[q];if(zk(i,e,t,n),r){let s=Gp(n,t),c=e[De],u=c.parentNode(t[dr]);u!==null&&ek(i,t[Rt],c,e,u,s)}let o=e[Gs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Kp(t,e){if(t.length<=ft)return;let n=ft+e,r=t[n];if(r){let i=r[lr];i!==null&&i!==t&&wg(i,r),e>0&&(t[n-1][Nt]=r[Nt]);let o=qs(t,ft+e);XM(r[q],r);let s=o[tn];s!==null&&s.detachView(o[q]),r[Ue]=null,r[Nt]=null,r[z]&=-129}return r}function zk(t,e,n,r){let i=ft+r,o=n.length;r>0&&(n[i-1][Nt]=e),r<o-ft?(e[Nt]=n[i],Hh(n,ft+r,e)):(n.push(e),e[Nt]=null),e[Ue]=n;let s=e[lr];s!==null&&n!==s&&SD(s,e);let c=e[tn];c!==null&&c.insertView(t),ku(e),e[z]|=128}function SD(t,e){let n=t[li],r=e[Ue];if(nn(r))t[z]|=2;else{let i=r[Ue][Pt];e[Pt]!==i&&(t[z]|=2)}n===null?t[li]=[e]:n.push(e)}var gr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[q];return ca(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[rt]}set context(e){this._lView[rt]=e}get destroyed(){return di(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ue];if(Ut(e)){let n=e[Ys],r=n?n.indexOf(this):-1;r>-1&&(Kp(e,r),qs(n,r))}this._attachedToViewContainer=!1}dD(this._lView[q],this._lView)}onDestroy(e){ap(this._lView,e)}markForCheck(){Ag(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[z]&=-129}reattach(){ku(this._lView),this._lView[z]|=128}detectChanges(){this._lView[z]|=1024,wD(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=po(this._lView),n=this._lView[lr];n!==null&&!e&&wg(n,this._lView),lD(this._lView[q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=po(this._lView),r=this._lView[lr];r!==null&&!n&&SD(r,this._lView),ku(this._lView)}};var mr=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Gk;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Pk(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new gr(o)}}return t})();function Gk(){return Il(Qe(),te())}function Il(t,e){return t.type&4?new mr(e,t,bo(t,e)):null}function Ng(t,e,n,r,i){let o=t.data[e];if(o===null)o=Wk(t,e,n,r,i),Tw()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=_w();o.injectorIndex=s===null?-1:s.injectorIndex}return mo(o,!0),o}function Wk(t,e,n,r,i){let o=dp(),s=fp(),c=s?o:o&&o.parent,u=t.data[e]=Qk(t,c,n,e,r,i);return Kk(t,u,o,s),u}function Kk(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function Qk(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return pw()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var g8=new RegExp(`^(\\d+)*(${fM}|${dM})*(.*)`);var Yk=()=>null;function eT(t,e){return Yk(t,e)}var AD=class{},wl=class{},Qp=class{resolveComponentFactory(e){throw new j(917,!1)}},ma=class{static NULL=new Qp},ua=class{},Tl=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>Zk()}return t})();function Zk(){let t=te(),e=Qe(),n=kt(e.index,t);return(nn(n)?n:t)[De]}var ND=(()=>{class t{static \u0275prov=J({token:t,providedIn:"root",factory:()=>null})}return t})();var Ju={},Yp=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Ju,r);return i!==Ju||n===Ju?i:this.parentInjector.get(e,n,r)}};function tT(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=xh(i,c);else if(o==2){let u=c,l=e[++s];r=xh(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function $e(t,e=0){let n=te();if(n===null)return _e(t,e);let r=Qe();return NT(r,n,We(t),e)}function Jk(){let t="invalid";throw new Error(t)}function RD(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[c,u,l]=f.resolveHostDirectives(s);break}tx(t,e,n,c,o,u,l)}o!==null&&r!==null&&Xk(n,r,o)}function Xk(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function ex(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function tx(t,e,n,r,i,o,s){let c=r.length,u=!1;for(let g=0;g<c;g++){let y=r[g];!u&&rn(y)&&(u=!0,ex(t,n,g)),Vp(rl(n,e),t,y.type)}ax(n,t.data.length,c);for(let g=0;g<c;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=tD(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let g=0;g<c;g++){let y=r[g];if(n.mergedAttrs=ia(n.mergedAttrs,y.hostAttrs),rx(t,n,e,p,y),sx(p,y,i),s!==null&&s.has(y)){let[R,N]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,N+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!f&&(C.ngOnChanges||C.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}nx(t,n,o)}function nx(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))nT(0,e,i,r),nT(1,e,i,r),iT(e,r,!1);else{let o=n.get(i);rT(0,e,o,r),rT(1,e,o,r),iT(e,r,!0)}}}function nT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),PD(e,o)}}function rT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),PD(e,s)}}function PD(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function iT(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||pg(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function rx(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=ir(i.type,!0)),s=new gi(o,rn(i),$e,null);t.blueprint[r]=s,n[r]=s,ix(t,e,r,tD(t,n,i.hostVars,ht),i)}function ix(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;ox(s)!=c&&s.push(c),s.push(n,r,o)}}function ox(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function sx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;rn(e)&&(n[""]=t)}}function ax(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function MD(t,e,n,r,i,o,s,c){let u=e[q],l=u.consts,f=Js(l,s),p=Ng(u,t,n,r,f);return o&&RD(u,e,p,Js(l,c),i),p.mergedAttrs=ia(p.mergedAttrs,p.attrs),p.attrs!==null&&tT(p,p.attrs,!1),p.mergedAttrs!==null&&tT(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function kD(t,e){ET(t,e),tp(e)&&t.queries.elementEnd(e)}function Rg(t){return OD(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function xD(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function OD(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Pg(t,e,n){return t[e]=n}function cx(t,e){return t[e]}function sn(t,e,n){if(n===ht)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Mg(t,e,n,r){let i=sn(t,e,n);return sn(t,e+1,r)||i}function ux(t,e,n,r,i){let o=Mg(t,e,n,r);return sn(t,e+2,i)||o}function Np(t,e,n){return function r(i){let o=fr(t)?kt(t.index,e):e;Ag(o,5);let s=e[rt],c=oT(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=oT(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function oT(t,e,n,r){let i=X(null);try{return pe(6,e,n),n(r)!==!1}catch(o){return Sk(t,o),!1}finally{pe(7,e,n),X(i)}}function lx(t,e,n,r,i,o,s,c){let u=Zs(t),l=!1,f=null;if(!r&&u&&(f=fx(e,n,o,t.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=$t(t,n),g=r?r(p):p;gM(n,g,o,c);let y=i.listen(g,o,c);if(!dx(o)){let C=r?R=>r(Mt(R[t.index])):t.index;FD(C,e,n,o,c,y,!1)}}return l}function dx(t){return t.startsWith("animation")||t.startsWith("transition")}function fx(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[fo],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function FD(t,e,n,r,i,o,s){let c=e.firstCreatePass?up(e):null,u=cp(n),l=u.length;u.push(i,o),c&&c.push(r,t,l,(l+1)*(s?-1:1))}function sT(t,e,n,r,i,o){let s=e[n],c=e[q],l=c.data[n].outputs[r],p=s[l].subscribe(o);FD(t.index,c,e,i,o,p,!0)}var Zp=Symbol("BINDING");var ll=class extends ma{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Nn(e);return new mi(n,this.ngModule)}};function hx(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&yl.SignalBased)!==0};return i&&(o.transform=i),o})}function px(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function gx(t,e,n){let r=e instanceof mt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Yp(n,r):n}function mx(t){let e=t.get(ua,null);if(e===null)throw new j(407,!1);let n=t.get(ND,null),r=t.get(Sn,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function yx(t,e){let n=LD(t);return ZT(e,n,n==="svg"?np:n==="math"?ow:null)}function LD(t){return(t.selectors[0][0]||"div").toLowerCase()}var mi=class extends wl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=hx(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=px(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=RM(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){pe(22);let c=X(null);try{let u=this.componentDef,l=vx(r,u,s,o),f=gx(u,i||this.ngModule,e),p=mx(f),g=p.rendererFactory.createRenderer(null,u),y=r?hk(g,r,u.encapsulation,f):yx(u,g),C=s?.some(aT)||o?.some(k=>typeof k!="function"&&k.bindings.some(aT)),R=mg(null,l,null,512|eD(u),null,null,p,g,f,null,UT(y,f,!0));R[Ke]=y,Lu(R);let N=null;try{let k=MD(Ke,R,2,"#host",()=>l.directiveRegistry,!0,0);XT(g,y,k),Io(y,R),bg(l,R,k),HT(l,k,R),kD(l,k),n!==void 0&&Ex(k,this.ngContentSelectors,n),N=kt(k.index,R),R[rt]=N[rt],Sg(l,R,null)}catch(k){throw N!==null&&Bp(N),Bp(R),k}finally{pe(23),Vu()}return new dl(this.componentType,R,!!C)}finally{X(c)}}};function vx(t,e,n,r){let i=t?["ng-version","20.3.6"]:PM(e.selectors[0]),o=null,s=null,c=0;if(n)for(let f of n)c+=f[Zp].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let g of p.bindings){c+=g[Zp].requiredVars;let y=f+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,g=Wh(p);u.push(g)}return gg(0,null,_x(o,s),1,c,u,null,null,null,[i],null)}function _x(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function aT(t){let e=t[Zp].kind;return e==="input"||e==="twoWay"}var dl=class extends AD{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Ru(n[q],Ke),this.location=bo(this._tNode,n),this.instance=kt(this._tNode.index,n)[rt],this.hostView=this.changeDetectorRef=new gr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Cg(r,i[q],i,e,n);this.previousInputValues.set(e,n);let s=kt(r.index,i);Ag(s,1)}get injector(){return new pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Ex(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var _i=(()=>{class t{static __NG_ELEMENT_ID__=Ix}return t})();function Ix(){let t=Qe();return jD(t,te())}var wx=_i,VD=class extends wx{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return bo(this._hostTNode,this._hostLView)}get injector(){return new pi(this._hostTNode,this._hostLView)}get parentInjector(){let e=cg(this._hostTNode,this._hostLView);if(TT(e)){let n=tl(e,this._hostLView),r=el(e),i=n[q].data[r+8];return new pi(i,n)}else return new pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=cT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=eT(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,Xw(this._hostTNode,s)),c}createComponent(e,n,r,i,o,s,c){let u=e&&!OP(e),l;if(u)l=n;else{let N=n||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,c=N.bindings}let f=u?e:new mi(Nn(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let k=(u?p:this.parentInjector).get(mt,null);k&&(o=k)}let g=Nn(f.componentType??{}),y=eT(this._lContainer,g?.id??null),C=y?.firstChild??null,R=f.create(p,i,C,o,s,c);return this.insertImpl(R.hostView,l,Xw(this._hostTNode,y)),R}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(aw(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Ue],l=new VD(u,u[Rt],u[Ue]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return qk(s,i,o,r),e.attachToViewContainerRef(),Hh(Rp(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=cT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Kp(this._lContainer,n);r&&(qs(Rp(this._lContainer),n),dD(r[q],r))}detach(e){let n=this._adjustIndex(e,-1),r=Kp(this._lContainer,n);return r&&qs(Rp(this._lContainer),n)!=null?new gr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function cT(t){return t[Ys]}function Rp(t){return t[Ys]||(t[Ys]=[])}function jD(t,e){let n,r=e[t.index];return Ut(r)?n=r:(n=CD(r,e,null,t),e[t.index]=n,yg(e,n)),Dx(n,e,t,r),new VD(n,t,e)}function Tx(t,e){let n=t[De],r=n.createComment(""),i=$t(e,t),o=n.parentNode(i);return sl(n,o,r,n.nextSibling(i),!1),r}var Dx=Sx,bx=()=>!1;function Cx(t,e,n){return bx(t,e,n)}function Sx(t,e,n,r){if(t[dr])return;let i;n.type&8?i=Mt(r):i=Tx(e,n),t[dr]=i}var Jp=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Xp=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),c=this.queries[s.indexInDeclarationView];i.push(c.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)kg(e,n).matches!==null&&this.queries[n].setDirty()}},eg=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=Ox(e):this.predicate=e}},tg=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},ng=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,Ax(n,o)),this.matchTNodeWithReadOption(e,n,Zu(n,e,o,!1,!1))}else r===mr?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Zu(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===kn||i===_i||i===mr&&n.type&4)this.addMatch(n.index,-2);else{let o=Zu(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function Ax(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function Nx(t,e){return t.type&11?bo(t,e):t.type&4?Il(t,e):null}function Rx(t,e,n,r){return n===-1?Nx(e,t):n===-2?Px(t,e,r):oa(t,t[q],n,e)}function Px(t,e,n){if(n===kn)return bo(e,t);if(n===mr)return Il(e,t);if(n===_i)return jD(e,t)}function BD(t,e,n,r){let i=e[tn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,c=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)c.push(null);else{let f=o[l];c.push(Rx(e,f,s[u+1],n.metadata.read))}}i.matches=c}return i.matches}function rg(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=BD(t,e,i,n);for(let c=0;c<o.length;c+=2){let u=o[c];if(u>0)r.push(s[c/2]);else{let l=o[c+1],f=e[-u];for(let p=ft;p<f.length;p++){let g=f[p];g[lr]===g[Ue]&&rg(g[q],g,l,r)}if(f[li]!==null){let p=f[li];for(let g=0;g<p.length;g++){let y=p[g];rg(y[q],y,l,r)}}}}}return r}function Mx(t,e){return t[tn].queries[e].queryList}function kx(t,e,n){let r=new il((n&4)===4);return lw(t,e,r,r.destroy),(e[tn]??=new Xp).queries.push(new Jp(r))-1}function xx(t,e,n,r){let i=it();if(i.firstCreatePass){let o=Qe();Fx(i,new eg(e,n,r),o.index),Lx(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return kx(i,te(),n)}function Ox(t){return t.split(",").map(e=>e.trim())}function Fx(t,e,n){t.queries===null&&(t.queries=new tg),t.queries.track(new ng(e,n))}function Lx(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function kg(t,e){return t.queries.getByIndex(e)}function Vx(t,e){let n=t[q],r=kg(n,e);return r.crossesNgTemplate?rg(n,t,e,[]):BD(n,t,r,e)}function UD(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(c=>Bx(i,c)))}return o}return fl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let c=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=c,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,f=i.styleUrls;i.styleUrls.forEach((p,g)=>{c.push(""),s.push(r(p).then(y=>{c[l+g]=y,f.splice(f.indexOf(p),1),f.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{c.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>Ux(o));e.push(u)}),$D(),Promise.all(e).then(()=>{})}var fl=new Map,jx=new Set;function $D(){let t=fl;return fl=new Map,t}function HD(){return fl.size===0}function Bx(t,e){return typeof e=="string"?e:e.status!==void 0&&e.status!==200?Promise.reject(new j(918,!1)):e.text()}function Ux(t){jx.delete(t)}var yi=class{},qD=class{};var la=class extends yi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ll(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Gh(e);this._bootstrapComponents=QT(o.bootstrap),this._r3Injector=_p(e,n,[{provide:yi,useValue:this},{provide:ma,useValue:this.componentFactoryResolver},...r],Cn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},da=class extends qD{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new la(this.moduleType,e,[])}};function zD(t,e,n){return new la(t,e,n,!1)}var hl=class extends yi{injector;componentFactoryResolver=new ll(this);instance=null;constructor(e){super();let n=new ri([...e.providers,{provide:yi,useValue:this},{provide:ma,useValue:this.componentFactoryResolver}],e.parent||zs(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function GD(t,e,n=null){return new hl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var $x=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Kh(!1,n.type),i=r.length>0?GD([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=J({token:t,providedIn:"environment",factory:()=>new t(_e(mt))})}return t})();function Hx(t){return Do(()=>{let e=WD(t),n=Re(me({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===lg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get($x).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||wo.Emulated,styles:t.styles||wt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&_l("NgStandalone"),KD(n);let r=t.dependencies;return n.directiveDefs=uT(r,qx),n.pipeDefs=uT(r,XI),n.id=Wx(n),n})}function qx(t){return Nn(t)||Wh(t)}function Co(t){return Do(()=>({type:t.type,bootstrap:t.bootstrap||wt,declarations:t.declarations||wt,imports:t.imports||wt,exports:t.exports||wt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function zx(t,e){if(t==null)return ar;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=yl.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function Gx(t){if(t==null)return ar;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function So(t){return Do(()=>{let e=WD(t);return KD(e),e})}function Ei(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function WD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ar,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||wt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:zx(t.inputs,e),outputs:Gx(t.outputs),debugInfo:null}}function KD(t){t.features?.forEach(e=>e(t))}function uT(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function Wx(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Kx(t){return Object.getPrototypeOf(t.prototype).constructor}function QD(t){let e=Kx(t.type),n=!0,r=[t];for(;e;){let i;if(rn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Pp(t.inputs),s.declaredInputs=Pp(t.declaredInputs),s.outputs=Pp(t.outputs);let c=i.hostBindings;c&&Xx(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&Zx(t,u),l&&Jx(t,l),Qx(t,i),HI(t.outputs,i.outputs),rn(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(t),c===QD&&(n=!1)}}e=Object.getPrototypeOf(e)}Yx(r)}function Qx(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function Yx(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ia(i.hostAttrs,n=ia(n,i.hostAttrs))}}function Pp(t){return t===ar?{}:t===wt?[]:t}function Zx(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Jx(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function Xx(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function eO(t,e,n,r,i,o,s,c){if(n.firstCreatePass){t.mergedAttrs=ia(t.mergedAttrs,t.attrs);let f=t.tView=gg(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),mo(t,!1);let u=nO(n,e,t,r);Bu()&&Tg(n,e,u,t),Io(u,e);let l=CD(u,e,u,t);e[r+Ke]=l,yg(e,l),Cx(l,t,e)}function tO(t,e,n,r,i,o,s,c,u,l,f){let p=n+Ke,g;return e.firstCreatePass?(g=Ng(e,p,4,s||null,c||null),lp()&&RD(e,t,g,Js(e.consts,l),mD),ET(e,g)):g=e.data[p],eO(g,t,e,n,r,i,o,u),Zs(g)&&bg(e,t,g),l!=null&&pD(t,g,f),g}function YD(t,e,n,r,i,o,s,c){let u=te(),l=it(),f=Js(l.consts,o);return tO(u,l,t,e,n,r,i,f,void 0,s,c),YD}var nO=rO;function rO(t,e,n,r){return Uu(!0),e[De].createComment("")}var iO=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var ZD=new $(""),JD=new $(""),oO=(()=>{class t{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(n,r,i){this._ngZone=n,this.registry=r,Jh()&&(this._destroyRef=F(hi,{optional:!0})??void 0),xg||(eb(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let n=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{n.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(n)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n()},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static \u0275fac=function(r){return new(r||t)(_e(ge),_e(XD),_e(JD))};static \u0275prov=J({token:t,factory:t.\u0275fac})}return t})(),XD=(()=>{class t{_applications=new Map;registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return xg?.findTestabilityInTree(this,n,r)??null}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function eb(t){xg=t}var xg;function ya(t){return!!t&&typeof t.then=="function"}function Dl(t){return!!t&&typeof t.subscribe=="function"}var Og=new $("");function sO(t){return Rn([{provide:Og,multi:!0,useValue:t}])}var Fg=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=F(Og,{optional:!0})??[];injector=F(Ve);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=cr(this.injector,i);if(ya(o))n.push(o);else if(Dl(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tb=new $("");function nb(){vh(()=>{let t="";throw new j(600,t)})}function rb(t){return t.isBoundToModule}var aO=10;function Lg(t,e){return Array.isArray(e)?e.reduce(Lg,t):me(me({},t),e)}var Ii=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=F(Ht);afterRenderManager=F(Ig);zonelessEnabled=F(Hu);rootEffectScheduler=F(bp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Be;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=F(pr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(lt(n=>!n))}constructor(){F(ga,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=F(mt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ve.NULL){return this._injector.get(ge).run(()=>{pe(10);let s=n instanceof wl;if(!this._injector.get(Fg).done){let C="";throw new j(405,C)}let u;s?u=n:u=this._injector.get(ma).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=rb(u)?void 0:this._injector.get(yi),f=r||u.selector,p=u.create(i,[],f,l),g=p.location.nativeElement,y=p.injector.get(ZD,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),ra(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),pe(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){pe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(vl.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let n=X(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,X(n),this.afterTick.next(),pe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ua,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<aO;)pe(14),this.synchronizeOnce(),pe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Xs(i))continue;let o=r&&!this.zonelessEnabled?0:1;wD(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Xs(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ra(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(tb,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ra(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ra(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function ib(t,e,n,r){let i=te(),o=yo();if(sn(i,o,e)){let s=it(),c=ju();wk(c,i,t,e,n,r)}return ib}var w8=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function ob(t,e,n){let r=te(),i=yo();if(sn(r,i,e)){let o=it(),s=ju();gD(s,r,t,e,r[De],n)}return ob}function lT(t,e,n,r,i){Cg(e,t,n,i?"class":"style",r)}function Vg(t,e,n,r){let i=te(),o=i[q],s=t+Ke,c=o.firstCreatePass?MD(s,i,2,e,mD,lp(),n,r):o.data[s];if(bk(c,i,t,e,cO),Zs(c)){let u=i[q];bg(u,i,c),HT(u,c,i)}return r!=null&&pD(i,c),Vg}function jg(){let t=it(),e=Qe(),n=Ck(e);return t.firstCreatePass&&kD(t,n),gw(n)&&mw(),hw(),n.classesWithoutHost!=null&&UP(n)&&lT(t,n,te(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&$P(n)&&lT(t,n,te(),n.stylesWithoutHost,!1),jg}function sb(t,e,n,r){return Vg(t,e,n,r),jg(),sb}var cO=(t,e,n,r,i)=>(Uu(!0),ZT(e[De],r,kw()));function uO(){return te()}var Gu=void 0;function lO(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var dO=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gu,"{1} 'at' {0}",Gu],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",lO],Mp={};function yt(t){let e=fO(t),n=dT(e);if(n)return n;let r=e.split("-")[0];if(n=dT(r),n)return n;if(r==="en")return dO;throw new j(701,!1)}function dT(t){return t in Mp||(Mp[t]=An.ng&&An.ng.common&&An.ng.common.locales&&An.ng.common.locales[t]),Mp[t]}var be=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(be||{});function fO(t){return t.toLowerCase().replace(/_/g,"-")}var va="en-US";var hO=va;function ab(t){typeof t=="string"&&(hO=t.toLowerCase().replace(/_/g,"-"))}function cb(t,e,n){let r=te(),i=it(),o=Qe();return ub(i,r,r[De],o,t,e,n),cb}function ub(t,e,n,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=Np(r,e,o),lx(r,t,e,s,n,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let g=f[p],y=f[p+1];u??=Np(r,e,o),sT(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Np(r,e,o),sT(r,e,p,i,i,u)}}function pO(t=1){return Rw(t)}function gO(t,e,n,r){xx(t,e,n,r)}function mO(t){let e=te(),n=it(),r=mp();Fu(r+1);let i=kg(n,r);if(t.dirty&&sw(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=Vx(e,r);t.reset(o,tM),t.notifyOnChanges()}return!0}return!1}function yO(){return Mx(te(),mp())}function vO(t){let e=Iw();return Pu(e,Ke+t)}function Wu(t,e){return t<<17|e<<2}function vi(t){return t>>17&32767}function _O(t){return(t&2)==2}function EO(t,e){return t&131071|e<<17}function ig(t){return t|2}function To(t){return(t&131068)>>2}function kp(t,e){return t&-131069|e<<2}function IO(t){return(t&1)===1}function og(t){return t|1}function wO(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=vi(s),u=To(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||lo(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let g=vi(t[c+1]);t[r+1]=Wu(g,c),g!==0&&(t[g+1]=kp(t[g+1],r)),t[c+1]=EO(t[c+1],r)}else t[r+1]=Wu(c,0),c!==0&&(t[c+1]=kp(t[c+1],r)),c=r;else t[r+1]=Wu(u,0),c===0?c=r:t[u+1]=kp(t[u+1],r),u=r;l&&(t[r+1]=ig(t[r+1])),fT(t,f,r,!0),fT(t,f,r,!1),TO(e,f,t,r,o),s=Wu(c,u),o?e.classBindings=s:e.styleBindings=s}function TO(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&lo(o,e)>=0&&(n[r+1]=og(n[r+1]))}function fT(t,e,n,r){let i=t[n+1],o=e===null,s=r?vi(i):To(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];DO(u,e)&&(c=!0,t[s+1]=r?og(l):ig(l)),s=r?vi(l):To(l)}c&&(t[n+1]=r?ig(i):og(i))}function DO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?lo(t,e)>=0:!1}function lb(t,e,n){return fb(t,e,n,!1),lb}function db(t,e){return fb(t,e,null,!0),db}function fb(t,e,n,r){let i=te(),o=it(),s=xu(2);if(o.firstUpdatePass&&CO(o,t,s,r),e!==ht&&sn(i,s,e)){let c=o.data[Pn()];PO(o,c,i,i[De],t,i[s+1]=MO(e,n),r,s)}}function bO(t,e){return e>=t.expandoStartIndex}function CO(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Pn()],s=bO(t,n);kO(o,r)&&e===null&&!s&&(e=!1),e=SO(i,o,e,r),wO(i,o,e,n,s,r)}}function SO(t,e,n,r){let i=Cw(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=xp(null,t,e,n,r),n=fa(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=xp(i,t,e,n,r),o===null){let u=AO(t,e,r);u!==void 0&&Array.isArray(u)&&(u=xp(null,t,e,u[1],r),u=fa(u,e.attrs,r),NO(t,e,r,u))}else o=RO(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function AO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(To(r)!==0)return t[vi(r)]}function NO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[vi(i)]=r}function RO(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=fa(r,s,n)}return fa(r,e.attrs,n)}function xp(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=fa(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function fa(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),JI(t,s,n?!0:e[++o]))}return t===void 0?null:t}function PO(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],f=IO(l)?hT(u,e,n,i,To(l),s):void 0;if(!pl(f)){pl(o)||_O(l)&&(o=hT(u,null,n,i,c,s));let p=rp(Pn(),n);fk(r,s,p,i,o)}}function hT(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,g=n[i+1];g===ht&&(g=p?wt:void 0);let y=p?Au(g,r):f===r?g:void 0;if(l&&!pl(y)&&(y=Au(u,r)),pl(y)&&(c=y,s))return c;let C=t[i+1];i=s?vi(C):To(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=Au(u,r))}return c}function pl(t){return t!==void 0}function MO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Cn(pa(t)))),t}function kO(t,e){return(t.flags&(e?8:16))!==0}function xO(t,e=""){let n=te(),r=it(),i=t+Ke,o=r.firstCreatePass?Ng(r,i,1,e,null):r.data[i],s=OO(r,n,o,e,t);n[i]=s,Bu()&&Tg(r,n,s,o),mo(o,!1)}var OO=(t,e,n,r,i)=>(Uu(!0),MM(e[De],r));function FO(t,e,n,r=""){return sn(t,yo(),n)?e+jt(n)+r:ht}function LO(t,e,n,r,i,o=""){let s=gp(),c=Mg(t,s,n,i);return xu(2),c?e+jt(n)+r+jt(i)+o:ht}function VO(t,e,n,r,i,o,s,c=""){let u=gp(),l=ux(t,u,n,i,s);return xu(3),l?e+jt(n)+r+jt(i)+o+jt(s)+c:ht}function hb(t){return Bg("",t),hb}function Bg(t,e,n){let r=te(),i=FO(r,t,e,n);return i!==ht&&Ug(r,Pn(),i),Bg}function pb(t,e,n,r,i){let o=te(),s=LO(o,t,e,n,r,i);return s!==ht&&Ug(o,Pn(),s),pb}function gb(t,e,n,r,i,o,s){let c=te(),u=VO(c,t,e,n,r,i,o,s);return u!==ht&&Ug(c,Pn(),u),gb}function Ug(t,e,n){let r=rp(e,t);kM(t[De],r,n)}function mb(t,e,n){wp(e)&&(e=e());let r=te(),i=yo();if(sn(r,i,e)){let o=it(),s=ju();gD(s,r,t,e,r[De],n)}return mb}function jO(t,e){let n=wp(t);return n&&t.set(e),n}function yb(t,e){let n=te(),r=it(),i=Qe();return ub(r,n,n[De],i,t,e),yb}function BO(t){return sn(te(),yo(),t)?jt(t):ht}function UO(t,e,n){let r=it();if(r.firstCreatePass){let i=rn(t);sg(n,r.data,r.blueprint,i,!0),sg(e,r.data,r.blueprint,i,!1)}}function sg(t,e,n,r,i){if(t=We(t),Array.isArray(t))for(let o=0;o<t.length;o++)sg(t[o],e,n,r,i);else{let o=it(),s=te(),c=Qe(),u=ni(t)?t:We(t.provide),l=Zh(t),f=c.providerIndexes&1048575,p=c.directiveStart,g=c.providerIndexes>>20;if(ni(t)||!t.multi){let y=new gi(l,i,$e,null),C=Fp(u,e,i?f:f+g,p);C===-1?(Vp(rl(c,s),o,u),Op(o,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(y),s.push(y)):(n[C]=y,s[C]=y)}else{let y=Fp(u,e,f+g,p),C=Fp(u,e,f,f+g),R=y>=0&&n[y],N=C>=0&&n[C];if(i&&!N||!i&&!R){Vp(rl(c,s),o,u);let k=qO(i?HO:$O,n.length,i,r,l,t);!i&&N&&(n[C].providerFactory=k),Op(o,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=vb(n[i?C:y],l,!i&&r);Op(o,t,y>-1?y:C,k)}!i&&r&&N&&n[C].componentProviders++}}}function Op(t,e,n,r){let i=ni(e),o=rw(e);if(i||o){let u=(o?We(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(n);f===-1?l.push(n,[r,u]):l[f+1].push(r,u)}else l.push(n,u)}}}function vb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Fp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function $O(t,e,n,r,i){return ag(this.multi,[])}function HO(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,u=oa(r,r[q],this.providerFactory.index,i);s=u.slice(0,c),ag(o,s);for(let l=c;l<u.length;l++)s.push(u[l])}else s=[],ag(o,s);return s}function ag(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function qO(t,e,n,r,i,o){let s=new gi(t,n,$e,null);return s.multi=[],s.index=e,s.componentProviders=0,vb(s,i,r&&!n),s}function zO(t,e=[]){return n=>{n.providersResolver=(r,i)=>UO(r,i?i(t):t,e)}}function GO(t,e,n){let r=ea()+t,i=te();return i[r]===ht?Pg(i,r,n?e.call(n):e()):cx(i,r)}function WO(t,e,n,r){return Eb(te(),ea(),t,e,n,r)}function _b(t,e){let n=t[e];return n===ht?void 0:n}function Eb(t,e,n,r,i,o){let s=e+n;return sn(t,s,i)?Pg(t,s+1,o?r.call(o,i):r(i)):_b(t,s+1)}function KO(t,e,n,r,i,o,s){let c=e+n;return Mg(t,c,i,o)?Pg(t,c+2,s?r.call(s,i,o):r(i,o)):_b(t,c+2)}function QO(t,e){let n=it(),r,i=t+Ke;n.firstCreatePass?(r=YO(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=ir(r.type,!0)),s,c=dt($e);try{let u=nl(!1),l=o();return nl(u),ip(n,te(),i,l),l}finally{dt(c)}}function YO(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function ZO(t,e,n){let r=t+Ke,i=te(),o=Pu(i,r);return Ib(i,r)?Eb(i,ea(),e,o.transform,n,o):o.transform(n)}function JO(t,e,n,r){let i=t+Ke,o=te(),s=Pu(o,i);return Ib(o,i)?KO(o,ea(),e,s.transform,n,r,s):s.transform(n,r)}function Ib(t,e){return t[q].data[e].pure}function XO(t,e){return Il(t,e)}var Ku=null;function wb(t){Ku!==null&&(t.defaultEncapsulation!==Ku.defaultEncapsulation||t.preserveWhitespaces!==Ku.preserveWhitespaces)||(Ku=t)}var gl=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},e1=(()=>{class t{compileModuleSync(n){return new da(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Gh(n),o=QT(i.declarations).reduce((s,c)=>{let u=Nn(c);return u&&s.push(new mi(u)),s},[]);return new gl(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Tb=new $("");var t1=(()=>{class t{zone=F(ge);changeDetectionScheduler=F(Sn);applicationRef=F(Ii);applicationErrorHandler=F(Ht);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Db({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ge(Re(me({},$g()),{scheduleInRootZone:n})),[{provide:ge,useFactory:t},{provide:si,multi:!0,useFactory:()=>{let r=F(t1,{optional:!0});return()=>r.initialize()}},{provide:si,multi:!0,useFactory:()=>{let r=F(n1);return()=>{r.initialize()}}},e===!0?{provide:Tp,useValue:!0}:[],{provide:Dp,useValue:n??rD},{provide:Ht,useFactory:()=>{let r=F(ge),i=F(mt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(sr),o.handleError(s))})}}}]}function $g(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var n1=(()=>{class t{subscription=new Pe;initialized=!1;zone=F(ge);pendingTasks=F(pr);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var bb=(()=>{class t{applicationErrorHandler=F(Ht);appRef=F(Ii);taskService=F(pr);ngZone=F(ge);zonelessEnabled=F(Hu);tracing=F(ga,{optional:!0});disableScheduling=F(Tp,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(cl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(Dp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof aa||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Ww:iD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(cl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ww(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function r1(){return typeof $localize<"u"&&$localize.locale||va}var Ao=new $("",{providedIn:"root",factory:()=>F(Ao,{optional:!0,skipSelf:!0})||r1()});function bl(t){return BI(t)}function i1(t,e){return vu(t,e?.equal)}var Cb=class{[nt];constructor(e){this[nt]=e}destroy(){this[nt].destroy()}};var xb=Symbol("InputSignalNode#UNSET"),f1=Re(me({},_u),{transformFn:void 0,applyValueToInputSignal(t,e){ao(t,e)}});function Ob(t,e){let n=Object.create(f1);n.value=t,n.transformFn=e?.transform;function r(){if(io(n),n.value===xb){let i=null;throw new j(-950,i)}return n.value}return r[nt]=n,r}var Sb=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>ug(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},h1=new $("");h1.__NG_ELEMENT_ID__=t=>{let e=Qe();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new j(204,!1)};function Ab(t,e){return Ob(t,e)}function p1(t){return Ob(xb,t)}var kQ=(Ab.required=p1,Ab);function g1(t,e,n){let r=new da(n);return Promise.resolve(r)}function Nb(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var Cl=new $(""),m1=new $("");function _a(t){return!t.moduleRef}function y1(t){let e=_a(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ge);return n.run(()=>{_a(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Ht),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),_a(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Cl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Cl);s.add(o),t.moduleRef.onDestroy(()=>{ra(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return _1(r,n,()=>{let o=e.get(pr),s=o.add(),c=e.get(Fg);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(Ao,va);if(ab(u||va),!e.get(m1,!0))return _a(t)?e.get(Ii):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(_a(t)){let f=e.get(Ii);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return Fb?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var Fb;function Rb(){Fb=v1}function v1(t,e){let n=t.injector.get(Ii);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new j(-403,!1);e.push(t)}function _1(t,e,n){try{let r=n();return ya(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Lb=(()=>{class t{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(n){this._injector=n}bootstrapModuleFactory(n,r){let i=r?.scheduleInRootZone,o=()=>sD(r?.ngZone,Re(me({},$g({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,c=[Db({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Sn,useExisting:bb},Ow],u=zD(n.moduleType,this.injector,c);return Rb(),y1({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(n,r=[]){let i=Lg({},r);return Rb(),g1(this.injector,i,n).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new j(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let n=this._injector.get(Cl,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||t)(_e(Ve))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Wg=null;function E1(t){if(Kg())throw new j(400,!1);nb(),Wg=t;let e=t.get(Lb);return D1(t),e}function I1(t,e,n=[]){let r=`Platform: ${e}`,i=new $(r);return(o=[])=>{let s=Kg();if(!s){let c=[...n,...o,{provide:i,useValue:!0}];s=t?.(c)??E1(w1(c,r))}return T1(i)}}function w1(t=[],e){return Ve.create({name:e,providers:[{provide:Yh,useValue:"platform"},{provide:Cl,useValue:new Set([()=>Wg=null])},...t]})}function T1(t){let e=Kg();if(!e)throw new j(-401,!1);return e}function Kg(){return Wg?.get(Lb)??null}function D1(t){let e=t.get(VT,null);cr(t,()=>{e?.forEach(n=>n())})}function Qg(){return!1}var Ea=(()=>{class t{static __NG_ELEMENT_ID__=b1}return t})();function b1(t){return C1(Qe(),te(),(t&16)===16)}function C1(t,e,n){if(fr(t)&&!n){let r=kt(t.index,e);return new gr(r,r)}else if(t.type&175){let r=e[Pt];return new gr(r,e)}return null}var Hg=class{constructor(){}supports(e){return Rg(e)}create(e){return new qg(e)}},S1=(t,e)=>e,qg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||S1}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Pb(r,i,o)?n:r,c=Pb(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=c-i,f=u-i;if(l!=f){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,C=y+g;f<=C&&C<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=f-l}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Rg(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,c),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,c)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,xD(e,c=>{s=this._trackByFn(i,c),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,c,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,s,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new zg(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Sl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Sl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},zg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Gg=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Sl=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Gg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Pb(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Mb(){return new Yg([new Hg])}var Yg=(()=>{class t{factories;static \u0275prov=J({token:t,providedIn:"root",factory:Mb});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=F(t,{optional:!0,skipSelf:!0});return t.create(n,r||Mb())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new j(901,!1)}}return t})();var xQ=I1(null,"core",[]),OQ=(()=>{class t{constructor(n){}static \u0275fac=function(r){return new(r||t)(_e(Ii))};static \u0275mod=Co({type:t});static \u0275inj=ii({})}return t})();function A1(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function FQ(t){let e=Nn(t);if(!e)return null;let n=new mi(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Bb=null;function Nl(){return Bb}function N1(t){Bb??=t}var Zg=class{},Ia=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:()=>F(Ub),providedIn:"platform"})}return t})(),R1=new $(""),Ub=(()=>{class t extends Ia{_location;_history;_doc=F(fi);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nl().getBaseHref(this._doc)}onPopState(n){let r=Nl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Nl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Rl(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function Vb(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function zt(t){return t&&t[0]!=="?"?`?${t}`:t}var No=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:()=>F($b),providedIn:"root"})}return t})(),Pl=new $(""),$b=(()=>{class t extends No{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(fi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Rl(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+zt(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+zt(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+zt(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(_e(Ia),_e(Pl,8))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Hb=(()=>{class t{_subject=new Be;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=k1(Vb(jb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+zt(r))}normalize(n){return t.stripTrailingSlash(M1(this._basePath,jb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+zt(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+zt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=zt;static joinWithSlash=Rl;static stripTrailingSlash=Vb;static \u0275fac=function(r){return new(r||t)(_e(No))};static \u0275prov=J({token:t,factory:()=>P1(),providedIn:"root"})}return t})();function P1(){return new Hb(_e(No))}function M1(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function jb(t){return t.replace(/\/index.html$/,"")}function k1(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var x1=(()=>{class t extends No{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Rl(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+zt(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+zt(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(_e(Ia),_e(Pl,8))};static \u0275prov=J({token:t,factory:t.\u0275fac})}return t})();var sm=(function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t})(sm||{});var ot=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(ot||{}),fe=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(fe||{}),vt=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(vt||{}),_t={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Qb(t){return yt(t)[be.LocaleId]}function Yb(t,e,n){let r=yt(t),i=[r[be.DayPeriodsFormat],r[be.DayPeriodsStandalone]],o=xt(i,e);return xt(o,n)}function Zb(t,e,n){let r=yt(t),i=[r[be.DaysFormat],r[be.DaysStandalone]],o=xt(i,e);return xt(o,n)}function Jb(t,e,n){let r=yt(t),i=[r[be.MonthsFormat],r[be.MonthsStandalone]],o=xt(i,e);return xt(o,n)}function Xb(t,e){let r=yt(t)[be.Eras];return xt(r,e)}function wa(t,e){let n=yt(t);return xt(n[be.DateFormat],e)}function Ta(t,e){let n=yt(t);return xt(n[be.TimeFormat],e)}function Da(t,e){let r=yt(t)[be.DateTimeFormat];return xt(r,e)}function an(t,e){let n=yt(t),r=n[be.NumberSymbols][e];if(typeof r>"u"){if(e===_t.CurrencyDecimal)return n[be.NumberSymbols][_t.Decimal];if(e===_t.CurrencyGroup)return n[be.NumberSymbols][_t.Group]}return r}function eC(t,e){return yt(t)[be.NumberFormats][e]}function tC(t){if(!t[be.ExtraData])throw new j(2303,!1)}function nC(t){let e=yt(t);return tC(e),(e[be.ExtraData][2]||[]).map(r=>typeof r=="string"?Jg(r):[Jg(r[0]),Jg(r[1])])}function rC(t,e,n){let r=yt(t);tC(r);let i=[r[be.ExtraData][0],r[be.ExtraData][1]],o=xt(i,e)||[];return xt(o,n)||[]}function xt(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new j(2304,!1)}function Jg(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var O1=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ml={},F1=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function iC(t,e,n,r){let i=z1(t);e=xn(n,e)||e;let s=[],c;for(;e;)if(c=F1.exec(e),c){s=s.concat(c.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=sC(r,u),i=q1(i,r));let l="";return s.forEach(f=>{let p=$1(f);l+=p?p(i,n,u):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Ll(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function xn(t,e){let n=Qb(t);if(Ml[n]??={},Ml[n][e])return Ml[n][e];let r="";switch(e){case"shortDate":r=wa(t,vt.Short);break;case"mediumDate":r=wa(t,vt.Medium);break;case"longDate":r=wa(t,vt.Long);break;case"fullDate":r=wa(t,vt.Full);break;case"shortTime":r=Ta(t,vt.Short);break;case"mediumTime":r=Ta(t,vt.Medium);break;case"longTime":r=Ta(t,vt.Long);break;case"fullTime":r=Ta(t,vt.Full);break;case"short":let i=xn(t,"shortTime"),o=xn(t,"shortDate");r=kl(Da(t,vt.Short),[i,o]);break;case"medium":let s=xn(t,"mediumTime"),c=xn(t,"mediumDate");r=kl(Da(t,vt.Medium),[s,c]);break;case"long":let u=xn(t,"longTime"),l=xn(t,"longDate");r=kl(Da(t,vt.Long),[u,l]);break;case"full":let f=xn(t,"fullTime"),p=xn(t,"fullDate");r=kl(Da(t,vt.Full),[f,p]);break}return r&&(Ml[n][e]=r),r}function kl(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Gt(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function L1(t,e){return Gt(t,3).substring(0,e)}function Me(t,e,n=0,r=!1,i=!1){return function(o,s){let c=V1(t,o);if((n>0||c>-n)&&(c+=n),t===3)c===0&&n===-12&&(c=12);else if(t===6)return L1(c,e);let u=an(s,_t.MinusSign);return Gt(c,e,u,r,i)}}function V1(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new j(2301,!1)}}function ye(t,e,n=ot.Format,r=!1){return function(i,o){return j1(i,o,t,e,n,r)}}function j1(t,e,n,r,i,o){switch(n){case 2:return Jb(e,i,r)[t.getMonth()];case 1:return Zb(e,i,r)[t.getDay()];case 0:let s=t.getHours(),c=t.getMinutes();if(o){let l=nC(e),f=rC(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[y,C]=g,R=s>=y.hours&&c>=y.minutes,N=s<C.hours||s===C.hours&&c<C.minutes;if(y.hours<C.hours){if(R&&N)return!0}else if(R||N)return!0}else if(g.hours===s&&g.minutes===c)return!0;return!1});if(p!==-1)return f[p]}return Yb(e,i,r)[s<12?0:1];case 3:return Xb(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new j(2302,!1)}}function xl(t){return function(e,n,r){let i=-1*r,o=an(n,_t.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+Gt(s,2,o)+Gt(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Gt(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Gt(s,2,o)+":"+Gt(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Gt(s,2,o)+":"+Gt(Math.abs(i%60),2,o);default:throw new j(2310,!1)}}}var B1=0,Fl=4;function U1(t){let e=Ll(t,B1,1).getDay();return Ll(t,0,1+(e<=Fl?Fl:Fl+7)-e)}function oC(t){let e=t.getDay(),n=e===0?-3:Fl-e;return Ll(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Xg(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=oC(n),s=U1(o.getFullYear()),c=o.getTime()-s.getTime();i=1+Math.round(c/6048e5)}return Gt(i,t,an(r,_t.MinusSign))}}function Ol(t,e=!1){return function(n,r){let o=oC(n).getFullYear();return Gt(o,t,an(r,_t.MinusSign),e)}}var em={};function $1(t){if(em[t])return em[t];let e;switch(t){case"G":case"GG":case"GGG":e=ye(3,fe.Abbreviated);break;case"GGGG":e=ye(3,fe.Wide);break;case"GGGGG":e=ye(3,fe.Narrow);break;case"y":e=Me(0,1,0,!1,!0);break;case"yy":e=Me(0,2,0,!0,!0);break;case"yyy":e=Me(0,3,0,!1,!0);break;case"yyyy":e=Me(0,4,0,!1,!0);break;case"Y":e=Ol(1);break;case"YY":e=Ol(2,!0);break;case"YYY":e=Ol(3);break;case"YYYY":e=Ol(4);break;case"M":case"L":e=Me(1,1,1);break;case"MM":case"LL":e=Me(1,2,1);break;case"MMM":e=ye(2,fe.Abbreviated);break;case"MMMM":e=ye(2,fe.Wide);break;case"MMMMM":e=ye(2,fe.Narrow);break;case"LLL":e=ye(2,fe.Abbreviated,ot.Standalone);break;case"LLLL":e=ye(2,fe.Wide,ot.Standalone);break;case"LLLLL":e=ye(2,fe.Narrow,ot.Standalone);break;case"w":e=Xg(1);break;case"ww":e=Xg(2);break;case"W":e=Xg(1,!0);break;case"d":e=Me(2,1);break;case"dd":e=Me(2,2);break;case"c":case"cc":e=Me(7,1);break;case"ccc":e=ye(1,fe.Abbreviated,ot.Standalone);break;case"cccc":e=ye(1,fe.Wide,ot.Standalone);break;case"ccccc":e=ye(1,fe.Narrow,ot.Standalone);break;case"cccccc":e=ye(1,fe.Short,ot.Standalone);break;case"E":case"EE":case"EEE":e=ye(1,fe.Abbreviated);break;case"EEEE":e=ye(1,fe.Wide);break;case"EEEEE":e=ye(1,fe.Narrow);break;case"EEEEEE":e=ye(1,fe.Short);break;case"a":case"aa":case"aaa":e=ye(0,fe.Abbreviated);break;case"aaaa":e=ye(0,fe.Wide);break;case"aaaaa":e=ye(0,fe.Narrow);break;case"b":case"bb":case"bbb":e=ye(0,fe.Abbreviated,ot.Standalone,!0);break;case"bbbb":e=ye(0,fe.Wide,ot.Standalone,!0);break;case"bbbbb":e=ye(0,fe.Narrow,ot.Standalone,!0);break;case"B":case"BB":case"BBB":e=ye(0,fe.Abbreviated,ot.Format,!0);break;case"BBBB":e=ye(0,fe.Wide,ot.Format,!0);break;case"BBBBB":e=ye(0,fe.Narrow,ot.Format,!0);break;case"h":e=Me(3,1,-12);break;case"hh":e=Me(3,2,-12);break;case"H":e=Me(3,1);break;case"HH":e=Me(3,2);break;case"m":e=Me(4,1);break;case"mm":e=Me(4,2);break;case"s":e=Me(5,1);break;case"ss":e=Me(5,2);break;case"S":e=Me(6,1);break;case"SS":e=Me(6,2);break;case"SSS":e=Me(6,3);break;case"Z":case"ZZ":case"ZZZ":e=xl(0);break;case"ZZZZZ":e=xl(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=xl(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=xl(2);break;default:return null}return em[t]=e,e}function sC(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function H1(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function q1(t,e,n){let i=t.getTimezoneOffset(),o=sC(e,i);return H1(t,-1*(o-i))}function z1(t){if(qb(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(c=>+c);return Ll(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(O1))return G1(r)}let e=new Date(t);if(!qb(e))throw new j(2311,!1);return e}function G1(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,c=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,c,u,l),e}function qb(t){return t instanceof Date&&!isNaN(t.valueOf())}var W1=/^(\d+)?\.((\d+)(-(\d+))?)?$/,zb=22,Vl=".",ba="0",K1=";",Q1=",",tm="#";function Y1(t,e,n,r,i,o,s=!1){let c="",u=!1;if(!isFinite(t))c=an(n,_t.Infinity);else{let l=X1(t);s&&(l=J1(l));let f=e.minInt,p=e.minFrac,g=e.maxFrac;if(o){let V=o.match(W1);if(V===null)throw new j(2306,!1);let W=V[1],ce=V[3],je=V[5];W!=null&&(f=nm(W)),ce!=null&&(p=nm(ce)),je!=null?g=nm(je):ce!=null&&p>g&&(g=p)}eF(l,p,g);let y=l.digits,C=l.integerLen,R=l.exponent,N=[];for(u=y.every(V=>!V);C<f;C++)y.unshift(0);for(;C<0;C++)y.unshift(0);C>0?N=y.splice(C,y.length):(N=y,y=[0]);let k=[];for(y.length>=e.lgSize&&k.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)k.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&k.unshift(y.join("")),c=k.join(an(n,r)),N.length&&(c+=an(n,i)+N.join("")),R&&(c+=an(n,_t.Exponential)+"+"+R)}return t<0&&!u?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function aC(t,e,n){let r=eC(e,sm.Decimal),i=Z1(r,an(e,_t.MinusSign));return Y1(t,i,e,_t.Group,_t.Decimal,n)}function Z1(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(K1),i=r[0],o=r[1],s=i.indexOf(Vl)!==-1?i.split(Vl):[i.substring(0,i.lastIndexOf(ba)+1),i.substring(i.lastIndexOf(ba)+1)],c=s[0],u=s[1]||"";n.posPre=c.substring(0,c.indexOf(tm));for(let f=0;f<u.length;f++){let p=u.charAt(f);p===ba?n.minFrac=n.maxFrac=f+1:p===tm?n.maxFrac=f+1:n.posSuf+=p}let l=c.split(Q1);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let f=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(tm);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+f).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function J1(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function X1(t){let e=Math.abs(t)+"",n=0,r,i,o,s,c;for((i=e.indexOf(Vl))>-1&&(e=e.replace(Vl,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===ba;o++);if(o===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===ba;)c--;for(i-=o,r=[],s=0;o<=c;o++,s++)r[s]=Number(e.charAt(o))}return i>zb&&(r=r.splice(0,zb-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function eF(t,e,n){if(e>n)throw new j(2307,!1);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,c=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(c>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+t.integerLen,f=r.reduceRight(function(p,g,y,C){return g=g+p,C[y]=g<10?g:g-10,u&&(C[y]===0&&y>=l?C.pop():u=!1),g>=10?1:0},0);f&&(r.unshift(f),t.integerLen++)}function nm(t){let e=parseInt(t);if(isNaN(e))throw new j(2305,!1);return e}var rm=/\s+/,Gb=[],tF=(()=>{class t{_ngEl;_renderer;initialClasses=Gb;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(rm):Gb}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(rm):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(rm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)($e(kn),$e(Tl))};static \u0275dir=So({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var jl=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},cC=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new jl(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),Wb(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Wb(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)($e(_i),$e(mr),$e(Yg))};static \u0275dir=So({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function Wb(t,e){t.context.$implicit=e.item}var nF=(()=>{class t{_viewContainer;_context=new Bl;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Kb(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Kb(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)($e(_i),$e(mr))};static \u0275dir=So({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Bl=class{$implicit=null;ngIf=null};function Kb(t,e){if(t&&!t.createEmbeddedView)throw new j(2020,!1)}function am(t,e){return new j(2100,!1)}var im=class{createSubscription(e,n,r){return bl(()=>e.subscribe({next:n,error:r}))}dispose(e){bl(()=>e.unsubscribe())}},om=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},rF=new om,iF=new im,oF=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=F(Ht);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(ya(n))return rF;if(Dl(n))return iF;throw am(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)($e(Ea,16))};static \u0275pipe=Ei({name:"async",type:t,pure:!1})}return t})();var sF="mediumDate",uC=new $(""),lC=new $(""),aF=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??sF,c=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return iC(n,s,o||this.locale,c)}catch(s){throw am(t,s.message)}}static \u0275fac=function(r){return new(r||t)($e(Ao,16),$e(uC,24),$e(lC,24))};static \u0275pipe=Ei({name:"date",type:t,pure:!0})}return t})();var cF=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!uF(n))return null;i||=this._locale;try{let o=lF(n);return aC(o,i,r)}catch(o){throw am(t,o.message)}}static \u0275fac=function(r){return new(r||t)($e(Ao,16))};static \u0275pipe=Ei({name:"number",type:t,pure:!0})}return t})();function uF(t){return!(t==null||t===""||t!==t)}function lF(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new j(2309,!1);return t}var dF=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Co({type:t});static \u0275inj=ii({})}return t})();function fF(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var cm=class{};var QY="browser";var YY=(()=>{class t{static \u0275prov=J({token:t,providedIn:"root",factory:()=>new um(F(fi),window)})}return t})(),um=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,n){this.window.scrollTo(Re(me({},n),{left:e[0],top:e[1]}))}scrollToAnchor(e,n){let r=hF(this.document,e);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(uo(2400,!1))}}scrollToElement(e,n){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Re(me({},n),{left:i-s[0],top:o-s[1]}))}};function hF(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Aa=class{},pF=(()=>{class t{handle(n){return n.key}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:t.\u0275fac})}return t})(),Ro=class{},gF=(()=>{class t extends Ro{compile(n,r){return n}compileTranslations(n,r){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ha(t)))(i||t)}})();static \u0275prov=J({token:t,factory:t.\u0275fac})}return t})(),Po=class{},mF=(()=>{class t extends Po{getTranslation(n){return Qr({})}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ha(t)))(i||t)}})();static \u0275prov=J({token:t,factory:t.\u0275fac})}return t})();function Ul(t,e){if(t===e)return!0;if(t===null||e===null)return!1;if(t!==t&&e!==e)return!0;let n=typeof t,r=typeof e,i;if(n==r&&n=="object")if(Array.isArray(t)){if(!Array.isArray(e))return!1;if((i=t.length)==e.length){for(let o=0;o<i;o++)if(!Ul(t[o],e[o]))return!1;return!0}}else{if(Array.isArray(e))return!1;if(On(t)&&On(e)){let o=Object.create(null);for(let s in t){if(!Ul(t[s],e[s]))return!1;o[s]=!0}for(let s in e)if(!(s in o)&&typeof e[s]<"u")return!1;return!0}}return!1}function yr(t){return typeof t<"u"&&t!==null}function dC(t){return t!==void 0}function On(t){return Sa(t)&&!wi(t)&&t!==null}function Sa(t){return typeof t=="object"&&t!==null}function wi(t){return Array.isArray(t)}function $l(t){return typeof t=="string"}function yF(t){return typeof t=="function"}function Hl(t){if(wi(t))return t.map(e=>Hl(e));if(On(t)){let e={};return Object.keys(t).forEach(n=>{e[n]=Hl(t[n])}),e}else return t}function hm(t,e){if(!Sa(t))return Hl(e);let n=Hl(t);return Sa(n)&&Sa(e)&&Object.keys(e).forEach(r=>{On(e[r])?r in t?n[r]=hm(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function hC(t,e){let n=e.split(".");e="";do{e+=n.shift();let r=!n.length;if(yr(t)){if(On(t)&&dC(t[e])&&(On(t[e])||wi(t[e])||r)){t=t[e],e="";continue}if(wi(t)){let i=parseInt(e,10);if(dC(t[i])&&(On(t[i])||wi(t[i])||r)){t=t[i],e="";continue}}}if(r){t=void 0;continue}e+="."}while(n.length);return t}function vF(t,e,n){return hm(t,_F(e,n))}function _F(t,e){return t.split(".").reduceRight((n,r)=>({[r]:n}),e)}var Mo=class{},EF=(()=>{class t extends Mo{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(n,r){if($l(n))return this.interpolateString(n,r);if(yF(n))return this.interpolateFunction(n,r)}interpolateFunction(n,r){return n(r)}interpolateString(n,r){return r?n.replace(this.templateMatcher,(i,o)=>{let s=this.getInterpolationReplacement(r,o);return s!==void 0?s:i}):n}getInterpolationReplacement(n,r){return this.formatValue(hC(n,r))}formatValue(n){if($l(n))return n;if(typeof n=="number"||typeof n=="boolean")return n.toString();if(n===null)return"null";if(wi(n))return n.join(", ");if(Sa(n))return typeof n.toString=="function"&&n.toString!==Object.prototype.toString?n.toString():JSON.stringify(n)}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ha(t)))(i||t)}})();static \u0275prov=J({token:t,factory:t.\u0275fac})}return t})(),lm=(()=>{class t{_onTranslationChange=new Be;_onLangChange=new Be;_onFallbackLangChange=new Be;fallbackLang=null;currentLang;translations={};languages=[];getTranslations(n){return this.translations[n]}setTranslations(n,r,i){this.translations[n]=i&&this.hasTranslationFor(n)?hm(this.translations[n],r):r,this.addLanguages([n]),this._onTranslationChange.next({lang:n,translations:this.getTranslations(n)})}getLanguages(){return this.languages}getCurrentLang(){return this.currentLang}getFallbackLang(){return this.fallbackLang}setFallbackLang(n,r=!0){this.fallbackLang=n,r&&this._onFallbackLangChange.next({lang:n,translations:this.translations[n]})}setCurrentLang(n,r=!0){this.currentLang=n,r&&this._onLangChange.next({lang:n,translations:this.translations[n]})}get onTranslationChange(){return this._onTranslationChange.asObservable()}get onLangChange(){return this._onLangChange.asObservable()}get onFallbackLangChange(){return this._onFallbackLangChange.asObservable()}addLanguages(n){this.languages=Array.from(new Set([...this.languages,...n]))}hasTranslationFor(n){return typeof this.translations[n]<"u"}deleteTranslations(n){delete this.translations[n]}getTranslation(n){let r=this.getValue(this.currentLang,n);return r===void 0&&this.fallbackLang!=null&&this.fallbackLang!==this.currentLang&&(r=this.getValue(this.fallbackLang,n)),r}getValue(n,r){return hC(this.getTranslations(n),r)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:t.\u0275fac})}return t})(),dm=new $("TRANSLATE_CONFIG"),Ca=t=>rr(t)?t:Qr(t);var fm=(()=>{class t{loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;currentLoader=F(Po);compiler=F(Ro);parser=F(Mo);missingTranslationHandler=F(Aa);store=F(lm);extend=!1;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onFallbackLangChange(){return this.store.onFallbackLangChange}get onDefaultLangChange(){return this.store.onFallbackLangChange}constructor(){let n=me({extend:!1,fallbackLang:null},F(dm,{optional:!0}));n.lang&&this.use(n.lang),n.fallbackLang&&this.setFallbackLang(n.fallbackLang),n.extend&&(this.extend=!0)}setFallbackLang(n){this.getFallbackLang()||this.store.setFallbackLang(n,!1);let r=this.loadOrExtendLanguage(n);return rr(r)?(r.pipe(Dn(1)).subscribe({next:()=>{this.store.setFallbackLang(n)},error:()=>{}}),r):(this.store.setFallbackLang(n),Qr(this.store.getTranslations(n)))}use(n){this.lastUseLanguage=n,this.getCurrentLang()||this.store.setCurrentLang(n,!1);let r=this.loadOrExtendLanguage(n);return rr(r)?(r.pipe(Dn(1)).subscribe({next:()=>{this.changeLang(n)},error:()=>{}}),r):(this.changeLang(n),Qr(this.store.getTranslations(n)))}loadOrExtendLanguage(n){if(!this.store.hasTranslationFor(n)||this.extend)return this._translationRequests[n]=this._translationRequests[n]||this.loadAndCompileTranslations(n),this._translationRequests[n]}changeLang(n){n===this.lastUseLanguage&&this.store.setCurrentLang(n)}getCurrentLang(){return this.store.getCurrentLang()}loadAndCompileTranslations(n){this.pending=!0;let r=this.currentLoader.getTranslation(n).pipe(au(1),Dn(1));return this.loadingTranslations=r.pipe(lt(i=>this.compiler.compileTranslations(i,n)),au(1),Dn(1)),this.loadingTranslations.subscribe({next:i=>{this.store.setTranslations(n,i,this.extend),this.pending=!1},error:i=>{this.pending=!1}}),r}setTranslation(n,r,i=!1){let o=this.compiler.compileTranslations(r,n);this.store.setTranslations(n,o,i||this.extend)}getLangs(){return this.store.getLanguages()}addLangs(n){this.store.addLanguages(n)}getParsedResultForKey(n,r){let i=this.getTextToInterpolate(n);if(yr(i))return this.runInterpolation(i,r);let o=this.missingTranslationHandler.handle(me({key:n,translateService:this},r!==void 0&&{interpolateParams:r}));return o!==void 0?o:n}getFallbackLang(){return this.store.getFallbackLang()}getTextToInterpolate(n){return this.store.getTranslation(n)}runInterpolation(n,r){if(yr(n))return wi(n)?this.runInterpolationOnArray(n,r):On(n)?this.runInterpolationOnDict(n,r):this.parser.interpolate(n,r)}runInterpolationOnArray(n,r){return n.map(i=>this.runInterpolation(i,r))}runInterpolationOnDict(n,r){let i={};for(let o in n){let s=this.runInterpolation(n[o],r);s!==void 0&&(i[o]=s)}return i}getParsedResult(n,r){return n instanceof Array?this.getParsedResultForArray(n,r):this.getParsedResultForKey(n,r)}getParsedResultForArray(n,r){let i={},o=!1;for(let c of n)i[c]=this.getParsedResultForKey(c,r),o=o||rr(i[c]);if(!o)return i;let s=n.map(c=>Ca(i[c]));return uh(s).pipe(lt(c=>{let u={};return c.forEach((l,f)=>{u[n[f]]=l}),u}))}get(n,r){if(!yr(n)||!n.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(lh(()=>Ca(this.getParsedResult(n,r)))):Ca(this.getParsedResult(n,r))}getStreamOnTranslationChange(n,r){if(!yr(n)||!n.length)throw new Error('Parameter "key" is required and cannot be empty');return Jr(ou(()=>this.get(n,r)),this.onTranslationChange.pipe(cu(()=>{let i=this.getParsedResult(n,r);return Ca(i)})))}stream(n,r){if(!yr(n)||!n.length)throw new Error('Parameter "key" required');return Jr(ou(()=>this.get(n,r)),this.onLangChange.pipe(cu(()=>{let i=this.getParsedResult(n,r);return Ca(i)})))}instant(n,r){if(!yr(n)||n.length===0)throw new Error('Parameter "key" is required and cannot be empty');let i=this.getParsedResult(n,r);return rr(i)?Array.isArray(n)?n.reduce((o,s)=>(o[s]=s,o),{}):n:i}set(n,r,i=this.getCurrentLang()){this.store.setTranslations(i,vF(this.store.getTranslations(i),n,$l(r)?this.compiler.compile(r,i):this.compiler.compileTranslations(r,i)),!1)}reloadLang(n){return this.resetLang(n),this.loadAndCompileTranslations(n)}resetLang(n){delete this._translationRequests[n],this.store.deleteTranslations(n)}static getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let n=this.getBrowserCultureLang();return n?n.split(/[-_]/)[0]:void 0}static getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}getBrowserLang(){return t.getBrowserLang()}getBrowserCultureLang(){return t.getBrowserCultureLang()}get defaultLang(){return this.getFallbackLang()}get currentLang(){return this.store.getCurrentLang()}get langs(){return this.store.getLanguages()}setDefaultLang(n){return this.setFallbackLang(n)}getDefaultLang(){return this.getFallbackLang()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:t.\u0275fac})}return t})();var dZ=(()=>{class t{translate=F(fm);_ref=F(Ea);value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onFallbackLangChange;updateValue(n,r,i){let o=s=>{this.value=s!==void 0?s:n,this.lastKey=n,this._ref.markForCheck()};if(i){let s=this.translate.getParsedResult(n,r);rr(s)?s.subscribe(o):o(s)}this.translate.get(n,r).subscribe(o)}transform(n,...r){if(!n||!n.length)return n;if(Ul(n,this.lastKey)&&Ul(r,this.lastParams))return this.value;let i;if(yr(r[0])&&r.length)if($l(r[0])&&r[0].length){let o=r[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{i=JSON.parse(o)}catch(s){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${r[0]}`)}}else On(r[0])&&(i=r[0]);return this.lastKey=n,this.lastParams=r,this.updateValue(n,i),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(o=>{(this.lastKey&&o.lang===this.translate.getCurrentLang()||o.lang===this.translate.getFallbackLang())&&(this.lastKey=null,this.updateValue(n,i,o.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(o=>{this.lastKey&&(this.lastKey=null,this.updateValue(n,i,o.translations))})),this.onFallbackLangChange||(this.onFallbackLangChange=this.translate.onFallbackLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(n,i))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onFallbackLangChange<"u"&&(this.onFallbackLangChange.unsubscribe(),this.onFallbackLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=Ei({name:"translate",type:t,pure:!1});static \u0275prov=J({token:t,factory:t.\u0275fac})}return t})();function IF(t){return{provide:Po,useClass:t}}function wF(t){return{provide:Ro,useClass:t}}function TF(t){return{provide:Mo,useClass:t}}function DF(t){return{provide:Aa,useClass:t}}function fC(t={},e){let n=[];t.loader&&n.push(t.loader),t.compiler&&n.push(t.compiler),t.parser&&n.push(t.parser),t.missingTranslationHandler&&n.push(t.missingTranslationHandler),e&&n.push(lm),(t.useDefaultLang||t.defaultLanguage)&&(console.warn("The `useDefaultLang` and `defaultLanguage` options are deprecated. Please use `fallbackLang` instead."),t.useDefaultLang===!0&&t.defaultLanguage&&(t.fallbackLang=t.defaultLanguage));let r={fallbackLang:t.fallbackLang??null,lang:t.lang,extend:t.extend??!1};return n.push({provide:dm,useValue:r}),n.push({provide:fm,useClass:fm,deps:[lm,Po,Ro,Mo,Aa,dm]}),n}var fZ=(()=>{class t{static forRoot(n={}){return{ngModule:t,providers:[...fC(me({compiler:wF(gF),parser:TF(EF),loader:IF(mF),missingTranslationHandler:DF(pF)},n),!0)]}}static forChild(n={}){return{ngModule:t,providers:[...fC(n,n.isolate??!1)]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Co({type:t});static \u0275inj=ii({})}return t})();var pC=()=>{};var yC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bF=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ql={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|c>>4,g=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[f],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new gm;let g=o<<2|c>>4;if(r.push(g),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},gm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},CF=function(t){let e=yC(t);return ql.encodeByteArray(e,!0)},Ra=function(t){return CF(t).replace(/\./g,"")},zl=function(t){try{return ql.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ym(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var SF=()=>ym().__FIREBASE_DEFAULTS__,AF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&zl(t[1]);return e&&JSON.parse(e)},Gl=()=>{try{return pC()||SF()||AF()||NF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vm=t=>{var e,n;return(n=(e=Gl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vC=t=>{let e=vm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_m=()=>{var t;return(t=Gl())===null||t===void 0?void 0:t.config},Em=t=>{var e;return(e=Gl())===null||e===void 0?void 0:e[`_${t}`]};var Ti=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function vr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function Wl(t){return _(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function _C(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ra(JSON.stringify(n)),Ra(JSON.stringify(s)),""].join(".")}var Na={};function RF(){let t={prod:[],emulator:[]};for(let e of Object.keys(Na))Na[e]?t.emulator.push(e):t.prod.push(e);return t}function PF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var gC=!1;function Kl(t,e){if(typeof window>"u"||typeof document>"u"||!vr(window.location.host)||Na[t]===e||Na[t]||gC)return;Na[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=RF().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{gC=!0,s()},g}function f(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=PF(r),y=n("text"),C=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),N=document.getElementById(R)||document.createElement("a"),k=n("preprendIcon"),V=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let W=g.element;c(W),f(N,R);let ce=l();u(V,k),W.append(V,C,N,ce),document.body.appendChild(W)}o?(C.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function He(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function MF(){var t;let e=(t=Gl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wC(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DC(){let t=He();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bC(){return!MF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pa(){try{return typeof indexedDB=="object"}catch{return!1}}function CC(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var kF="FirebaseError",bt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kF,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}},Wt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?xF(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new bt(i,c,r)}};function xF(t,e){return t.replace(OF,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var OF=/\{\$([^}]+)}/g;function SC(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(mC(o)&&mC(s)){if(!cn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function mC(t){return t!==null&&typeof t=="object"}function Ma(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ko(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function xo(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function AC(t,e){let n=new mm(t,e);return n.subscribe.bind(n)}var mm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");FF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=pm),i.error===void 0&&(i.error=pm),i.complete===void 0&&(i.complete=pm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function FF(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pm(){}var yZ=14400*1e3;function Ce(t){return t&&t._delegate?t._delegate:t}var pt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Di="[DEFAULT]";var Im=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ti;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VF(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function LF(t){return t===Di?void 0:t}function VF(t){return t.instantiationMode==="EAGER"}var Ql=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Im(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var jF=[],ne=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(ne||{}),BF={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},UF=ne.INFO,$F={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},HF=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=$F[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},un=class{constructor(e){this.name=e,this._logLevel=UF,this._logHandler=HF,this._userLogHandler=null,jF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}};var qF=(t,e)=>e.some(n=>t instanceof n),NC,RC;function zF(){return NC||(NC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GF(){return RC||(RC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var PC=new WeakMap,Tm=new WeakMap,MC=new WeakMap,wm=new WeakMap,bm=new WeakMap;function WF(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(ln(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&PC.set(n,t)}).catch(()=>{}),bm.set(e,t),e}function KF(t){if(Tm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Tm.set(t,e)}var Dm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||MC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ln(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kC(t){Dm=t(Dm)}function QF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Yl(this),e,...n);return MC.set(r,e.sort?e.sort():[e]),ln(r)}:GF().includes(t)?function(...e){return t.apply(Yl(this),e),ln(PC.get(this))}:function(...e){return ln(t.apply(Yl(this),e))}}function YF(t){return typeof t=="function"?QF(t):(t instanceof IDBTransaction&&KF(t),qF(t,zF())?new Proxy(t,Dm):t)}function ln(t){if(t instanceof IDBRequest)return WF(t);if(wm.has(t))return wm.get(t);let e=YF(t);return e!==t&&(wm.set(t,e),bm.set(e,t)),e}var Yl=t=>bm.get(t);function OC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=ln(s);return r&&s.addEventListener("upgradeneeded",u=>{r(ln(s.result),u.oldVersion,u.newVersion,ln(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var ZF=["get","getKey","getAll","getAllKeys","count"],JF=["put","add","delete","clear"],Cm=new Map;function xC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cm.get(e))return Cm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=JF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZF.includes(n)))return;let o=function(s,...c){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return Cm.set(e,o),o}kC(t=>Re(me({},t),{get:(e,n,r)=>xC(e,n)||t.get(e,n,r),has:(e,n)=>!!xC(e,n)||t.has(e,n)}));var Am=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XF(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function XF(t){let e=t.getComponent();return e?.type==="VERSION"}var Nm="@firebase/app",FC="0.13.2";var Fn=new un("@firebase/app"),eL="@firebase/app-compat",tL="@firebase/analytics-compat",nL="@firebase/analytics",rL="@firebase/app-check-compat",iL="@firebase/app-check",oL="@firebase/auth",sL="@firebase/auth-compat",aL="@firebase/database",cL="@firebase/data-connect",uL="@firebase/database-compat",lL="@firebase/functions",dL="@firebase/functions-compat",fL="@firebase/installations",hL="@firebase/installations-compat",pL="@firebase/messaging",gL="@firebase/messaging-compat",mL="@firebase/performance",yL="@firebase/performance-compat",vL="@firebase/remote-config",_L="@firebase/remote-config-compat",EL="@firebase/storage",IL="@firebase/storage-compat",wL="@firebase/firestore",TL="@firebase/ai",DL="@firebase/firestore-compat",bL="firebase",CL="11.10.0";var Rm="[DEFAULT]",SL={[Nm]:"fire-core",[eL]:"fire-core-compat",[nL]:"fire-analytics",[tL]:"fire-analytics-compat",[iL]:"fire-app-check",[rL]:"fire-app-check-compat",[oL]:"fire-auth",[sL]:"fire-auth-compat",[aL]:"fire-rtdb",[cL]:"fire-data-connect",[uL]:"fire-rtdb-compat",[lL]:"fire-fn",[dL]:"fire-fn-compat",[fL]:"fire-iid",[hL]:"fire-iid-compat",[pL]:"fire-fcm",[gL]:"fire-fcm-compat",[mL]:"fire-perf",[yL]:"fire-perf-compat",[vL]:"fire-rc",[_L]:"fire-rc-compat",[EL]:"fire-gcs",[IL]:"fire-gcs-compat",[wL]:"fire-fst",[DL]:"fire-fst-compat",[TL]:"fire-vertex","fire-js":"fire-js",[bL]:"fire-js-all"};var ka=new Map,AL=new Map,Pm=new Map;function LC(t,e){try{t.container.addComponent(e)}catch(n){Fn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Kt(t){let e=t.name;if(Pm.has(e))return Fn.debug(`There were multiple attempts to register component ${e}.`),!1;Pm.set(e,t);for(let n of ka.values())LC(n,t);for(let n of AL.values())LC(n,t);return!0}function Oo(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ct(t){return t==null?!1:t.settings!==void 0}var NL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new Wt("app","Firebase",NL);var Mm=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}};var Er=CL;function Om(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Rm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw _r.create("bad-app-name",{appName:String(i)});if(n||(n=_m()),!n)throw _r.create("no-options");let o=ka.get(i);if(o){if(cn(n,o.options)&&cn(r,o.config))return o;throw _r.create("duplicate-app",{appName:i})}let s=new Ql(i);for(let u of Pm.values())s.addComponent(u);let c=new Mm(n,r,s);return ka.set(i,c),c}function Ir(t=Rm){let e=ka.get(t);if(!e&&t===Rm&&_m())return Om();if(!e)throw _r.create("no-app",{appName:t});return e}function Zl(){return Array.from(ka.values())}function Se(t,e,n){var r;let i=(r=SL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fn.warn(c.join(" "));return}Kt(new pt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var RL="firebase-heartbeat-database",PL=1,xa="firebase-heartbeat-store",Sm=null;function UC(){return Sm||(Sm=OC(RL,PL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xa)}catch(n){console.warn(n)}}}}).catch(t=>{throw _r.create("idb-open",{originalErrorMessage:t.message})})),Sm}function ML(t){return _(this,null,function*(){try{let n=(yield UC()).transaction(xa),r=yield n.objectStore(xa).get($C(t));return yield n.done,r}catch(e){if(e instanceof bt)Fn.warn(e.message);else{let n=_r.create("idb-get",{originalErrorMessage:e?.message});Fn.warn(n.message)}}})}function VC(t,e){return _(this,null,function*(){try{let r=(yield UC()).transaction(xa,"readwrite");yield r.objectStore(xa).put(e,$C(t)),yield r.done}catch(n){if(n instanceof bt)Fn.warn(n.message);else{let r=_r.create("idb-set",{originalErrorMessage:n?.message});Fn.warn(r.message)}}})}function $C(t){return`${t.name}!${t.options.appId}`}var kL=1024,xL=30,km=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new xm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=jC();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>xL){let s=FL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fn.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=jC(),{heartbeatsToSend:r,unsentEntries:i}=OL(this._heartbeatsCache.heartbeats),o=Ra(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Fn.warn(n),""}})}};function jC(){return new Date().toISOString().substring(0,10)}function OL(t,e=kL){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),BC(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),BC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var xm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Pa()?CC().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield ML(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return VC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return VC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function BC(t){return Ra(JSON.stringify({version:2,heartbeats:t})).length}function FL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function LL(t){Kt(new pt("platform-logger",e=>new Am(e),"PRIVATE")),Kt(new pt("heartbeat",e=>new km(e),"PRIVATE")),Se(Nm,FC,t),Se(Nm,FC,"esm2017"),Se("fire-js","")}LL("");var VL="firebase",jL="11.10.0";Se(VL,jL,"app");function HC(t){t===void 0&&(t=F(Ve));let e=t.get(vo);return n=>new Y(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var wr=new ei("ANGULARFIRE2_VERSION");function Oa(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Lo=(t,e)=>{let n=e?[e]:Zl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Fo=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(Fo||{}),qC=Qg()&&typeof Zone<"u"?Fo.WARN:Fo.SILENT;var Jl=class{zone;delegate;constructor(e,n=ah){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Tr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=F(ge);this.outsideAngular=n.runOutsideAngular(()=>new Jl(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Jl(typeof Zone>"u"?void 0:Zone.current,sh))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),zC=!1;function BL(t,e){!zC&&(qC>Fo.SILENT||Qg())&&(zC=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),qC>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function UL(t){let e=F(ge,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function bi(t){let e=F(ge,{optional:!0});return e?e.run(()=>t()):t()}var $L=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),cr(n,()=>bi(()=>t.apply(void 0,r)))),Ae=(t,e,n)=>(n||=e?Fo.WARN:Fo.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=F(Tr),s=F(vo),c=F(mt)}catch{return BL(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=bi(()=>s.add())),i[l]=$L(i[l],r,c));let u=UL(()=>t.apply(this,i));return e?u instanceof Y?u.pipe(tr(o.outsideAngular),er(o.insideAngular),HC(c)):u instanceof Promise?bi(()=>{let l=s.add();return new Promise((f,p)=>{u.then(g=>cr(c,()=>bi(()=>f(g))),g=>cr(c,()=>bi(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:bi(()=>u):u instanceof Y?u.pipe(tr(o.outsideAngular),er(o.insideAngular)):bi(()=>u)});var Ln=class{constructor(e){return e}},Ci=class{constructor(){return Zl()}};function HL(t){return t&&t.length===1?t[0]:new Ln(Ir())}var Fm=new $("angularfire2._apps"),qL={provide:Ln,useFactory:HL,deps:[[new Dt,Fm]]},zL={provide:Ci,deps:[[new Dt,Fm]]};function GL(t){return(e,n)=>{let r=n.get(dg);Se("angularfire",wr.full,"core"),Se("angularfire",wr.full,"app"),Se("angular",kh.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Ln(i)}}function dJ(t,...e){return Rn([qL,zL,{provide:Fm,useFactory:GL(t),multi:!0,deps:[ge,Ve,Tr,...e]}])}var fJ=Ae(Ir,!0);var hJ=Ae(Om,!0);var WL=new Map,KL={activated:!1,tokenObservers:[]},QL={initialized:!1,enabled:!1};function Qt(t){return WL.get(t)||Object.assign({},KL)}function QC(){return QL}var YL="https://content-firebaseappcheck.googleapis.com/v1";var ZL="exchangeDebugToken",GC={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},wJ=1440*60*1e3;var jm=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Ti,this.pending.promise.catch(n=>{}),yield JL(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ti,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function JL(t){return new Promise(e=>{setTimeout(e,t)})}var XL={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Dr=new Wt("appCheck","AppCheck",XL);function YC(t){if(!Qt(t).activated)throw Dr.create("use-before-activation",{appName:t.name})}function ZC(r,i){return _(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(y){throw Dr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Dr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Dr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let f=l.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Dr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(f[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function JC(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${YL}/projects/${n}/apps/${r}:${ZL}?key=${i}`,body:{debug_token:e}}}var eV="firebase-app-check-database",tV=1,Bm="firebase-app-check-store";var Xl=null;function nV(){return Xl||(Xl=new Promise((t,e)=>{try{let n=indexedDB.open(eV,tV);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Dr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Bm,{keyPath:"compositeKey"})}}}catch(n){e(Dr.create("storage-open",{originalErrorMessage:n?.message}))}}),Xl)}function rV(t,e){return iV(oV(t),e)}function iV(t,e){return _(this,null,function*(){let r=(yield nV()).transaction(Bm,"readwrite"),o=r.objectStore(Bm).put({compositeKey:t,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;c(Dr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function oV(t){return`${t.options.appId}-${t.name}`}var Fa=new un("@firebase/app-check");function Lm(t,e){return Pa()?rV(t,e).catch(n=>{Fa.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function XC(){return QC().enabled}function eS(){return _(this,null,function*(){let t=QC();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var sV={error:"UNKNOWN_ERROR"};function aV(t){return ql.encodeString(JSON.stringify(t),!1)}function Um(t,e=!1,n=!1){return _(this,null,function*(){let r=t.app;YC(r);let i=Qt(r),o=i.token,s;if(o&&!La(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(La(l)?o=l:yield Lm(r,void 0))}if(!e&&o&&La(o))return{token:o.token};let c=!1;if(XC())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=ZC(JC(r,yield eS()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield Lm(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Fa.warn(l.message):n&&Fa.error(l),Vm(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield Qt(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Fa.warn(l.message):n&&Fa.error(l),s=l}let u;return o?s?La(o)?u={token:o.token,internalError:s}:u=Vm(s):(u={token:o.token},i.token=o,yield Lm(r,o)):u=Vm(s),c&&dV(r,u),u})}function cV(t){return _(this,null,function*(){let e=t.app;YC(e);let{provider:n}=Qt(e);if(XC()){let r=yield eS(),{token:i}=yield ZC(JC(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function uV(t,e,n,r){let{app:i}=t,o=Qt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&La(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),WC(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>WC(t))}function tS(t,e){let n=Qt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function WC(t){let{app:e}=t,n=Qt(e),r=n.tokenRefresher;r||(r=lV(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function lV(t){let{app:e}=t;return new jm(()=>_(null,null,function*(){let n=Qt(e),r;if(n.token?r=yield Um(t,!0):r=yield Um(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Qt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},GC.RETRIAL_MIN_WAIT,GC.RETRIAL_MAX_WAIT)}function dV(t,e){let n=Qt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function La(t){return t.expireTimeMillis-Date.now()>0}function Vm(t){return{token:aV(sV),error:t}}var $m=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Qt(this.app);for(let n of e)tS(this.app,n.next);return Promise.resolve()}};function fV(t,e){return new $m(t,e)}function hV(t){return{getToken:e=>Um(t,e),getLimitedUseToken:()=>cV(t),addTokenListener:e=>uV(t,"INTERNAL",e),removeTokenListener:e=>tS(t.app,e)}}var pV="@firebase/app-check",gV="0.10.1";var mV="app-check",KC="app-check-internal";function yV(){Kt(new pt(mV,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return fV(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(KC).initialize()})),Kt(new pt(KC,t=>{let e=t.getProvider("app-check").getImmediate();return hV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Se(pV,gV)}yV();var vV="app-check";var Vo=class{constructor(){return Lo(vV)}};var _V=["localhost","0.0.0.0","127.0.0.1"],OJ=typeof window<"u"&&_V.includes(window.location.hostname);function vS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var _S=vS,ES=new Wt("auth","Firebase",vS());var od=new un("@firebase/auth");function EV(t,...e){od.logLevel<=ne.WARN&&od.warn(`Auth (${Er}): ${t}`,...e)}function td(t,...e){od.logLevel<=ne.ERROR&&od.error(`Auth (${Er}): ${t}`,...e)}function fn(t,...e){throw fy(t,...e)}function Si(t,...e){return fy(t,...e)}function IS(t,e,n){let r=Object.assign(Object.assign({},_S()),{[e]:n});return new Wt("auth","Firebase",r).create(e,{appName:t.name})}function Sr(t){return IS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ES.create(t,...e)}function H(t,e,...n){if(!t)throw fy(e,...n)}function Vn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw td(e),new Error(e)}function Ar(t,e){t||Vn(e)}function Gm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IV(){return nS()==="http:"||nS()==="https:"}function nS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function wV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IV()||wC()||"connection"in navigator)?navigator.onLine:!0}function TV(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ai=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ar(n>e,"Short delay should be less than long delay!"),this.isMobile=EC()||TC()}get(){return wV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function hy(t,e){Ar(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var sd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var DV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var bV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CV=new Ai(3e4,6e4);function Ri(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Nr(o,s,c,u){return _(this,arguments,function*(t,e,n,r,i={}){return wS(t,i,()=>_(null,null,function*(){let l={},f={};r&&(e==="GET"?f=r:l={body:JSON.stringify(r)});let p=Ma(Object.assign({key:t.config.apiKey},f)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:g},l);return IC()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&vr(t.emulatorConfig.host)&&(y.credentials="include"),sd.fetch()(yield TS(t,t.config.apiHost,n,p),y)}))})}function wS(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},DV),e);try{let i=new Wm(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw ed(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ed(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw ed(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw ed(t,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw IS(t,f,l);fn(t,f)}}catch(i){if(i instanceof bt)throw i;fn(t,"network-request-failed",{message:String(i)})}})}function yd(o,s,c,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield Nr(t,e,n,r,i);return"mfaPendingCredential"in l&&fn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function TS(t,e,n,r){return _(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?hy(t.config,i):`${t.config.apiScheme}://${i}`;return bV.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function SV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Wm=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Si(this.auth,"network-request-failed")),CV.get())})}};function ed(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Si(t,e,r);return i.customData._tokenResponse=n,i}function rS(t){return t!==void 0&&t.enterprise!==void 0}var Km=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return SV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function AV(t,e){return _(this,null,function*(){return Nr(t,"GET","/v2/recaptchaConfig",Ri(t,e))})}function NV(t,e){return _(this,null,function*(){return Nr(t,"POST","/v1/accounts:delete",e)})}function ad(t,e){return _(this,null,function*(){return Nr(t,"POST","/v1/accounts:lookup",e)})}function ja(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function py(t,e=!1){return _(this,null,function*(){let n=Ce(t),r=yield n.getIdToken(e),i=gy(r);H(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ja(Hm(i.auth_time)),issuedAtTime:ja(Hm(i.iat)),expirationTime:ja(Hm(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Hm(t){return Number(t)*1e3}function gy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return td("JWT malformed, contained fewer than 3 sections"),null;try{let i=zl(n);return i?JSON.parse(i):(td("Failed to decode base64 JWT payload"),null)}catch(i){return td("Caught error parsing JWT payload as JSON",i?.toString()),null}}function iS(t){let e=gy(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ua(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof bt&&RV(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function RV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Qm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var $a=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ja(this.lastLoginAt),this.creationTime=ja(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function cd(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Ua(t,ad(n,{idToken:r}));H(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?DS(o.providerUserInfo):[],c=PV(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!c?.length,f=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new $a(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,p)})}function my(t){return _(this,null,function*(){let e=Ce(t);yield cd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function PV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function DS(t){return t.map(e=>{var{providerId:n}=e,r=th(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function MV(t,e){return _(this,null,function*(){let n=yield wS(t,{},()=>_(null,null,function*(){let r=Ma({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield TS(t,i,"/v1/token",`key=${o}`),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return t.emulatorConfig&&vr(t.emulatorConfig.host)&&(u.credentials="include"),sd.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function kV(t,e){return _(this,null,function*(){return Nr(t,"POST","/v2/accounts:revokeToken",Ri(t,e))})}var Ba=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(e.length!==0,"internal-error");let n=iS(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield MV(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(H(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(H(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Vn("not implemented")}};function br(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Cr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=th(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $a(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Ua(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return py(this,e)}reload(){return my(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield cd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Ct(this.auth.app))return Promise.reject(Sr(this.auth));let e=yield this.getIdToken();return yield Ua(this,NV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,c,u,l,f;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=n.photoURL)!==null&&s!==void 0?s:void 0,R=(c=n.tenantId)!==null&&c!==void 0?c:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,V=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:W,emailVerified:ce,isAnonymous:je,providerData:de,stsTokenManager:T}=n;H(W&&T,e,"internal-error");let v=Ba.fromJSON(this.name,T);H(typeof W=="string",e,"internal-error"),br(p,e.name),br(g,e.name),H(typeof ce=="boolean",e,"internal-error"),H(typeof je=="boolean",e,"internal-error"),br(y,e.name),br(C,e.name),br(R,e.name),br(N,e.name),br(k,e.name),br(V,e.name);let I=new t({uid:W,auth:e,email:g,emailVerified:ce,displayName:p,isAnonymous:je,photoURL:C,phoneNumber:y,tenantId:R,stsTokenManager:v,createdAt:k,lastLoginAt:V});return de&&Array.isArray(de)&&(I.providerData=de.map(w=>Object.assign({},w))),N&&(I._redirectEventId=N),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new Ba;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield cd(o),o})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];H(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?DS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new Ba;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $a(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var oS=new Map;function jn(t){Ar(t instanceof Function,"Expected a class definition");let e=oS.get(t);return e?(Ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,oS.set(t,e),e)}var xV=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Ym=xV;function nd(t,e,n){return`firebase:${t}:${e}:${n}`}var ud=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=nd(this.userKey,i.apiKey,o),this.fullPersistenceKey=nd("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield ad(this.auth,{idToken:e}).catch(()=>{});return n?Cr._fromGetAccountInfoResponse(this.auth,n,e):null}return Cr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(jn(Ym),e,r);let i=(yield Promise.all(n.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||jn(Ym),s=nd(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let f=yield l._get(s);if(f){let p;if(typeof f=="string"){let g=yield ad(e,{idToken:f}).catch(()=>{});if(!g)break;p=yield Cr._fromGetAccountInfoResponse(e,g,f)}else p=Cr._fromJSON(e,f);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(n.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function sS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RS(e))return"Blackberry";if(PS(e))return"Webos";if(CS(e))return"Safari";if((e.includes("chrome/")||SS(e))&&!e.includes("edge/"))return"Chrome";if(NS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function bS(t=He()){return/firefox\//i.test(t)}function CS(t=He()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SS(t=He()){return/crios\//i.test(t)}function AS(t=He()){return/iemobile/i.test(t)}function NS(t=He()){return/android/i.test(t)}function RS(t=He()){return/blackberry/i.test(t)}function PS(t=He()){return/webos/i.test(t)}function yy(t=He()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OV(t=He()){var e;return yy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FV(){return DC()&&document.documentMode===10}function MS(t=He()){return yy(t)||NS(t)||PS(t)||RS(t)||/windows phone/i.test(t)||AS(t)}function kS(t,e=[]){let n;switch(t){case"Browser":n=sS(He());break;case"Worker":n=`${sS(He())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Er}/${r}`}var Zm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function LV(n){return _(this,arguments,function*(t,e={}){return Nr(t,"GET","/v2/passwordPolicy",Ri(t,e))})}var VV=6,Jm=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:VV,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Xm=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ld(this),this.idTokenSubscription=new ld(this),this.beforeStateQueue=new Zm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ES,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jn(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield ud.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield ad(this,{idToken:e}),r=yield Cr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(Ct(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield cd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=TV()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Ct(this.app))return Promise.reject(Sr(this));let n=e?Ce(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Ct(this.app)?Promise.reject(Sr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ct(this.app)?Promise.reject(Sr(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(jn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield LV(this),n=new Jm(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield kV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&jn(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=yield ud.create(this,[jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;if(Ct(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&EV(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function jo(t){return Ce(t)}var ld=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=AC(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var vd={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jV(t){vd=t}function xS(t){return vd.loadJS(t)}function BV(){return vd.recaptchaEnterpriseScript}function UV(){return vd.gapiScript}function OS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var ey=class{constructor(){this.enterprise=new ty}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},ty=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var $V="recaptcha-enterprise",FS="NO_RECAPTCHA",ny=class{constructor(e){this.type=$V,this.auth=jo(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,c)=>_(null,null,function*(){AV(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let l=new Km(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{c(u)})}))})}function i(o,s,c){let u=window.grecaptcha;rS(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(FS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ey().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(c=>{if(!n&&rS(window.grecaptcha))i(c,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=BV();u.length!==0&&(u+=c),xS(u).then(()=>{i(c,o,s)}).catch(l=>{s(l)})}}).catch(c=>{s(c)})})})}};function Va(t,e,n,r=!1,i=!1){return _(this,null,function*(){let o=new ny(t),s;if(i)s=FS;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){let u=c.phoneEnrollmentInfo.phoneNumber,l=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){let u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:s}):Object.assign(c,{captchaResponse:s}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c})}function aS(t,e,n,r,i){return _(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let c=yield Va(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(c=>_(null,null,function*(){if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Va(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let c=yield Va(t,e,n);return r(t,c).catch(u=>_(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let f=yield Va(t,e,n,!1,!0);return r(t,f)}return Promise.reject(u)}))}else{let c=yield Va(t,e,n,!1,!0);return r(t,c)}else return Promise.reject(i+" provider is not supported.")})}function vy(t,e){let n=Oo(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(cn(o,e??{}))return i;fn(i,"already-initialized")}return n.initialize({options:e})}function HV(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(jn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function _y(t,e,n){let r=jo(t);H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=LS(e),{host:s,port:c}=qV(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},f=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){H(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),H(cn(l,r.config.emulator)&&cn(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,vr(s)?(Wl(`${o}//${s}${u}`),Kl("Auth",!0)):i||zV()}function LS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qV(t){let e=LS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:cS(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:cS(s)}}}function cS(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function zV(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ha=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}};function GV(t,e){return _(this,null,function*(){return Nr(t,"POST","/v1/accounts:signUp",e)})}function WV(t,e){return _(this,null,function*(){return yd(t,"POST","/v1/accounts:signInWithPassword",Ri(t,e))})}function KV(t,e){return _(this,null,function*(){return yd(t,"POST","/v1/accounts:signInWithEmailLink",Ri(t,e))})}function QV(t,e){return _(this,null,function*(){return yd(t,"POST","/v1/accounts:signInWithEmailLink",Ri(t,e))})}var qa=class t extends Ha{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return aS(e,n,"signInWithPassword",WV,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return KV(e,{email:this._email,oobCode:this._password});default:fn(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return aS(e,r,"signUpPassword",GV,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return QV(e,{idToken:n,email:this._email,oobCode:this._password});default:fn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function qm(t,e){return _(this,null,function*(){return yd(t,"POST","/v1/accounts:signInWithIdp",Ri(t,e))})}function YV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZV(t){let e=ko(xo(t)).link,n=e?ko(xo(e)).deep_link_id:null,r=ko(xo(t)).deep_link_id;return(r?ko(xo(r)).link:null)||r||n||e||t}var dd=class t{constructor(e){var n,r,i,o,s,c;let u=ko(xo(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=YV((i=u.mode)!==null&&i!==void 0?i:null);H(l&&f&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=f,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let n=ZV(e);try{return new t(n)}catch{return null}}};var VS=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return qa._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=dd.parseLink(r);return H(i,"argument-error"),qa._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),fd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ry=class extends fd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var za=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let o=yield Cr._fromIdTokenResponse(e,r,i),s=uS(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=uS(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function uS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var iy=class t extends bt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function jS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?iy._fromErrorAndOperation(t,o,e,r):o})}function JV(t,e,n=!1){return _(this,null,function*(){let r=yield Ua(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return za._forOperation(t,"link",r)})}function XV(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(Ct(r.app))return Promise.reject(Sr(r));let i="reauthenticate";try{let o=yield Ua(t,jS(r,i,e,t),n);H(o.idToken,r,"internal-error");let s=gy(o.idToken);H(s,r,"internal-error");let{sub:c}=s;return H(t.uid===c,r,"user-mismatch"),za._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&fn(r,"user-mismatch"),o}})}function BS(t,e,n=!1){return _(this,null,function*(){if(Ct(t.app))return Promise.reject(Sr(t));let r="signIn",i=yield jS(t,r,e),o=yield za._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Ey(t,e){return _(this,null,function*(){return BS(jo(t),e)})}function e2(t){return _(this,null,function*(){let e=jo(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Iy(t,e,n){return Ct(t.app)?Promise.reject(Sr(t)):Ey(Ce(t),VS.credential(e,n)).catch(r=>_(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&e2(t),r}))}function _d(t,e,n,r){return Ce(t).onIdTokenChanged(e,n,r)}function wy(t,e,n){return Ce(t).beforeAuthStateChanged(e,n)}function Ed(t,e,n,r){return Ce(t).onAuthStateChanged(e,n,r)}function Ty(t){return Ce(t).signOut()}var hd="__sak";var pd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hd,"1"),this.storage.removeItem(hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var t2=1e3,n2=10,r2=(()=>{class t extends pd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);FV()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,n2):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},t2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield Xn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield Xn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield Xn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),US=r2;var i2=(()=>{class t extends pd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Dy=i2;function o2(t){return Promise.all(t.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var s2=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(f=>_(this,null,function*(){return f(r.origin,s)})),l=yield o2(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function $S(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var oy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=$S("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(g.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function dn(){return window}function a2(t){dn().location.href=t}function HS(){return typeof dn().WorkerGlobalScope<"u"&&typeof dn().importScripts=="function"}function c2(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function u2(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function l2(){return HS()?self:null}var qS="firebaseLocalStorageDb",d2=1,gd="firebaseLocalStorage",zS="fbase_key",Ni=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Id(t,e){return t.transaction([gd],e?"readwrite":"readonly").objectStore(gd)}function f2(){let t=indexedDB.deleteDatabase(qS);return new Ni(t).toPromise()}function sy(){let t=indexedDB.open(qS,d2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(gd,{keyPath:zS})}catch(i){n(i)}}),t.addEventListener("success",()=>_(null,null,function*(){let r=t.result;r.objectStoreNames.contains(gd)?e(r):(r.close(),yield f2(),e(yield sy()))}))})}function lS(t,e,n){return _(this,null,function*(){let r=Id(t,!0).put({[zS]:e,value:n});return new Ni(r).toPromise()})}function h2(t,e){return _(this,null,function*(){let n=Id(t,!1).get(e),r=yield new Ni(n).toPromise();return r===void 0?null:r.value})}function dS(t,e){let n=Id(t,!0).delete(e);return new Ni(n).toPromise()}var p2=800,g2=3,m2=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield sy(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>g2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return HS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=s2._getInstance(l2()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield c2(),!this.activeServiceWorker)return;this.sender=new oy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||u2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield sy();return yield lS(n,hd,"1"),yield dS(n,hd),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>lS(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>h2(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>dS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(o=>{let s=Id(o,!1).getAll();return new Ni(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),p2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),GS=m2;var HJ=OS("rcb"),qJ=new Ai(3e4,6e4);function y2(t,e){return e?jn(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ga=class extends Ha{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qm(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function v2(t){return BS(t.auth,new Ga(t),t.bypassAuthState)}function _2(t){let{auth:e,user:n}=t;return H(n,e,"internal-error"),XV(n,new Ga(t),t.bypassAuthState)}function E2(t){return _(this,null,function*(){let{auth:e,user:n}=t;return H(n,e,"internal-error"),JV(n,new Ga(t),t.bypassAuthState)})}var ay=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return v2;case"linkViaPopup":case"linkViaRedirect":return E2;case"reauthViaPopup":case"reauthViaRedirect":return _2;default:fn(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var zJ=new Ai(2e3,1e4);var I2="pendingRedirect",rd=new Map,cy=class t extends ay{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=rd.get(this.auth._key());if(!e){try{let r=(yield w2(this.resolver,this.auth))?yield Xn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rd.set(this.auth._key(),e)}return this.bypassAuthState||rd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Xn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Xn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function w2(t,e){return _(this,null,function*(){let n=b2(e),r=D2(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function T2(t,e){rd.set(t._key(),e)}function D2(t){return jn(t._redirectPersistence)}function b2(t){return nd(I2,t.config.apiKey,t.name)}function C2(t,e,n=!1){return _(this,null,function*(){if(Ct(t.app))return Promise.reject(Sr(t));let r=jo(t),i=y2(r,e),s=yield new cy(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var S2=600*1e3,uy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!WS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Si(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S2&&this.cachedEventUids.clear(),this.cachedEventUids.has(fS(e))}saveEventToCache(e){this.cachedEventUids.add(fS(e)),this.lastProcessedEventTime=Date.now()}};function fS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function A2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WS(t);default:return!1}}function N2(n){return _(this,arguments,function*(t,e={}){return Nr(t,"GET","/v1/projects",e)})}var R2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P2=/^https?/;function M2(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield N2(t);for(let n of e)try{if(k2(n))return}catch{}fn(t,"unauthorized-domain")})}function k2(t){let e=Gm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!P2.test(n))return!1;if(R2.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var x2=new Ai(3e4,6e4);function hS(){let t=dn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function O2(t){return new Promise((e,n)=>{var r,i,o;function s(){hS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hS(),n(Si(t,"network-request-failed"))},timeout:x2.get()})}if(!((i=(r=dn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=dn().gapi)===null||o===void 0)&&o.load)s();else{let c=OS("iframefcb");return dn()[c]=()=>{gapi.load?s():n(Si(t,"network-request-failed"))},xS(`${UV()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw id=null,e})}var id=null;function F2(t){return id=id||O2(t),id}var L2=new Ai(5e3,15e3),V2="__/auth/iframe",j2="emulator/auth/iframe",B2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $2(t){let e=t.config;H(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?hy(e,j2):`https://${t.config.authDomain}/${V2}`,r={apiKey:e.apiKey,appName:t.name,v:Er},i=U2.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ma(r).slice(1)}`}function H2(t){return _(this,null,function*(){let e=yield F2(t),n=dn().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:$2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B2,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Si(t,"network-request-failed"),c=dn().setTimeout(()=>{o(s)},L2.get());function u(){dn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var q2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},z2=500,G2=600,W2="_blank",K2="http://localhost",md=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Q2(t,e,n,r=z2,i=G2){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},q2),{width:r.toString(),height:i.toString(),top:o,left:s}),l=He().toLowerCase();n&&(c=SS(l)?W2:n),bS(l)&&(e=e||K2,u.scrollbars="yes");let f=Object.entries(u).reduce((g,[y,C])=>`${g}${y}=${C},`,"");if(OV(l)&&c!=="_self")return Y2(e||"",c),new md(null);let p=window.open(e||"",c,f);H(p,t,"popup-blocked");try{p.focus()}catch{}return new md(p)}function Y2(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Z2="__/auth/handler",J2="emulator/auth/handler",X2=encodeURIComponent("fac");function pS(t,e,n,r,i,o){return _(this,null,function*(){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Er,eventId:i};if(e instanceof fd){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",SC(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(o||{}))s[f]=p}if(e instanceof ry){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);let c=s;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=yield t._getAppCheckToken(),l=u?`#${X2}=${encodeURIComponent(u)}`:"";return`${ej(t)}?${Ma(c).slice(1)}${l}`})}function ej({config:t}){return t.emulator?hy(t,J2):`https://${t.authDomain}/${Z2}`}var zm="webStorageSupport",ly=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dy,this._completeRedirectFn=C2,this._overrideRedirectResult=T2}_openPopup(e,n,r,i){return _(this,null,function*(){var o;Ar((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield pS(e,n,r,Gm(),i);return Q2(e,s,$S())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield pS(e,n,r,Gm(),i);return a2(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Ar(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield H2(e),r=new uy(e);return n.register("authEvent",i=>(H(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zm,{type:zm},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[zm];s!==void 0&&n(!!s),fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=M2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return MS()||CS()||yy()}},KS=ly;var gS="@firebase/auth",mS="1.10.8";var dy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function tj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nj(t){Kt(new pt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;H(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kS(t)},l=new Xm(r,i,o,u);return HV(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Kt(new pt("auth-internal",e=>{let n=jo(e.getProvider("auth").getImmediate());return(r=>new dy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(gS,mS,tj(t)),Se(gS,mS,"esm2017")}var rj=300,ij=Em("authIdTokenMaxAge")||rj,yS=null,oj=t=>e=>_(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ij)return;let i=n?.token;yS!==i&&(yS=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function by(t=Ir()){let e=Oo(t,"auth");if(e.isInitialized())return e.getImmediate();let n=vy(t,{popupRedirectResolver:KS,persistence:[GS,US,Dy]}),r=Em("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=oj(o.toString());wy(n,s,()=>s(n.currentUser)),_d(n,c=>s(c))}}let i=vm("auth");return i&&_y(n,`http://${i}`),n}function sj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}jV({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Si("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",sj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nj("Browser");function YS(t){return new Y(function(e){var n=Ed(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var ZS="auth",Wa=class{constructor(e){return e}},Ka=class{constructor(){return Lo(ZS)}};var Cy=new $("angularfire2.auth-instances");function Kj(t,e){let n=Oa(ZS,t,e);return n&&new Wa(n)}function Qj(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Wa(r)}}var Yj={provide:Ka,deps:[[new Dt,Cy]]},Zj={provide:Wa,useFactory:Kj,deps:[[new Dt,Cy],Ln]};function LX(t,...e){return Se("angularfire",wr.full,"auth"),Rn([Zj,Yj,{provide:Cy,useFactory:Qj(t),multi:!0,deps:[ge,Ve,Tr,Ci,[new Dt,Vo],...e]}])}var VX=Ae(YS,!0);var jX=Ae(by,!0);var BX=Ae(Iy,!0,2);var UX=Ae(Ty,!0,2);var JS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XS={};var Bn,Sy;(function(){var t;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(w,D,S){for(var E=Array(arguments.length-2),En=2;En<arguments.length;En++)E[En-2]=arguments[En];return v.prototype[D].apply(w,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var w=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)w[D]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(D=0;16>D;++D)w[D]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],D=T.g[2];var S=T.g[3],E=v+(S^I&(D^S))+w[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=S+(D^v&(I^D))+w[1]+3905402710&4294967295,S=v+(E<<12&4294967295|E>>>20),E=D+(I^S&(v^I))+w[2]+606105819&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(v^D&(S^v))+w[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(S^I&(D^S))+w[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(D^v&(I^D))+w[5]+1200080426&4294967295,S=v+(E<<12&4294967295|E>>>20),E=D+(I^S&(v^I))+w[6]+2821735955&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(v^D&(S^v))+w[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(S^I&(D^S))+w[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(D^v&(I^D))+w[9]+2336552879&4294967295,S=v+(E<<12&4294967295|E>>>20),E=D+(I^S&(v^I))+w[10]+4294925233&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(v^D&(S^v))+w[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(S^I&(D^S))+w[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(D^v&(I^D))+w[13]+4254626195&4294967295,S=v+(E<<12&4294967295|E>>>20),E=D+(I^S&(v^I))+w[14]+2792965006&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(v^D&(S^v))+w[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(D^S&(I^D))+w[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(v^I))+w[6]+3225465664&4294967295,S=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(S^v))+w[11]+643717713&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(D^S))+w[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^S&(I^D))+w[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(v^I))+w[10]+38016083&4294967295,S=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(S^v))+w[15]+3634488961&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(D^S))+w[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^S&(I^D))+w[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(v^I))+w[14]+3275163606&4294967295,S=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(S^v))+w[3]+4107603335&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(D^S))+w[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^S&(I^D))+w[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(v^I))+w[2]+4243563512&4294967295,S=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(S^v))+w[7]+1735328473&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(D^S))+w[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(I^D^S)+w[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^D)+w[8]+2272392833&4294967295,S=v+(E<<11&4294967295|E>>>21),E=D+(S^v^I)+w[11]+1839030562&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^v)+w[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^S)+w[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^D)+w[4]+1272893353&4294967295,S=v+(E<<11&4294967295|E>>>21),E=D+(S^v^I)+w[7]+4139469664&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^v)+w[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^S)+w[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^D)+w[0]+3936430074&4294967295,S=v+(E<<11&4294967295|E>>>21),E=D+(S^v^I)+w[3]+3572445317&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^v)+w[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^S)+w[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^D)+w[12]+3873151461&4294967295,S=v+(E<<11&4294967295|E>>>21),E=D+(S^v^I)+w[15]+530742520&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^v)+w[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(D^(I|~S))+w[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~D))+w[7]+1126891415&4294967295,S=v+(E<<10&4294967295|E>>>22),E=D+(v^(S|~I))+w[14]+2878612391&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~v))+w[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~S))+w[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~D))+w[3]+2399980690&4294967295,S=v+(E<<10&4294967295|E>>>22),E=D+(v^(S|~I))+w[10]+4293915773&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~v))+w[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~S))+w[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~D))+w[15]+4264355552&4294967295,S=v+(E<<10&4294967295|E>>>22),E=D+(v^(S|~I))+w[6]+2734768916&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~v))+w[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~S))+w[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~D))+w[11]+3174756917&4294967295,S=v+(E<<10&4294967295|E>>>22),E=D+(v^(S|~I))+w[2]+718787259&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~v))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,w=this.B,D=this.h,S=0;S<v;){if(D==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<v;)if(w[D++]=T.charCodeAt(S++),D==this.blockSize){i(this,w),D=0;break}}else for(;S<v;)if(w[D++]=T[S++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var w=0;32>w;w+=8)T[I++]=this.g[v]>>>w&255;return T};function o(T,v){var I=c;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function s(T,v){this.h=v;for(var I=[],w=!0,D=T.length-1;0<=D;D--){var S=T[D]|0;w&&S==v||(I[D]=S,w=!1)}this.g=I}var c={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return N(l(-T));for(var v=[],I=1,w=0;T>=I;w++)v[w]=T/I|0,I*=4294967296;return new s(v,0)}function f(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return N(f(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),w=p,D=0;D<T.length;D+=8){var S=Math.min(8,T.length-D),E=parseInt(T.substring(D,D+S),v);8>S?(S=l(Math.pow(v,S)),w=w.j(S).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-N(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var w=this.i(I);T+=(0<=w?w:4294967296+w)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(R(this))return"-"+N(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,w="";;){var D=ce(I,v).g;I=k(I,D.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=D,C(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function R(T){return T.h==-1}t.l=function(T){return T=k(this,T),R(T)?-1:C(T)?0:1};function N(T){for(var v=T.g.length,I=[],w=0;w<v;w++)I[w]=~T.g[w];return new s(I,~T.h).add(g)}t.abs=function(){return R(this)?N(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0,D=0;D<=v;D++){var S=w+(this.i(D)&65535)+(T.i(D)&65535),E=(S>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);w=E>>>16,S&=65535,E&=65535,I[D]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function k(T,v){return T.add(N(v))}t.j=function(T){if(C(this)||C(T))return p;if(R(this))return R(T)?N(this).j(N(T)):N(N(this).j(T));if(R(T))return N(this.j(N(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],w=0;w<2*v;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<T.g.length;D++){var S=this.i(w)>>>16,E=this.i(w)&65535,En=T.i(D)>>>16,ls=T.i(D)&65535;I[2*w+2*D]+=E*ls,V(I,2*w+2*D),I[2*w+2*D+1]+=S*ls,V(I,2*w+2*D+1),I[2*w+2*D+1]+=E*En,V(I,2*w+2*D+1),I[2*w+2*D+2]+=S*En,V(I,2*w+2*D+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new s(I,0)};function V(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function W(T,v){this.g=T,this.h=v}function ce(T,v){if(C(v))throw Error("division by zero");if(C(T))return new W(p,p);if(R(T))return v=ce(N(T),v),new W(N(v.g),N(v.h));if(R(v))return v=ce(T,N(v)),new W(N(v.g),v.h);if(30<T.g.length){if(R(T)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,w=v;0>=w.l(T);)I=je(I),w=je(w);var D=de(I,1),S=de(w,1);for(w=de(w,2),I=de(I,2);!C(w);){var E=S.add(w);0>=E.l(T)&&(D=D.add(I),S=E),w=de(w,1),I=de(I,1)}return v=k(T,D.j(v)),new W(D,v)}for(D=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),E=S.j(v);R(E)||0<E.l(T);)I-=w,S=l(I),E=S.j(v);C(S)&&(S=g),D=D.add(S),T=k(T,E)}return new W(D,T)}t.A=function(T){return ce(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)&T.i(w);return new s(I,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)|T.i(w);return new s(I,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)^T.i(w);return new s(I,this.h^T.h)};function je(T){for(var v=T.g.length+1,I=[],w=0;w<v;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(I,T.h)}function de(T,v){var I=v>>5;v%=32;for(var w=T.g.length-I,D=[],S=0;S<w;S++)D[S]=0<v?T.i(S+I)>>>v|T.i(S+I+1)<<32-v:T.i(S+I);return new s(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Sy=XS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,Bn=XS.Integer=s}).apply(typeof JS<"u"?JS:typeof self<"u"?self:typeof window<"u"?window:{});var wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Un={};var Ay,Jj,Bo,Ny,Qa,Td,Ry,Py,My;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof wd=="object"&&wd];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var b=a[m];if(!(b in h))break e;h=h[b]}a=a[a.length-1],m=h[a],d=d(m),d!=m&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var h=0,m=!1,b={next:function(){if(!m&&h<a.length){var A=h++;return{value:d(A,a[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,h){return h})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,h){return a.call.apply(a.bind,arguments)}function p(a,d,h){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),a.apply(d,b)}}return function(){return a.apply(d,arguments)}}function g(a,d,h){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function y(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function C(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(m,b,A){for(var x=Array(arguments.length-2),he=2;he<arguments.length;he++)x[he-2]=arguments[he];return d.prototype[b].apply(m,x)}}function R(a){let d=a.length;if(0<d){let h=Array(d);for(let m=0;m<d;m++)h[m]=a[m];return h}return[]}function N(a,d){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(u(m)){let b=a.length||0,A=m.length||0;a.length=b+A;for(let x=0;x<A;x++)a[b+x]=m[x]}else a.push(m)}}class k{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(a){return/^[\s\xa0]*$/.test(a)}function W(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ce(a){return ce[" "](a),a}ce[" "]=function(){};var je=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function de(a,d,h){for(let m in a)d.call(h,a[m],m,a)}function T(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function v(a){let d={};for(let h in a)d[h]=a[h];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let h,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(h in m)a[h]=m[h];for(let A=0;A<I.length;A++)h=I[A],Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])}}function D(a){var d=1;a=a.split(":");let h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function S(a){c.setTimeout(()=>{throw a},0)}function E(){var a=wf;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class En{constructor(){this.h=this.g=null}add(d,h){let m=ls.get();m.set(d,h),this.h?this.h.next=m:this.g=m,this.h=m}}var ls=new k(()=>new xN,a=>a.reset());class xN{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ds,fs=!1,wf=new En,X_=()=>{let a=c.Promise.resolve(void 0);ds=()=>{a.then(ON)}};var ON=()=>{for(var a;a=E();){try{a.h.call(a.g)}catch(h){S(h)}var d=ls;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}fs=!1};function Qn(){this.s=this.s,this.C=this.C}Qn.prototype.s=!1,Qn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Qn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ze(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ze.prototype.h=function(){this.defaultPrevented=!0};var FN=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,d),c.removeEventListener("test",h,d)}catch{}return a})();function hs(a,d){if(Ze.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(je){e:{try{ce(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:LN[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&hs.aa.h.call(this)}}C(hs,Ze);var LN={2:"touch",3:"pen",4:"mouse"};hs.prototype.h=function(){hs.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ps="closure_listenable_"+(1e6*Math.random()|0),VN=0;function jN(a,d,h,m,b){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!m,this.ha=b,this.key=++VN,this.da=this.fa=!1}function _c(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ec(a){this.src=a,this.g={},this.h=0}Ec.prototype.add=function(a,d,h,m,b){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var x=Df(a,d,m,b);return-1<x?(d=a[x],h||(d.fa=!1)):(d=new jN(d,this.src,A,!!m,b),d.fa=h,a.push(d)),d};function Tf(a,d){var h=d.type;if(h in a.g){var m=a.g[h],b=Array.prototype.indexOf.call(m,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(m,b,1),A&&(_c(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Df(a,d,h,m){for(var b=0;b<a.length;++b){var A=a[b];if(!A.da&&A.listener==d&&A.capture==!!h&&A.ha==m)return b}return-1}var bf="closure_lm_"+(1e6*Math.random()|0),Cf={};function eE(a,d,h,m,b){if(m&&m.once)return nE(a,d,h,m,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)eE(a,d[A],h,m,b);return null}return h=Rf(h),a&&a[ps]?a.K(d,h,l(m)?!!m.capture:!!m,b):tE(a,d,h,!1,m,b)}function tE(a,d,h,m,b,A){if(!d)throw Error("Invalid event type");var x=l(b)?!!b.capture:!!b,he=Af(a);if(he||(a[bf]=he=new Ec(a)),h=he.add(d,h,m,x,A),h.proxy)return h;if(m=BN(),h.proxy=m,m.src=a,m.listener=h,a.addEventListener)FN||(b=x),b===void 0&&(b=!1),a.addEventListener(d.toString(),m,b);else if(a.attachEvent)a.attachEvent(iE(d.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function BN(){function a(h){return d.call(a.src,a.listener,h)}let d=UN;return a}function nE(a,d,h,m,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)nE(a,d[A],h,m,b);return null}return h=Rf(h),a&&a[ps]?a.L(d,h,l(m)?!!m.capture:!!m,b):tE(a,d,h,!0,m,b)}function rE(a,d,h,m,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)rE(a,d[A],h,m,b);else m=l(m)?!!m.capture:!!m,h=Rf(h),a&&a[ps]?(a=a.i,d=String(d).toString(),d in a.g&&(A=a.g[d],h=Df(A,h,m,b),-1<h&&(_c(A[h]),Array.prototype.splice.call(A,h,1),A.length==0&&(delete a.g[d],a.h--)))):a&&(a=Af(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Df(d,h,m,b)),(h=-1<a?d[a]:null)&&Sf(h))}function Sf(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[ps])Tf(d.i,a);else{var h=a.type,m=a.proxy;d.removeEventListener?d.removeEventListener(h,m,a.capture):d.detachEvent?d.detachEvent(iE(h),m):d.addListener&&d.removeListener&&d.removeListener(m),(h=Af(d))?(Tf(h,a),h.h==0&&(h.src=null,d[bf]=null)):_c(a)}}}function iE(a){return a in Cf?Cf[a]:Cf[a]="on"+a}function UN(a,d){if(a.da)a=!0;else{d=new hs(d,this);var h=a.listener,m=a.ha||a.src;a.fa&&Sf(a),a=h.call(m,d)}return a}function Af(a){return a=a[bf],a instanceof Ec?a:null}var Nf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rf(a){return typeof a=="function"?a:(a[Nf]||(a[Nf]=function(d){return a.handleEvent(d)}),a[Nf])}function Je(){Qn.call(this),this.i=new Ec(this),this.M=this,this.F=null}C(Je,Qn),Je.prototype[ps]=!0,Je.prototype.removeEventListener=function(a,d,h,m){rE(this,a,d,h,m)};function ct(a,d){var h,m=a.F;if(m)for(h=[];m;m=m.F)h.push(m);if(a=a.M,m=d.type||d,typeof d=="string")d=new Ze(d,a);else if(d instanceof Ze)d.target=d.target||a;else{var b=d;d=new Ze(m,a),w(d,b)}if(b=!0,h)for(var A=h.length-1;0<=A;A--){var x=d.g=h[A];b=Ic(x,m,!0,d)&&b}if(x=d.g=a,b=Ic(x,m,!0,d)&&b,b=Ic(x,m,!1,d)&&b,h)for(A=0;A<h.length;A++)x=d.g=h[A],b=Ic(x,m,!1,d)&&b}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],m=0;m<h.length;m++)_c(h[m]);delete a.g[d],a.h--}}this.F=null},Je.prototype.K=function(a,d,h,m){return this.i.add(String(a),d,!1,h,m)},Je.prototype.L=function(a,d,h,m){return this.i.add(String(a),d,!0,h,m)};function Ic(a,d,h,m){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var x=d[A];if(x&&!x.da&&x.capture==h){var he=x.listener,Ge=x.ha||x.src;x.fa&&Tf(a.i,x),b=he.call(Ge,m)!==!1&&b}}return b&&!m.defaultPrevented}function oE(a,d,h){if(typeof a=="function")h&&(a=g(a,h));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function sE(a){a.g=oE(()=>{a.g=null,a.i&&(a.i=!1,sE(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class $N extends Qn{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:sE(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(a){Qn.call(this),this.h=a,this.g={}}C(gs,Qn);var aE=[];function cE(a){de(a.g,function(d,h){this.g.hasOwnProperty(h)&&Sf(d)},a),a.g={}}gs.prototype.N=function(){gs.aa.N.call(this),cE(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pf=c.JSON.stringify,HN=c.JSON.parse,qN=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Mf(){}Mf.prototype.h=null;function uE(a){return a.h||(a.h=a.i())}function lE(){}var ms={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kf(){Ze.call(this,"d")}C(kf,Ze);function xf(){Ze.call(this,"c")}C(xf,Ze);var Ur={},dE=null;function wc(){return dE=dE||new Je}Ur.La="serverreachability";function fE(a){Ze.call(this,Ur.La,a)}C(fE,Ze);function ys(a){let d=wc();ct(d,new fE(d))}Ur.STAT_EVENT="statevent";function hE(a,d){Ze.call(this,Ur.STAT_EVENT,a),this.stat=d}C(hE,Ze);function ut(a){let d=wc();ct(d,new hE(d,a))}Ur.Ma="timingevent";function pE(a,d){Ze.call(this,Ur.Ma,a),this.size=d}C(pE,Ze);function vs(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function _s(){this.g=!0}_s.prototype.xa=function(){this.g=!1};function zN(a,d,h,m,b,A){a.info(function(){if(a.g)if(A)for(var x="",he=A.split("&"),Ge=0;Ge<he.length;Ge++){var ae=he[Ge].split("=");if(1<ae.length){var Xe=ae[0];ae=ae[1];var et=Xe.split("_");x=2<=et.length&&et[1]=="type"?x+(Xe+"="+ae+"&"):x+(Xe+"=redacted&")}}else x=null;else x=A;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+h+`
`+x})}function GN(a,d,h,m,b,A,x){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+h+`
`+A+" "+x})}function qi(a,d,h,m){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+KN(a,h)+(m?" "+m:"")})}function WN(a,d){a.info(function(){return"TIMEOUT: "+d})}_s.prototype.info=function(){};function KN(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var m=h[a];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var x=1;x<b.length;x++)b[x]=""}}}}return Pf(h)}catch{return d}}var Tc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Of;function Dc(){}C(Dc,Mf),Dc.prototype.g=function(){return new XMLHttpRequest},Dc.prototype.i=function(){return{}},Of=new Dc;function Yn(a,d,h,m){this.j=a,this.i=d,this.l=h,this.R=m||1,this.U=new gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mE}function mE(){this.i=null,this.g="",this.h=!1}var yE={},Ff={};function Lf(a,d,h){a.L=1,a.v=Ac(In(d)),a.m=h,a.P=!0,vE(a,null)}function vE(a,d){a.F=Date.now(),bc(a),a.A=In(a.v);var h=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),ME(h.i,"t",m),a.C=0,h=a.j.J,a.h=new mE,a.g=YE(a.j,h?d:null,!a.m),0<a.O&&(a.M=new $N(g(a.Y,a,a.g),a.O)),d=a.U,h=a.g,m=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(aE[0]=b.toString()),b=aE);for(var A=0;A<b.length;A++){var x=eE(h,b[A],m||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),ys(),zN(a.i,a.u,a.A,a.l,a.R,a.m)}Yn.prototype.ca=function(a){a=a.target;let d=this.M;d&&wn(a)==3?d.j():this.Y(a)},Yn.prototype.Y=function(a){try{if(a==this.g)e:{let et=wn(this.g);var d=this.g.Ba();let Wi=this.g.Z();if(!(3>et)&&(et!=3||this.g&&(this.h.h||this.g.oa()||jE(this.g)))){this.J||et!=4||d==7||(d==8||0>=Wi?ys(3):ys(2)),Vf(this);var h=this.g.Z();this.X=h;t:if(_E(this)){var m=jE(this.g);a="";var b=m.length,A=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),Es(this);var x="";break t}this.h.i=new c.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,a+=this.h.i.decode(m[d],{stream:!(A&&d==b-1)});m.length=0,this.h.g+=a,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=h==200,GN(this.i,this.u,this.A,this.l,this.R,et,h),this.o){if(this.T&&!this.K){t:{if(this.g){var he,Ge=this.g;if((he=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(he)){var ae=he;break t}}ae=null}if(h=ae)qi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jf(this,h);else{this.o=!1,this.s=3,ut(12),$r(this),Es(this);break e}}if(this.P){h=!0;let Lt;for(;!this.J&&this.C<x.length;)if(Lt=QN(this,x),Lt==Ff){et==4&&(this.s=4,ut(14),h=!1),qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==yE){this.s=4,ut(15),qi(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else qi(this.i,this.l,Lt,null),jf(this,Lt);if(_E(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||x.length!=0||this.h.h||(this.s=1,ut(16),h=!1),this.o=this.o&&h,!h)qi(this.i,this.l,x,"[Invalid Chunked Response]"),$r(this),Es(this);else if(0<x.length&&!this.W){this.W=!0;var Xe=this.j;Xe.g==this&&Xe.ba&&!Xe.M&&(Xe.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),zf(Xe),Xe.M=!0,ut(11))}}else qi(this.i,this.l,x,null),jf(this,x);et==4&&$r(this),this.o&&!this.J&&(et==4?GE(this.j,this):(this.o=!1,bc(this)))}else fR(this.g),h==400&&0<x.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),$r(this),Es(this)}}}catch{}finally{}};function _E(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function QN(a,d){var h=a.C,m=d.indexOf(`
`,h);return m==-1?Ff:(h=Number(d.substring(h,m)),isNaN(h)?yE:(m+=1,m+h>d.length?Ff:(d=d.slice(m,m+h),a.C=m+h,d)))}Yn.prototype.cancel=function(){this.J=!0,$r(this)};function bc(a){a.S=Date.now()+a.I,EE(a,a.I)}function EE(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=vs(g(a.ba,a),d)}function Vf(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Yn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(WN(this.i,this.A),this.L!=2&&(ys(),ut(17)),$r(this),this.s=2,Es(this)):EE(this,this.S-a)};function Es(a){a.j.G==0||a.J||GE(a.j,a)}function $r(a){Vf(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,cE(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function jf(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||Bf(h.h,a))){if(!a.K&&Bf(h.h,a)&&h.G==3){try{var m=h.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)kc(h),Pc(h);else break e;qf(h),ut(18)}}else h.za=b[1],0<h.za-h.T&&37500>b[2]&&h.F&&h.v==0&&!h.C&&(h.C=vs(g(h.Za,h),6e3));if(1>=TE(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else qr(h,11)}else if((a.K||h.g==a)&&kc(h),!V(d))for(b=h.Da.g.parse(d),d=0;d<b.length;d++){let ae=b[d];if(h.T=ae[0],ae=ae[1],h.G==2)if(ae[0]=="c"){h.K=ae[1],h.ia=ae[2];let Xe=ae[3];Xe!=null&&(h.la=Xe,h.j.info("VER="+h.la));let et=ae[4];et!=null&&(h.Aa=et,h.j.info("SVER="+h.Aa));let Wi=ae[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(m=1.5*Wi,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let Lt=a.g;if(Lt){let Oc=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oc){var A=m.h;A.g||Oc.indexOf("spdy")==-1&&Oc.indexOf("quic")==-1&&Oc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Uf(A,A.h),A.h=null))}if(m.D){let Gf=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Gf&&(m.ya=Gf,ve(m.I,m.D,Gf))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var x=a;if(m.qa=QE(m,m.J?m.ia:null,m.W),x.K){DE(m.h,x);var he=x,Ge=m.L;Ge&&(he.I=Ge),he.B&&(Vf(he),bc(he)),m.g=x}else qE(m);0<h.i.length&&Mc(h)}else ae[0]!="stop"&&ae[0]!="close"||qr(h,7);else h.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?qr(h,7):Hf(h):ae[0]!="noop"&&h.l&&h.l.ta(ae),h.v=0)}}ys(4)}catch{}}var YN=class{constructor(a,d){this.g=a,this.map=d}};function IE(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wE(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function TE(a){return a.h?1:a.g?a.g.size:0}function Bf(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Uf(a,d){a.g?a.g.add(d):a.h=d}function DE(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}IE.prototype.cancel=function(){if(this.i=bE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function bE(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.D);return d}return R(a.i)}function ZN(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],h=a.length,m=0;m<h;m++)d.push(a[m]);return d}d=[],h=0;for(m in a)d[h++]=a[m];return d}function JN(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(let m in a)d[h++]=m;return d}}}function CE(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=JN(a),m=ZN(a),b=m.length,A=0;A<b;A++)d.call(void 0,m[A],h&&h[A],a)}var SE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XN(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var m=a[h].indexOf("="),b=null;if(0<=m){var A=a[h].substring(0,m);b=a[h].substring(m+1)}else A=a[h];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Hr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Hr){this.h=a.h,Cc(this,a.j),this.o=a.o,this.g=a.g,Sc(this,a.s),this.l=a.l;var d=a.i,h=new Ts;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),AE(this,h),this.m=a.m}else a&&(d=String(a).match(SE))?(this.h=!1,Cc(this,d[1]||"",!0),this.o=Is(d[2]||""),this.g=Is(d[3]||"",!0),Sc(this,d[4]),this.l=Is(d[5]||"",!0),AE(this,d[6]||"",!0),this.m=Is(d[7]||"")):(this.h=!1,this.i=new Ts(null,this.h))}Hr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(ws(d,NE,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(ws(d,NE,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(ws(h,h.charAt(0)=="/"?nR:tR,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",ws(h,iR)),a.join("")};function In(a){return new Hr(a)}function Cc(a,d,h){a.j=h?Is(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Sc(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function AE(a,d,h){d instanceof Ts?(a.i=d,oR(a.i,a.h)):(h||(d=ws(d,rR)),a.i=new Ts(d,a.h))}function ve(a,d,h){a.i.set(d,h)}function Ac(a){return ve(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Is(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ws(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,eR),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function eR(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var NE=/[#\/\?@]/g,tR=/[#\?:]/g,nR=/[#\?]/g,rR=/[#\?@]/g,iR=/#/g;function Ts(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Zn(a){a.g||(a.g=new Map,a.h=0,a.i&&XN(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=Ts.prototype,t.add=function(a,d){Zn(this),this.i=null,a=zi(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function RE(a,d){Zn(a),d=zi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function PE(a,d){return Zn(a),d=zi(a,d),a.g.has(d)}t.forEach=function(a,d){Zn(this),this.g.forEach(function(h,m){h.forEach(function(b){a.call(d,b,m,this)},this)},this)},t.na=function(){Zn(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let m=0;m<d.length;m++){let b=a[m];for(let A=0;A<b.length;A++)h.push(d[m])}return h},t.V=function(a){Zn(this);let d=[];if(typeof a=="string")PE(this,a)&&(d=d.concat(this.g.get(zi(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},t.set=function(a,d){return Zn(this),this.i=null,a=zi(this,a),PE(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function ME(a,d,h){RE(a,d),0<h.length&&(a.i=null,a.g.set(zi(a,d),R(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var m=d[h];let A=encodeURIComponent(String(m)),x=this.V(m);for(m=0;m<x.length;m++){var b=A;x[m]!==""&&(b+="="+encodeURIComponent(String(x[m]))),a.push(b)}}return this.i=a.join("&")};function zi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function oR(a,d){d&&!a.j&&(Zn(a),a.i=null,a.g.forEach(function(h,m){var b=m.toLowerCase();m!=b&&(RE(this,m),ME(this,b,h))},a)),a.j=d}function sR(a,d){let h=new _s;if(c.Image){let m=new Image;m.onload=y(Jn,h,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Jn,h,"TestLoadImage: error",!1,d,m),m.onabort=y(Jn,h,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Jn,h,"TestLoadImage: timeout",!1,d,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else d(!1)}function aR(a,d){let h=new _s,m=new AbortController,b=setTimeout(()=>{m.abort(),Jn(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:m.signal}).then(A=>{clearTimeout(b),A.ok?Jn(h,"TestPingServer: ok",!0,d):Jn(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Jn(h,"TestPingServer: error",!1,d)})}function Jn(a,d,h,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(h)}catch{}}function cR(){this.g=new qN}function uR(a,d,h){let m=h||"";try{CE(a,function(b,A){let x=b;l(b)&&(x=Pf(b)),d.push(m+A+"="+encodeURIComponent(x))})}catch(b){throw d.push(m+"type="+encodeURIComponent("_badmap")),b}}function Ds(a){this.l=a.Ub||null,this.j=a.eb||!1}C(Ds,Mf),Ds.prototype.g=function(){return new Nc(this.l,this.j)},Ds.prototype.i=(function(a){return function(){return a}})({});function Nc(a,d){Je.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Nc,Je),t=Nc.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Cs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bs(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kE(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function kE(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?bs(this):Cs(this),this.readyState==3&&kE(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,bs(this))},t.Qa=function(a){this.g&&(this.response=a,bs(this))},t.ga=function(){this.g&&bs(this)};function bs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Cs(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function Cs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Nc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function xE(a){let d="";return de(a,function(h,m){d+=m,d+=":",d+=h,d+=`\r
`}),d}function $f(a,d,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=xE(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):ve(a,d,h))}function Te(a){Je.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Te,Je);var lR=/^https?$/i,dR=["POST","PUT"];t=Te.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Of.g(),this.v=this.o?uE(this.o):uE(Of),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(A){OE(this,A);return}if(a=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)h.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())h.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),b=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(dR,d,void 0))||m||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,x]of h)this.g.setRequestHeader(A,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{VE(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){OE(this,A)}};function OE(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,FE(a),Rc(a)}function FE(a){a.A||(a.A=!0,ct(a,"complete"),ct(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ct(this,"complete"),ct(this,"abort"),Rc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rc(this,!0)),Te.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?LE(this):this.bb())},t.bb=function(){LE(this)};function LE(a){if(a.h&&typeof s<"u"&&(!a.v[1]||wn(a)!=4||a.Z()!=2)){if(a.u&&wn(a)==4)oE(a.Ea,0,a);else if(ct(a,"readystatechange"),wn(a)==4){a.h=!1;try{let x=a.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var m;if(m=x===0){var b=String(a.D).match(SE)[1]||null;!b&&c.self&&c.self.location&&(b=c.self.location.protocol.slice(0,-1)),m=!lR.test(b?b.toLowerCase():"")}h=m}if(h)ct(a,"complete"),ct(a,"success");else{a.m=6;try{var A=2<wn(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",FE(a)}}finally{Rc(a)}}}}function Rc(a,d){if(a.g){VE(a);let h=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ct(a,"ready");try{h.onreadystatechange=m}catch{}}}function VE(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function wn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),HN(d)}};function jE(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function fR(a){let d={};a=(a.g&&2<=wn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(V(a[m]))continue;var h=D(a[m]);let b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=d[b]||[];d[b]=A,A.push(h)}T(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ss(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function BE(a){this.Aa=0,this.i=[],this.j=new _s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ss("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ss("baseRetryDelayMs",5e3,a),this.cb=Ss("retryDelaySeedMs",1e4,a),this.Wa=Ss("forwardChannelMaxRetries",2,a),this.wa=Ss("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new IE(a&&a.concurrentRequestLimit),this.Da=new cR,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=BE.prototype,t.la=8,t.G=1,t.connect=function(a,d,h,m){ut(0),this.W=a,this.H=d||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=QE(this,null,this.W),Mc(this)};function Hf(a){if(UE(a),a.G==3){var d=a.U++,h=In(a.I);if(ve(h,"SID",a.K),ve(h,"RID",d),ve(h,"TYPE","terminate"),As(a,h),d=new Yn(a,a.j,d),d.L=2,d.v=Ac(In(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=d.v,h=!0),h||(d.g=YE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),bc(d)}KE(a)}function Pc(a){a.g&&(zf(a),a.g.cancel(),a.g=null)}function UE(a){Pc(a),a.u&&(c.clearTimeout(a.u),a.u=null),kc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Mc(a){if(!wE(a.h)&&!a.s){a.s=!0;var d=a.Ga;ds||X_(),fs||(ds(),fs=!0),wf.add(d,a),a.B=0}}function hR(a,d){return TE(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=vs(g(a.Ga,a,d),WE(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let b=new Yn(this,this.j,a),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=HE(this,b,d),h=In(this.I),ve(h,"RID",a),ve(h,"CVER",22),this.D&&ve(h,"X-HTTP-Session-Id",this.D),As(this,h),A&&(this.O?d="headers="+encodeURIComponent(String(xE(A)))+"&"+d:this.m&&$f(h,this.m,A)),Uf(this.h,b),this.Ua&&ve(h,"TYPE","init"),this.P?(ve(h,"$req",d),ve(h,"SID","null"),b.T=!0,Lf(b,h,null)):Lf(b,h,d),this.G=2}}else this.G==3&&(a?$E(this,a):this.i.length==0||wE(this.h)||$E(this))};function $E(a,d){var h;d?h=d.l:h=a.U++;let m=In(a.I);ve(m,"SID",a.K),ve(m,"RID",h),ve(m,"AID",a.T),As(a,m),a.m&&a.o&&$f(m,a.m,a.o),h=new Yn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=HE(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Uf(a.h,h),Lf(h,m,d)}function As(a,d){a.H&&de(a.H,function(h,m){ve(d,m,h)}),a.l&&CE({},function(h,m){ve(d,m,h)})}function HE(a,d,h){h=Math.min(a.i.length,h);var m=a.l?g(a.l.Na,a.l,a):null;e:{var b=a.i;let A=-1;for(;;){let x=["count="+h];A==-1?0<h?(A=b[0].g,x.push("ofs="+A)):A=0:x.push("ofs="+A);let he=!0;for(let Ge=0;Ge<h;Ge++){let ae=b[Ge].g,Xe=b[Ge].map;if(ae-=A,0>ae)A=Math.max(0,b[Ge].g-100),he=!1;else try{uR(Xe,x,"req"+ae+"_")}catch{m&&m(Xe)}}if(he){m=x.join("&");break e}}}return a=a.i.splice(0,h),d.D=a,m}function qE(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;ds||X_(),fs||(ds(),fs=!0),wf.add(d,a),a.v=0}}function qf(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=vs(g(a.Fa,a),WE(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,zE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=vs(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Pc(this),zE(this))};function zf(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function zE(a){a.g=new Yn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=In(a.qa);ve(d,"RID","rpc"),ve(d,"SID",a.K),ve(d,"AID",a.T),ve(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&ve(d,"TO",a.ja),ve(d,"TYPE","xmlhttp"),As(a,d),a.m&&a.o&&$f(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Ac(In(d)),h.m=null,h.P=!0,vE(h,a)}t.Za=function(){this.C!=null&&(this.C=null,Pc(this),qf(this),ut(19))};function kc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function GE(a,d){var h=null;if(a.g==d){kc(a),zf(a),a.g=null;var m=2}else if(Bf(a.h,d))h=d.D,DE(a.h,d),m=1;else return;if(a.G!=0){if(d.o)if(m==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var b=a.B;m=wc(),ct(m,new pE(m,h)),Mc(a)}else qE(a);else if(b=d.s,b==3||b==0&&0<d.X||!(m==1&&hR(a,d)||m==2&&qf(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),b){case 1:qr(a,5);break;case 4:qr(a,10);break;case 3:qr(a,6);break;default:qr(a,2)}}}function WE(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function qr(a,d){if(a.j.info("Error code "+d),d==2){var h=g(a.fb,a),m=a.Xa;let b=!m;m=new Hr(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Cc(m,"https"),Ac(m),b?sR(m.toString(),h):aR(m.toString(),h)}else ut(2);a.G=0,a.l&&a.l.sa(d),KE(a),UE(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function KE(a){if(a.G=0,a.ka=[],a.l){let d=bE(a.h);(d.length!=0||a.i.length!=0)&&(N(a.ka,d),N(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function QE(a,d,h){var m=h instanceof Hr?In(h):new Hr(h);if(m.g!="")d&&(m.g=d+"."+m.g),Sc(m,m.s);else{var b=c.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Hr(null);m&&Cc(A,m),d&&(A.g=d),b&&Sc(A,b),h&&(A.l=h),m=A}return h=a.D,d=a.ya,h&&d&&ve(m,h,d),ve(m,"VER",a.la),As(a,m),m}function YE(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Te(new Ds({eb:h})):new Te(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZE(){}t=ZE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xc(){}xc.prototype.g=function(a,d){return new Et(a,d)};function Et(a,d){Je.call(this),this.g=new BE(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!V(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Gi(this)}C(Et,Je),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){Hf(this.g)},Et.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Pf(a),a=h);d.i.push(new YN(d.Ya++,a)),d.G==3&&Mc(d)},Et.prototype.N=function(){this.g.l=null,delete this.j,Hf(this.g),delete this.g,Et.aa.N.call(this)};function JE(a){kf.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}C(JE,kf);function XE(){xf.call(this),this.status=1}C(XE,xf);function Gi(a){this.g=a}C(Gi,ZE),Gi.prototype.ua=function(){ct(this.g,"a")},Gi.prototype.ta=function(a){ct(this.g,new JE(a))},Gi.prototype.sa=function(a){ct(this.g,new XE)},Gi.prototype.ra=function(){ct(this.g,"b")},xc.prototype.createWebChannel=xc.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,My=Un.createWebChannelTransport=function(){return new xc},Py=Un.getStatEventTarget=function(){return wc()},Ry=Un.Event=Ur,Td=Un.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Tc.NO_ERROR=0,Tc.TIMEOUT=8,Tc.HTTP_ERROR=6,Qa=Un.ErrorCode=Tc,gE.COMPLETE="complete",Ny=Un.EventType=gE,lE.EventType=ms,ms.OPEN="a",ms.CLOSE="b",ms.ERROR="c",ms.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Bo=Un.WebChannel=lE,Jj=Un.FetchXmlHttpFactory=Ds,Te.prototype.listenOnce=Te.prototype.L,Te.prototype.getLastError=Te.prototype.Ka,Te.prototype.getLastErrorCode=Te.prototype.Ba,Te.prototype.getStatus=Te.prototype.Z,Te.prototype.getResponseJson=Te.prototype.Oa,Te.prototype.getResponseText=Te.prototype.oa,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Ha,Ay=Un.XhrIo=Te}).apply(typeof wd<"u"?wd:typeof self<"u"?self:typeof window<"u"?window:{});var eA="@firebase/firestore",tA="4.8.0";var qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qe.UNAUTHENTICATED=new qe(null),qe.GOOGLE_CREDENTIALS=new qe("google-credentials-uid"),qe.FIRST_PARTY=new qe("first-party-uid"),qe.MOCK_USER=new qe("mock-user");var ss="11.10.0";var Fi=new un("@firebase/firestore");function Uo(){return Fi.logLevel}function L(t,...e){if(Fi.logLevel<=ne.DEBUG){let n=e.map(I_);Fi.debug(`Firestore (${ss}): ${t}`,...n)}}function Hn(t,...e){if(Fi.logLevel<=ne.ERROR){let n=e.map(I_);Fi.error(`Firestore (${ss}): ${t}`,...n)}}function xr(t,...e){if(Fi.logLevel<=ne.WARN){let n=e.map(I_);Fi.warn(`Firestore (${ss}): ${t}`,...n)}}function I_(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function U(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,WA(t,r,n)}function WA(t,e,n){let r=`FIRESTORE (${ss}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Hn(r),new Error(r)}function le(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||WA(e,i,r)}function G(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends bt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var hn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Rd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ly=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qe.UNAUTHENTICATED))}shutdown(){}},Vy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},jy=class{constructor(e){this.t=e,this.currentUser=qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new hn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new hn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new hn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string",31837,{l:r}),new Rd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string",2055,{h:e}),new qe(e)}},By=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=qe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Uy=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new By(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Pd=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$y=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ct(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){le(this.o===void 0,3512);let r=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Pd(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Pd(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Xj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function KA(){return new TextEncoder}var tc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Xj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ee(t,e){return t<e?-1:t>e?1:0}function Hy(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ee(r,i);{let o=KA(),s=eB(o.encode(nA(t,n)),o.encode(nA(e,n)));return s!==0?s:ee(r,i)}}n+=r>65535?2:1}return ee(t.length,e.length)}function nA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function eB(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ee(t[n],e[n]);return ee(t.length,e.length)}function Ko(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var rA="__name__",Md=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&U(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&U(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ee(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):Hy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bn.fromString(e.substring(4,e.length-2))}},Ie=class t extends Md{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},tB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,At=class t extends Md{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return tB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rA}static keyField(){return new t([rA])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new O(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new O(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new O(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var B=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ie.fromString(e))}static fromName(e){return new t(Ie.fromString(e).popFirst(5))}static empty(){return new t(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ie(e.slice()))}};function QA(t,e,n){if(!n)throw new O(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nB(t,e,n,r){if(e===!0&&r===!0)throw new O(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iA(t){if(!B.isDocumentKey(t))throw new O(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oA(t){if(B.isDocumentKey(t))throw new O(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function YA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ff(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":U(12329,{type:typeof t})}function pn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new O(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ff(t);throw new O(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Fe(t,e){let n={typeString:t};return e&&(n.value=e),n}function pc(t,e){if(!YA(t))throw new O(P.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new O(P.INVALID_ARGUMENT,n);return!0}var sA=-62135596800,aA=1e6,Le=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*aA);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new O(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new O(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<sA)throw new O(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aA}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pc(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-sA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:Fe("string",Le._jsonSchemaVersion),seconds:Fe("number"),nanoseconds:Fe("number")};var Q=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Le(0,0))}static max(){return new t(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var nc=-1,qy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};qy.UNKNOWN_ID=-1;function rB(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new Li(i,B.empty(),e)}function iB(t){return new Li(t.readTime,t.key,nc)}var Li=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Q.min(),B.empty(),nc)}static max(){return new t(Q.max(),B.empty(),nc)}};function oB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=B.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}var sB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function as(t){return _(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==sB)throw t;L("LocalStore","Unexpectedly lost primary lease")})}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&U(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(f=>{s[l]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function aB(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cs(t){return t.name==="IndexedDbTransactionError"}var w_=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),T_=-1;function hf(t){return t==null}function rc(t){return t===0&&1/t==-1/0}function cB(t){return typeof t=="number"&&Number.isInteger(t)&&!rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ZA="";function uB(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cA(e)),e=lB(t.get(n),e);return cA(e)}function lB(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case ZA:n+="";break;default:n+=o}}return n}function cA(t){return t+ZA+""}var dB="remoteDocuments",JA="owner";var XA="mutationQueues";var e0="mutations";var t0="documentMutations",fB="remoteDocumentsV14";var n0="remoteDocumentGlobal";var r0="targets";var i0="targetDocuments";var o0="targetGlobal",s0="collectionParents";var a0="clientMetadata";var c0="bundles";var u0="namedQueries";var hB="indexConfiguration";var pB="indexState";var gB="indexEntries";var l0="documentOverlays";var mB="globals";var yB=[XA,e0,t0,dB,r0,JA,o0,i0,a0,n0,s0,c0,u0],nee=[...yB,l0],vB=[XA,e0,t0,fB,r0,JA,o0,i0,a0,n0,s0,c0,u0,l0],_B=vB,EB=[..._B,hB,pB,gB];var ree=[...EB,mB];function uA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Br(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function d0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ne=class t{constructor(e,n){this.comparator=e,this.root=n||gn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zo(this.root,e,this.comparator,!1)}getReverseIterator(){return new zo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zo(this.root,e,this.comparator,!0)}},zo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},gn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw U(43730,{key:this.key,value:this.value});if(this.right.isRed())throw U(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw U(27949);return e+(this.isRed()?0:1)}};gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw U(57766)}get value(){throw U(16141)}get color(){throw U(16727)}get left(){throw U(29726)}get right(){throw U(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ze=class t{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kd(this.data.getIterator())}getIteratorFrom(e){return new kd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},kd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ft=class t{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new t([])}unionWith(e){let n=new ze(At.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ko(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var xd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var at=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xd("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};at.EMPTY_BYTE_STRING=new at("");var IB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qn(t){if(le(!!t,39018),typeof t=="string"){let e=0,n=IB.exec(t);if(le(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ee(t.seconds),nanos:Ee(t.nanos)}}function Ee(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zn(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}var f0="server_timestamp",h0="__type__",p0="__previous_value__",g0="__local_write_time__";function D_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[h0])===null||n===void 0?void 0:n.stringValue)===f0}function pf(t){let e=t.mapValue.fields[p0];return D_(e)?pf(e):e}function ic(t){let e=qn(t.mapValue.fields[g0].timestampValue);return new Le(e.seconds,e.nanos)}var Gy=class{constructor(e,n,r,i,o,s,c,u,l,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},Od="(default)",Fd=class t{constructor(e,n){this.projectId=e,this.database=n||Od}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Od}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var b_="__type__",m0="__max__",Dd={mapValue:{fields:{__type__:{stringValue:m0}}}},C_="__vector__",Qo="value";function Or(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?D_(t)?4:v0(t)?9007199254740991:y0(t)?10:11:U(28295,{value:t})}function vn(t,e){if(t===e)return!0;let n=Or(t);if(n!==Or(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ic(t).isEqual(ic(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=qn(i.timestampValue),c=qn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return zn(i.bytesValue).isEqual(zn(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ee(i.geoPointValue.latitude)===Ee(o.geoPointValue.latitude)&&Ee(i.geoPointValue.longitude)===Ee(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ee(i.integerValue)===Ee(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ee(i.doubleValue),c=Ee(o.doubleValue);return s===c?rc(s)===rc(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return Ko(t.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(uA(s)!==uA(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!vn(s[u],c[u])))return!1;return!0})(t,e);default:return U(52216,{left:t})}}function oc(t,e){return(t.values||[]).find(n=>vn(n,e))!==void 0}function Yo(t,e){if(t===e)return 0;let n=Or(t),r=Or(e);if(n!==r)return ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=Ee(o.integerValue||o.doubleValue),u=Ee(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return lA(t.timestampValue,e.timestampValue);case 4:return lA(ic(t),ic(e));case 5:return Hy(t.stringValue,e.stringValue);case 6:return(function(o,s){let c=zn(o),u=zn(s);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let f=ee(c[l],u[l]);if(f!==0)return f}return ee(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=ee(Ee(o.latitude),Ee(s.latitude));return c!==0?c:ee(Ee(o.longitude),Ee(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return dA(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var c,u,l,f;let p=o.fields||{},g=s.fields||{},y=(c=p[Qo])===null||c===void 0?void 0:c.arrayValue,C=(u=g[Qo])===null||u===void 0?void 0:u.arrayValue,R=ee(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((f=C?.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:dA(y,C)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Dd.mapValue&&s===Dd.mapValue)return 0;if(o===Dd.mapValue)return 1;if(s===Dd.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let g=Hy(u[p],f[p]);if(g!==0)return g;let y=Yo(c[u[p]],l[f[p]]);if(y!==0)return y}return ee(u.length,f.length)})(t.mapValue,e.mapValue);default:throw U(23264,{le:n})}}function lA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);let n=qn(t),r=qn(e),i=ee(n.seconds,r.seconds);return i!==0?i:ee(n.nanos,r.nanos)}function dA(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Yo(n[i],r[i]);if(o)return o}return ee(n.length,r.length)}function Zo(t){return Wy(t)}function Wy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=qn(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return zn(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return B.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Wy(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Wy(n.fields[s])}`;return i+"}"})(t.mapValue):U(61005,{value:t})}function Sd(t){switch(Or(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=pf(t);return e?16+Sd(e):16;case 5:return 2*t.stringValue.length;case 6:return zn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Sd(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Br(r.fields,(o,s)=>{i+=o.length+Sd(s)}),i})(t.mapValue);default:throw U(13486,{value:t})}}function fA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ky(t){return!!t&&"integerValue"in t}function S_(t){return!!t&&"arrayValue"in t}function hA(t){return!!t&&"nullValue"in t}function pA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ad(t){return!!t&&"mapValue"in t}function y0(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[b_])===null||n===void 0?void 0:n.stringValue)===C_}function Za(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Br(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Za(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Za(t.arrayValue.values[n]);return e}return Object.assign({},t)}function v0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===m0}var oee={mapValue:{fields:{[b_]:{stringValue:C_},[Qo]:{arrayValue:{}}}}};var St=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ad(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Za(n)}setAll(e){let n=At.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=Za(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Ad(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ad(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Br(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Za(this.value))}};function _0(t){let e=[];return Br(t.fields,(n,r)=>{let i=new At([n]);if(Ad(r)){let o=_0(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ft(e)}var Yt=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,Q.min(),Q.min(),Q.min(),St.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Q.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Q.min(),Q.min(),St.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Q.min(),Q.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Jo=class{constructor(e,n){this.position=e,this.inclusive=n}};function gA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(s.referenceValue),n.key):r=Yo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function mA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vn(t.position[n],e.position[n]))return!1;return!0}var Vi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function wB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ld=class{},Oe=class t extends Ld{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Yy(e,n,r):n==="array-contains"?new Xy(e,r):n==="in"?new ev(e,r):n==="not-in"?new tv(e,r):n==="array-contains-any"?new nv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Zy(e,r):new Jy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Yo(n,this.value)):n!==null&&Or(this.value)===Or(n)&&this.matchesComparison(Yo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return U(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Zt=class t extends Ld{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return E0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function E0(t){return t.op==="and"}function I0(t){return TB(t)&&E0(t)}function TB(t){for(let e of t.filters)if(e instanceof Zt)return!1;return!0}function Qy(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+Zo(t.value);if(I0(t))return t.filters.map(e=>Qy(e)).join(",");{let e=t.filters.map(n=>Qy(n)).join(",");return`${t.op}(${e})`}}function w0(t,e){return t instanceof Oe?(function(r,i){return i instanceof Oe&&r.op===i.op&&r.field.isEqual(i.field)&&vn(r.value,i.value)})(t,e):t instanceof Zt?(function(r,i){return i instanceof Zt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&w0(s,i.filters[c]),!0):!1})(t,e):void U(19439)}function T0(t){return t instanceof Oe?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zo(n.value)}`})(t):t instanceof Zt?(function(n){return n.op.toString()+" {"+n.getFilters().map(T0).join(" ,")+"}"})(t):"Filter"}var Yy=class extends Oe{constructor(e,n,r){super(e,n,r),this.key=B.fromName(r.referenceValue)}matches(e){let n=B.comparator(e.key,this.key);return this.matchesComparison(n)}},Zy=class extends Oe{constructor(e,n){super(e,"in",n),this.keys=D0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Jy=class extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=D0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function D0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>B.fromName(r.referenceValue))}var Xy=class extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return S_(n)&&oc(n.arrayValue,this.value)}},ev=class extends Oe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&oc(this.value.arrayValue,n)}},tv=class extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!oc(this.value.arrayValue,n)}},nv=class extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!S_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>oc(this.value.arrayValue,r))}};var rv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Pe=null}};function yA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new rv(t,e,n,r,i,o,s)}function A_(t){let e=G(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),hf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zo(r)).join(",")),e.Pe=n}return e.Pe}function N_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!w0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mA(t.startAt,e.startAt)&&mA(t.endAt,e.endAt)}function iv(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Fr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function DB(t,e,n,r,i,o,s,c){return new Fr(t,e,n,r,i,o,s,c)}function R_(t){return new Fr(t)}function vA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function b0(t){return t.collectionGroup!==null}function Ja(t){let e=G(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new ze(At.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Vi(o,r))}),n.has(At.keyField().canonicalString())||e.Te.push(new Vi(At.keyField(),r))}return e.Te}function mn(t){let e=G(t);return e.Ie||(e.Ie=bB(e,Ja(t))),e.Ie}function bB(t,e){if(t.limitType==="F")return yA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Vi(i.field,o)});let n=t.endAt?new Jo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jo(t.startAt.position,t.startAt.inclusive):null;return yA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ov(t,e){let n=t.filters.concat([e]);return new Fr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sv(t,e,n){return new Fr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gf(t,e){return N_(mn(t),mn(e))&&t.limitType===e.limitType}function C0(t){return`${A_(mn(t))}|lt:${t.limitType}`}function $o(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>T0(i)).join(", ")}]`),hf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Zo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Zo(i)).join(",")),`Target(${r})`})(mn(t))}; limitType=${t.limitType})`}function mf(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Ja(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=gA(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,Ja(r),i)||r.endAt&&!(function(s,c,u){let l=gA(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,Ja(r),i))})(t,e)}function CB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function S0(t){return(e,n)=>{let r=!1;for(let i of Ja(t)){let o=SB(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function SB(t,e,n){let r=t.field.isKeyField()?B.comparator(e.key,n.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?Yo(u,l):U(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return U(19790,{direction:t.dir})}}var Gn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Br(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return d0(this.inner)}size(){return this.innerSize}};var AB=new Ne(B.comparator);function Wn(){return AB}var A0=new Ne(B.comparator);function Ya(...t){let e=A0;for(let n of t)e=e.insert(n.key,n);return e}function N0(t){let e=A0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Pi(){return Xa()}function R0(){return Xa()}function Xa(){return new Gn(t=>t.toString(),(t,e)=>t.isEqual(e))}var NB=new Ne(B.comparator),RB=new ze(B.comparator);function oe(...t){let e=RB;for(let n of t)e=e.add(n);return e}var PB=new ze(ee);function MB(){return PB}function P_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function P0(t){return{integerValue:""+t}}function kB(t,e){return cB(e)?P0(e):P_(t,e)}var Xo=class{constructor(){this._=void 0}};function xB(t,e,n){return t instanceof es?(function(i,o){let s={fields:{[h0]:{stringValue:f0},[g0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&D_(o)&&(o=pf(o)),o&&(s.fields[p0]=o),{mapValue:s}})(n,e):t instanceof ji?k0(t,e):t instanceof Bi?x0(t,e):(function(i,o){let s=M0(i,o),c=_A(s)+_A(i.Ee);return Ky(s)&&Ky(i.Ee)?P0(c):P_(i.serializer,c)})(t,e)}function OB(t,e,n){return t instanceof ji?k0(t,e):t instanceof Bi?x0(t,e):n}function M0(t,e){return t instanceof ts?(function(r){return Ky(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var es=class extends Xo{},ji=class extends Xo{constructor(e){super(),this.elements=e}};function k0(t,e){let n=O0(e);for(let r of t.elements)n.some(i=>vn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Bi=class extends Xo{constructor(e){super(),this.elements=e}};function x0(t,e){let n=O0(e);for(let r of t.elements)n=n.filter(i=>!vn(i,r));return{arrayValue:{values:n}}}var ts=class extends Xo{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function _A(t){return Ee(t.integerValue||t.doubleValue)}function O0(t){return S_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function FB(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof ji&&i instanceof ji||r instanceof Bi&&i instanceof Bi?Ko(r.elements,i.elements,vn):r instanceof ts&&i instanceof ts?vn(r.Ee,i.Ee):r instanceof es&&i instanceof es})(t.transform,e.transform)}var av=class{constructor(e,n){this.version=e,this.transformResults=n}},$n=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Nd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ns=class{};function F0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sc(t.key,$n.none()):new Ui(t.key,t.data,$n.none());{let n=t.data,r=St.empty(),i=new ze(At.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new _n(t.key,r,new Ft(i.toArray()),$n.none())}}function LB(t,e,n){t instanceof Ui?(function(i,o,s){let c=i.value.clone(),u=IA(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):t instanceof _n?(function(i,o,s){if(!Nd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=IA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(L0(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function ec(t,e,n,r){return t instanceof Ui?(function(o,s,c,u){if(!Nd(o.precondition,s))return c;let l=o.value.clone(),f=wA(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof _n?(function(o,s,c,u){if(!Nd(o.precondition,s))return c;let l=wA(o.fieldTransforms,u,s),f=s.data;return f.setAll(L0(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,c){return Nd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,n)}function VB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=M0(r.transform,i||null);o!=null&&(n===null&&(n=St.empty()),n.set(r.field,o))}return n||null}function EA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ko(r,i,(o,s)=>FB(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ui=class extends ns{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_n=class extends ns{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function L0(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function IA(t,e,n){let r=new Map;le(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,OB(s,c,n[i]))}return r}function wA(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,xB(o,s,e))}return r}var sc=class extends ns{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},cv=class extends ns{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var uv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&LB(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ec(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ec(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=R0();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=F0(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Ko(this.mutations,e.mutations,(n,r)=>EA(n,r))&&Ko(this.baseMutations,e.baseMutations,(n,r)=>EA(n,r))}},lv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){le(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return NB})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var dv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var fv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ke,se;function jB(t){switch(t){case P.OK:return U(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return U(15467,{code:t})}}function V0(t){if(t===void 0)return Hn("GRPC error has no .code"),P.UNKNOWN;switch(t){case ke.OK:return P.OK;case ke.CANCELLED:return P.CANCELLED;case ke.UNKNOWN:return P.UNKNOWN;case ke.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case ke.INTERNAL:return P.INTERNAL;case ke.UNAVAILABLE:return P.UNAVAILABLE;case ke.UNAUTHENTICATED:return P.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case ke.NOT_FOUND:return P.NOT_FOUND;case ke.ALREADY_EXISTS:return P.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return P.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case ke.ABORTED:return P.ABORTED;case ke.OUT_OF_RANGE:return P.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return P.UNIMPLEMENTED;case ke.DATA_LOSS:return P.DATA_LOSS;default:return U(39323,{code:t})}}(se=ke||(ke={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";var TA=null;var BB=new Bn([4294967295,4294967295],0);function DA(t){let e=KA().encode(t),n=new Sy;return n.update(e),new Uint8Array(n.digest())}function bA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Bn([n,r],0),new Bn([i,o],0)]}var hv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mi(`Invalid padding: ${n}`);if(r<0)throw new Mi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mi(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Bn.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Bn.fromNumber(r)));return i.compare(BB)===1&&(i=new Bn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=DA(e),[r,i]=bA(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.fe===0)return;let n=DA(e),[r,i]=bA(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Mi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Vd=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Q.min(),i,new Ne(ee),Wn(),oe())}},ac=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,oe(),oe(),oe())}};var Go=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},jd=class{constructor(e,n){this.targetId=e,this.De=n}},Bd=class{constructor(e,n,r=at.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ud=class{constructor(){this.ve=0,this.Ce=CA(),this.Fe=at.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=oe(),n=oe(),r=oe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:U(38017,{changeType:o})}}),new ac(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=CA()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,le(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},pv=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Wn(),this.je=bd(),this.Je=bd(),this.He=new Ne(ee)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:U(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(iv(o))if(r===0){let s=new B(o.path);this.Xe(n,s,Yt.newNoDocument(s,Q.min()))}else le(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let c=this._t(e),u=c?this.ut(c,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}TA?.ct((function(f,p,g,y,C){var R,N,k,V,W,ce;let je={localCacheCount:f,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},de=p.unchangedNames;return de&&(je.bloomFilter={applied:C===0,hashCount:(R=de?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(V=(k=(N=de?.bits)===null||N===void 0?void 0:N.bitmap)===null||k===void 0?void 0:k.length)!==null&&V!==void 0?V:0,padding:(ce=(W=de?.bits)===null||W===void 0?void 0:W.padding)!==null&&ce!==void 0?ce:0,mightContain:T=>{var v;return(v=y?.mightContain(T))!==null&&v!==void 0&&v}}),je})(s,e.De,this.We.lt(),c,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=zn(r).toUint8Array()}catch(u){if(u instanceof xd)return xr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new hv(s,i,o)}catch(u){return xr(u instanceof Mi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let c=this.st(s);if(c){if(o.current&&iv(c.target)){let u=new B(c.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Yt.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=oe();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Vd(e,n,this.He,this.ze,r);return this.ze=Wn(),this.je=bd(),this.Je=bd(),this.He=new Ne(ee),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Ud,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new ze(ee),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new ze(ee),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ud),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function bd(){return new Ne(B.comparator)}function CA(){return new Ne(B.comparator)}var UB={asc:"ASCENDING",desc:"DESCENDING"},$B={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HB={and:"AND",or:"OR"},gv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function mv(t,e){return t.useProto3Json||hf(e)?e:{value:e}}function $d(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qB(t,e){return $d(t,e.toTimestamp())}function yn(t){return le(!!t,49232),Q.fromTimestamp((function(n){let r=qn(n);return new Le(r.seconds,r.nanos)})(t))}function M_(t,e){return yv(t,e).canonicalString()}function yv(t,e){let n=(function(i){return new Ie(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function B0(t){let e=Ie.fromString(t);return le(z0(e),10190,{key:e.toString()}),e}function vv(t,e){return M_(t.databaseId,e.path)}function ky(t,e){let n=B0(e);if(n.get(1)!==t.databaseId.projectId)throw new O(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new O(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B($0(n))}function U0(t,e){return M_(t.databaseId,e)}function zB(t){let e=B0(t);return e.length===4?Ie.emptyPath():$0(e)}function _v(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $0(t){return le(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function SA(t,e,n){return{name:vv(t,e),fields:n.value.mapValue.fields}}function GB(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:U(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,f){return l.useProto3Json?(le(f===void 0||typeof f=="string",58123),at.fromBase64String(f||"")):(le(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),at.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let f=l.code===void 0?P.UNKNOWN:V0(l.code);return new O(f,l.message||"")})(s);n=new Bd(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ky(t,r.document.name),o=yn(r.document.updateTime),s=r.document.createTime?yn(r.document.createTime):Q.min(),c=new St({mapValue:{fields:r.document.fields}}),u=Yt.newFoundDocument(i,o,s,c),l=r.targetIds||[],f=r.removedTargetIds||[];n=new Go(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ky(t,r.document),o=r.readTime?yn(r.readTime):Q.min(),s=Yt.newNoDocument(i,o),c=r.removedTargetIds||[];n=new Go([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ky(t,r.document),o=r.removedTargetIds||[];n=new Go([],o,i,null)}else{if(!("filter"in e))return U(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new fv(i,o),c=r.targetId;n=new jd(c,s)}}return n}function WB(t,e){let n;if(e instanceof Ui)n={update:SA(t,e.key,e.value)};else if(e instanceof sc)n={delete:vv(t,e.key)};else if(e instanceof _n)n={update:SA(t,e.key,e.data),updateMask:nU(e.fieldMask)};else{if(!(e instanceof cv))return U(16599,{Rt:e.type});n={verify:vv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof es)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ji)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Bi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ts)return{fieldPath:s.field.canonicalString(),increment:c.Ee};throw U(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:qB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:U(27497)})(t,e.precondition)),n}function KB(t,e){return t&&t.length>0?(le(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?yn(i.updateTime):yn(o);return s.isEqual(Q.min())&&(s=yn(o)),new av(s,i.transformResults||[])})(n,e))):[]}function QB(t,e){return{documents:[U0(t,e.path)]}}function YB(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=U0(t,i);let o=(function(l){if(l.length!==0)return q0(Zt.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(f=>(function(g){return{field:Ho(g.field),direction:XB(g.dir)}})(f))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=mv(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function ZB(t){let e=zB(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){le(r===1,65062);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=(function(p){let g=H0(p);return g instanceof Zt&&I0(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(C){return new Vi(qo(C.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(g))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let g;return g=typeof p=="object"?p.value:p,hf(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new Jo(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Jo(y,g)})(n.endAt)),DB(e,i,s,o,c,"F",u,l)}function JB(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return U(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function H0(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=qo(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=qo(n.unaryFilter.field);return Oe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=qo(n.unaryFilter.field);return Oe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=qo(n.unaryFilter.field);return Oe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return U(61313);default:return U(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Oe.create(qo(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return U(58110);default:return U(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Zt.create(n.compositeFilter.filters.map(r=>H0(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return U(1026)}})(n.compositeFilter.op))})(t):U(30097,{filter:t})}function XB(t){return UB[t]}function eU(t){return $B[t]}function tU(t){return HB[t]}function Ho(t){return{fieldPath:t.canonicalString()}}function qo(t){return At.fromServerFormat(t.fieldPath)}function q0(t){return t instanceof Oe?(function(n){if(n.op==="=="){if(pA(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NAN"}};if(hA(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pA(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NOT_NAN"}};if(hA(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ho(n.field),op:eU(n.op),value:n.value}}})(t):t instanceof Zt?(function(n){let r=n.getFilters().map(i=>q0(i));return r.length===1?r[0]:{compositeFilter:{op:tU(n.op),filters:r}}})(t):U(54877,{filter:t})}function nU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function z0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var cc=class t{constructor(e,n,r,i,o=Q.min(),s=Q.min(),c=at.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ev=class{constructor(e){this.gt=e}};function rU(t){let e=ZB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sv(e,e.limit,"L"):e}var Hd=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ee(e.integerValue));else if("doubleValue"in e){let r=Ee(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),rc(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=qn(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(zn(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?v0(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):y0(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):U(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Qo,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ee(c)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),B.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Hd.Ut=new Hd;var Iv=class{constructor(){this.Dn=new wv}addToCollectionParentIndex(e,n){return this.Dn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Li.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Li.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},wv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ze(Ie.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ze(Ie.comparator)).toArray()}};var see=new Uint8Array(0);var AA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},G0=41943040,Ot=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Ot.DEFAULT_COLLECTION_PERCENTILE=10,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ot.DEFAULT=new Ot(G0,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ot.DISABLED=new Ot(-1,0,0);var uc=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var NA="LruGarbageCollector",iU=1048576;function RA([t,e],[n,r]){let i=ee(t,n);return i===0?ee(e,r):i}var Tv=class{constructor(e){this.Tr=e,this.buffer=new ze(RA),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();RA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Dv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){L(NA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){cs(n)?L(NA,"Ignoring IndexedDB error during garbage collection: ",n):yield as(n)}yield this.Rr(3e5)}))}},bv=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(w_.ue);let r=new Tv(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(AA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AA):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,c,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Uo()<=ne.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function oU(t,e){return new bv(t,e)}var Cv=class{constructor(){this.changes=new Gn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Sv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Av=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ec(r.mutation,i,Ft.empty(),Le.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){let i=Pi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Ya();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Pi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=Wn(),s=Xa(),c=(function(){return Xa()})();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof _n)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),ec(f.mutation,l,f.mutation.getFieldMask(),Le.now())):s.set(l.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>{var p;return c.set(l,new Sv(f,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=Xa(),i=new Ne((s,c)=>s-c),o=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||Ft.empty();f=c.applyToLocalView(l,f),r.set(u,f);let p=(i.get(c.batchId)||oe()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,f=u.value,p=R0();f.forEach(g=>{if(!o.has(g)){let y=F0(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return B.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):b0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):M.resolve(Pi()),c=nc,u=o;return s.next(l=>M.forEach(l,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,oe())).next(f=>({batchId:c,changes:N0(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(r=>{let i=Ya();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Ya();return this.indexManager.getCollectionParents(e,o).next(c=>M.forEach(c,u=>{let l=(function(p,g){return new Fr(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,Yt.newInvalidDocument(f)))});let c=Ya();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&ec(f.mutation,l,Ft.empty(),Le.now()),mf(n,l)&&(c=c.insert(u,l))}),c})}};var Nv=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return M.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:yn(i.createTime)}})(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:rU(i.bundledQuery),readTime:yn(i.readTime)}})(n)),M.resolve()}};var Rv=class{constructor(){this.overlays=new Ne(B.comparator),this.kr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Pi();return M.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),M.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){let i=Pi(),o=n.length+1,s=new B(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ne((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=Pi(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let c=Pi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>c.set(l,f)),!(c.size()>=i)););return M.resolve(c)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new dv(n,r));let o=this.kr.get(n);o===void 0&&(o=oe(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var Pv=class{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}};var lc=class{constructor(){this.qr=new ze(xe.Qr),this.$r=new ze(xe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new xe(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new xe(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new B(new Ie([])),r=new xe(n,e),i=new xe(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new B(new Ie([])),r=new xe(n,e),i=new xe(n,e+1),o=oe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new xe(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},xe=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return B.comparator(e.key,n.key)||ee(e.Hr,n.Hr)}static Ur(e,n){return ee(e.Hr,n.Hr)||B.comparator(e.key,n.key)}};var Mv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new ze(xe.Qr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new uv(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Yr=this.Yr.add(new xe(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,n){return M.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?T_:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new xe(n,0),i=new xe(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(ee);return n.forEach(i=>{let o=new xe(i,0),s=new xe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),M.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let s=new xe(new B(o),0),c=new ze(ee);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Hr)),!0)},s),M.resolve(this.ei(c))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){le(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return M.forEach(n.mutations,i=>{let o=new xe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new xe(n,0),i=this.Yr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var kv=class{constructor(e){this.ni=e,this.docs=(function(){return new Ne(B.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let r=Wn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Yt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Wn(),s=n.path,c=new B(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||oB(iB(f),r)<=0||(i.has(f.key)||mf(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,n,r,i){U(9500)}ri(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xv(this)}getSize(e){return M.resolve(this.size)}},xv=class extends Cv{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var Ov=class{constructor(e){this.persistence=e,this.ii=new Gn(n=>A_(n),N_),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.si=0,this.oi=new lc,this.targetCount=0,this._i=uc.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),M.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new uc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.hr(n),M.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.oi.containsKey(n))}};var qd=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new w_(0),this.ci=!1,this.ci=!0,this.li=new Pv,this.referenceDelegate=e(this),this.hi=new Ov(this),this.indexManager=new Iv,this.remoteDocumentCache=(function(i){return new kv(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Ev(n),this.Ti=new Nv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Rv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Mv(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){L("MemoryPersistence","Starting transaction:",e);let i=new Fv(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return M.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},Fv=class extends zy{constructor(e){super(),this.currentSequenceNumber=e}},Lv=class t{constructor(e){this.persistence=e,this.Ai=new lc,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw U(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,r=>{let i=B.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,Q.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return M.or([()=>M.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},zd=class t{constructor(e,n){this.persistence=e,this.gi=new Gn(r=>uB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=oU(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return M.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(c=>{c||(r++,o.removeEntry(s,Q.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sd(e.data.value)),n}Sr(e,n,r){return M.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Vv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=oe(),i=oe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var jv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Bv=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return bC()?8:aB(He())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new jv;return this.ws(e,n,s).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,n,s,c.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Uo()<=ne.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",$o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(Uo()<=ne.DEBUG&&L("QueryEngine","Query:",$o(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Uo()<=ne.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",$o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mn(n))):M.resolve())}ps(e,n){if(vA(n))return M.resolve(null);let r=mn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=sv(n,null,"F"),r=mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=oe(...o);return this.gs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,c);return this.Ds(n,l,s,u.readTime)?this.ps(e,sv(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return vA(n)||i.isEqual(Q.min())?M.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?M.resolve(null):(Uo()<=ne.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$o(n)),this.vs(e,s,n,rB(i,nc)).next(c=>c))})}bs(e,n){let r=new ze(S0(e));return n.forEach((i,o)=>{mf(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Uo()<=ne.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",$o(n)),this.gs.getDocumentsMatchingQuery(e,n,Li.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var k_="LocalStore",sU=3e8,Uv=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Ne(ee),this.Ms=new Gn(o=>A_(o),N_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Av(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function aU(t,e,n,r){return new Uv(t,e,n,r)}function W0(t,e){return _(this,null,function*(){let n=G(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=oe();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){c.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:c}))})})})}function cU(t,e){let n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,f){let p=l.batch,g=p.keys(),y=M.resolve();return g.forEach(C=>{y=y.next(()=>f.getEntry(u,C)).next(R=>{let N=l.docVersions.get(C);le(N!==null,48541),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),f.addEntry(R)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=oe();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function K0(t){let e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function uU(t,e){let n=G(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let c=[];e.targetChanges.forEach((f,p)=>{let g=i.get(p);if(!g)return;c.push(n.hi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,f.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(at.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),(function(R,N,k){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=sU?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(g,y,f)&&c.push(n.hi.updateTargetData(o,y))});let u=Wn(),l=oe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(lU(o,s,e.documentUpdates).next(f=>{u=f.Ls,l=f.ks})),!r.isEqual(Q.min())){let f=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return M.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function lU(t,e,n){let r=oe(),i=oe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Wn();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):L(k_,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function dU(t,e){let n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=T_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fU(t,e){let n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new cc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function $v(t,e,n){return _(this,null,function*(){let r=G(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!cs(s))throw s;L(k_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function PA(t,e,n){let r=G(t),i=Q.min(),o=oe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,f){let p=G(u),g=p.Ms.get(f);return g!==void 0?M.resolve(p.Fs.get(g)):p.hi.getTargetData(l,f)})(r,s,mn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:Q.min(),n?o:oe())).next(c=>(hU(r,CB(e),c),{documents:c,qs:o})))}function hU(t,e,n){let r=t.xs.get(e)||Q.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var Gd=class{constructor(){this.activeTargetIds=MB()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Hv=class{constructor(){this.Fo=new Gd,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Gd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var qv=class{xo(e){}shutdown(){}};var MA="ConnectivityMonitor",Wd=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){L(MA,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){L(MA,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Cd=null;function zv(){return Cd===null?Cd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cd++,"0x"+Cd.toString(16)}var xy="RestConnection",pU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Gv=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Od?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=zv(),c=this.Go(e,n.toUriEncodedString());L(xy,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(c),f=vr(l);return this.jo(e,c,u,r,f).then(p=>(L(xy,`Received RPC '${e}' ${s}: `,p),p),p=>{throw xr(xy,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ss})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=pU[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var Wv=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var st="WebChannelConnection",Kv=class extends Gv{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=zv();return new Promise((c,u)=>{let l=new Ay;l.setWithCredentials(!0),l.listenOnce(Ny.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Qa.NO_ERROR:let p=l.getResponseJson();L(st,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case Qa.TIMEOUT:L(st,`RPC '${e}' ${s} timed out`),u(new O(P.DEADLINE_EXCEEDED,"Request time out"));break;case Qa.HTTP_ERROR:let g=l.getStatus();if(L(st,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let R=(function(k){let V=k.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(V)>=0?V:P.UNKNOWN})(C.status);u(new O(R,C.message))}else u(new O(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new O(P.UNAVAILABLE,"Connection failed."));break;default:U(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{L(st,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);L(st,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",f,r,15)})}P_(e,n,r){let i=zv(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=My(),c=Py(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=o.join("");L(st,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.T_(p);let g=!1,y=!1,C=new Wv({Ho:N=>{y?L(st,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(L(st,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),L(st,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Yo:()=>p.close()}),R=(N,k,V)=>{N.listen(k,W=>{try{V(W)}catch(ce){setTimeout(()=>{throw ce},0)}})};return R(p,Bo.EventType.OPEN,()=>{y||(L(st,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),R(p,Bo.EventType.CLOSE,()=>{y||(y=!0,L(st,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(p))}),R(p,Bo.EventType.ERROR,N=>{y||(y=!0,xr(st,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),C.__(new O(P.UNAVAILABLE,"The operation could not be completed")))}),R(p,Bo.EventType.MESSAGE,N=>{var k;if(!y){let V=N.data[0];le(!!V,16349);let W=V,ce=W?.error||((k=W[0])===null||k===void 0?void 0:k.error);if(ce){L(st,`RPC '${e}' stream ${i} received error:`,ce);let je=ce.status,de=(function(I){let w=ke[I];if(w!==void 0)return V0(w)})(je),T=ce.message;de===void 0&&(de=P.INTERNAL,T="Unknown error status: "+je+" with message "+ce.message),y=!0,C.__(new O(de,T)),p.close()}else L(st,`RPC '${e}' stream ${i} received:`,V),C.a_(V)}}),R(c,Ry.STAT_EVENT,N=>{N.stat===Td.PROXY?L(st,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Td.NOPROXY&&L(st,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function Oy(){return typeof document<"u"?document:null}function yf(t){return new gv(t,!0)}var Kd=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var kA="PersistentStream",Qd=class{constructor(e,n,r,i,o,s,c,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Kd(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(Hn(n.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new O(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return L(kA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(L(kA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Qv=class extends Qd{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=GB(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?yn(s.readTime):Q.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=_v(this.serializer),n.addTarget=(function(o,s){let c,u=s.target;if(c=iv(u)?{documents:QB(o,u)}:{query:YB(o,u).Vt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=j0(o,s.resumeToken);let l=mv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(Q.min())>0){c.readTime=$d(o,s.snapshotVersion.toTimestamp());let l=mv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=JB(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=_v(this.serializer),n.removeTarget=e,this.k_(n)}},Yv=class extends Qd{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=KB(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=_v(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>WB(this.serializer,r))};this.k_(n)}};var Zv=class{},Jv=class extends Zv{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new O(P.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,yv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(P.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Jo(e,yv(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(P.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Xv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Hn(n),this._a=!1):L("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var $i="RemoteStore",e_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Hi(this)&&(L($i,"Restarting streams for network reachability change."),yield(function(u){return _(this,null,function*(){let l=G(u);l.Ia.add(4),yield gc(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield vf(l)})})(this))}))}),this.Aa=new Xv(r,i)}};function vf(t){return _(this,null,function*(){if(Hi(t))for(let e of t.da)yield e(!0)})}function gc(t){return _(this,null,function*(){for(let e of t.da)yield e(!1)})}function Q0(t,e){let n=G(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),L_(n)?F_(n):us(n).x_()&&O_(n,e))}function x_(t,e){let n=G(t),r=us(n);n.Ta.delete(e),r.x_()&&Y0(n,e),n.Ta.size===0&&(r.x_()?r.B_():Hi(n)&&n.Aa.set("Unknown"))}function O_(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}us(t).H_(e)}function Y0(t,e){t.Ra.$e(e),us(t).Y_(e)}function F_(t){t.Ra=new pv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),us(t).start(),t.Aa.aa()}function L_(t){return Hi(t)&&!us(t).M_()&&t.Ta.size>0}function Hi(t){return G(t).Ia.size===0}function Z0(t){t.Ra=void 0}function gU(t){return _(this,null,function*(){t.Aa.set("Online")})}function mU(t){return _(this,null,function*(){t.Ta.forEach((e,n)=>{O_(t,e)})})}function yU(t,e){return _(this,null,function*(){Z0(t),L_(t)?(t.Aa.la(e),F_(t)):t.Aa.set("Unknown")})}function vU(t,e,n){return _(this,null,function*(){if(t.Aa.set("Online"),e instanceof Bd&&e.state===2&&e.cause)try{yield(function(i,o){return _(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ta.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ta.delete(c),i.Ra.removeTarget(c))})})(t,e)}catch(r){L($i,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Yd(t,r)}else if(e instanceof Go?t.Ra.Ye(e):e instanceof jd?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Q.min()))try{let r=yield K0(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let c=o.Ra.Pt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ta.get(l);f&&o.Ta.set(l,f.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let f=o.Ta.get(u);if(!f)return;o.Ta.set(u,f.withResumeToken(at.EMPTY_BYTE_STRING,f.snapshotVersion)),Y0(o,u);let p=new cc(f.target,u,l,f.sequenceNumber);O_(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(t,n))}catch(r){L($i,"Failed to raise snapshot:",r),yield Yd(t,r)}})}function Yd(t,e,n){return _(this,null,function*(){if(!cs(e))throw e;t.Ia.add(1),yield gc(t),t.Aa.set("Offline"),n||(n=()=>K0(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){L($i,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield vf(t)}))})}function J0(t,e){return e().catch(n=>Yd(t,n,e))}function _f(t){return _(this,null,function*(){let e=G(t),n=Lr(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:T_;for(;_U(e);)try{let i=yield dU(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,EU(e,i)}catch(i){yield Yd(e,i)}X0(e)&&eN(e)})}function _U(t){return Hi(t)&&t.Pa.length<10}function EU(t,e){t.Pa.push(e);let n=Lr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function X0(t){return Hi(t)&&!Lr(t).M_()&&t.Pa.length>0}function eN(t){Lr(t).start()}function IU(t){return _(this,null,function*(){Lr(t).na()})}function wU(t){return _(this,null,function*(){let e=Lr(t);for(let n of t.Pa)e.X_(n.mutations)})}function TU(t,e,n){return _(this,null,function*(){let r=t.Pa.shift(),i=lv.from(r,e,n);yield J0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield _f(t)})}function DU(t,e){return _(this,null,function*(){e&&Lr(t).Z_&&(yield(function(r,i){return _(this,null,function*(){if((function(s){return jB(s)&&s!==P.ABORTED})(i.code)){let o=r.Pa.shift();Lr(r).N_(),yield J0(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield _f(r)}})})(t,e)),X0(t)&&eN(t)})}function xA(t,e){return _(this,null,function*(){let n=G(t);n.asyncQueue.verifyOperationInProgress(),L($i,"RemoteStore received new credentials");let r=Hi(n);n.Ia.add(3),yield gc(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield vf(n)})}function bU(t,e){return _(this,null,function*(){let n=G(t);e?(n.Ia.delete(2),yield vf(n)):e||(n.Ia.add(2),yield gc(n),n.Aa.set("Unknown"))})}function us(t){return t.Va||(t.Va=(function(n,r,i){let o=G(n);return o.ia(),new Qv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:gU.bind(null,t),e_:mU.bind(null,t),n_:yU.bind(null,t),J_:vU.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.Va.N_(),L_(t)?F_(t):t.Aa.set("Unknown")):(yield t.Va.stop(),Z0(t))}))),t.Va}function Lr(t){return t.ma||(t.ma=(function(n,r,i){let o=G(n);return o.ia(),new Yv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:IU.bind(null,t),n_:DU.bind(null,t),ea:wU.bind(null,t),ta:TU.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.ma.N_(),yield _f(t)):(yield t.ma.stop(),t.Pa.length>0&&(L($i,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var t_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function V_(t,e){if(Hn("AsyncQueue",`${e}: ${t}`),cs(t))return new O(P.UNAVAILABLE,`${e}: ${t}`);throw t}var Zd=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||B.comparator(n.key,r.key):(n,r)=>B.comparator(n.key,r.key),this.keyedMap=Ya(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Jd=class{constructor(){this.fa=new Ne(B.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):U(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},rs=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,Zd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var n_=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},r_=class{constructor(){this.queries=OA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=G(n),o=i.queries;i.queries=OA(),o.forEach((s,c)=>{for(let u of c.wa)u.onError(r)})})(this,new O(P.ABORTED,"Firestore shutting down"))}};function OA(){return new Gn(t=>C0(t),gf)}function tN(t,e){return _(this,null,function*(){let n=G(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new n_,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let c=V_(s,`Initialization of query '${$o(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&j_(n)})}function nN(t,e){return _(this,null,function*(){let n=G(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function CU(t,e){let n=G(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.wa)c.Ca(i)&&(r=!0);s.ya=i}}r&&j_(n)}function SU(t,e,n){let r=G(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function j_(t){t.Da.forEach(e=>{e.next()})}var i_,FA;(FA=i_||(i_={})).Fa="default",FA.Cache="cache";var Xd=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new rs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==i_.Cache}};var ef=class{constructor(e){this.key=e}},tf=class{constructor(e){this.key=e}},o_=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=oe(),this.mutatedKeys=oe(),this.Xa=S0(e),this.eu=new Zd(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Jd,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let g=i.get(f),y=mf(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;g&&y?g.data.isEqual(y.data)?C!==R&&(r.track({type:3,doc:y}),N=!0):this.iu(g,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(c=!0)):!g&&y?(r.track({type:0,doc:y}),N=!0):g&&!y&&(r.track({type:1,doc:g}),N=!0,(u||l)&&(c=!0)),N&&(y?(s=s.add(y),o=R?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:c,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((f,p)=>(function(y,C){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return U(20277,{At:N})}};return R(y)-R(C)})(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;let c=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new rs(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Jd,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=oe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new tf(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new ef(r))}),n}uu(e){this.Ha=e.qs,this.Za=oe();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return rs.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},B_="SyncEngine",s_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},a_=class{constructor(e){this.key=e,this.lu=!1}},c_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Gn(c=>C0(c),gf),this.Tu=new Map,this.Iu=new Set,this.du=new Ne(B.comparator),this.Eu=new Map,this.Au=new lc,this.Ru={},this.Vu=new Map,this.mu=uc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function AU(t,e,n=!0){return _(this,null,function*(){let r=cN(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield rN(r,e,n,!0),i})}function NU(t,e){return _(this,null,function*(){let n=cN(t);yield rN(n,e,!0,!1)})}function rN(t,e,n,r){return _(this,null,function*(){let i=yield fU(t.localStore,mn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=yield RU(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Q0(t.remoteStore,i),c})}function RU(t,e,n,r,i){return _(this,null,function*(){t.gu=(p,g,y)=>(function(R,N,k,V){return _(this,null,function*(){let W=N.view.nu(k);W.Ds&&(W=yield PA(R.localStore,N.query,!1).then(({documents:T})=>N.view.nu(T,W)));let ce=V&&V.targetChanges.get(N.targetId),je=V&&V.targetMismatches.get(N.targetId)!=null,de=N.view.applyChanges(W,R.isPrimaryClient,ce,je);return VA(R,N.targetId,de._u),de.snapshot})})(t,p,g,y);let o=yield PA(t.localStore,e,!0),s=new o_(e,o.qs),c=s.nu(o.documents),u=ac.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);VA(t,n,l._u);let f=new s_(e,n,s);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function PU(t,e,n){return _(this,null,function*(){let r=G(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!gf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield $v(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&x_(r.remoteStore,i.targetId),u_(r,i.targetId)}).catch(as))):(u_(r,i.targetId),yield $v(r.localStore,i.targetId,!0))})}function MU(t,e){return _(this,null,function*(){let n=G(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),x_(n.remoteStore,r.targetId))})}function kU(t,e,n){return _(this,null,function*(){let r=BU(t);try{let i=yield(function(s,c){let u=G(s),l=Le.now(),f=c.reduce((y,C)=>y.add(C.key),oe()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=Wn(),R=oe();return u.Os.getEntries(y,f).next(N=>{C=N,C.forEach((k,V)=>{V.isValidDocument()||(R=R.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(N=>{p=N;let k=[];for(let V of c){let W=VB(V,p.get(V.key).overlayedDocument);W!=null&&k.push(new _n(V.key,W,_0(W.value.mapValue),$n.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,c)}).next(N=>{g=N;let k=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,N.batchId,k)})}).then(()=>({batchId:g.batchId,changes:N0(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ne(ee)),l=l.insert(c,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),yield mc(r,i.changes),yield _f(r.remoteStore)}catch(i){let o=V_(i,"Failed to persist write");n.reject(o)}})}function iN(t,e){return _(this,null,function*(){let n=G(t);try{let r=yield uU(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?le(s.lu,14607):i.removedDocuments.size>0&&(le(s.lu,42227),s.lu=!1))}),yield mc(n,r,e)}catch(r){yield as(r)}})}function LA(t,e,n){let r=G(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=G(s);u.onlineState=c;let l=!1;u.queries.forEach((f,p)=>{for(let g of p.wa)g.va(c)&&(l=!0)}),l&&j_(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xU(t,e,n){return _(this,null,function*(){let r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ne(B.comparator);s=s.insert(o,Yt.newNoDocument(o,Q.min()));let c=oe().add(o),u=new Vd(Q.min(),new Map,new Ne(ee),s,c);yield iN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),U_(r)}else yield $v(r.localStore,e,!1).then(()=>u_(r,e,n)).catch(as)})}function OU(t,e){return _(this,null,function*(){let n=G(t),r=e.batch.batchId;try{let i=yield cU(n.localStore,e);sN(n,r,null),oN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield mc(n,i)}catch(i){yield as(i)}})}function FU(t,e,n){return _(this,null,function*(){let r=G(t);try{let i=yield(function(s,c){let u=G(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(le(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})})(r.localStore,e);sN(r,e,n),oN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield mc(r,i)}catch(i){yield as(i)}})}function oN(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function sN(t,e,n){let r=G(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function u_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||aN(t,r)})}function aN(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(x_(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),U_(t))}function VA(t,e,n){for(let r of n)r instanceof ef?(t.Au.addReference(r.key,e),LU(t,r)):r instanceof tf?(L(B_,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||aN(t,r.key)):U(19791,{yu:r})}function LU(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(L(B_,"New document in limbo: "+n),t.Iu.add(r),U_(t))}function U_(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new B(Ie.fromString(e)),r=t.mu.next();t.Eu.set(r,new a_(n)),t.du=t.du.insert(n,r),Q0(t.remoteStore,new cc(mn(R_(n.path)),r,"TargetPurposeLimboResolution",w_.ue))}}function mc(t,e,n){return _(this,null,function*(){let r=G(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{s.push(r.gu(u,e,n).then(l=>{var f;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(f=n?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Vv.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return _(this,null,function*(){let f=G(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,g=>M.forEach(g.Is,y=>f.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>M.forEach(g.ds,y=>f.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!cs(p))throw p;L(k_,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=f.Fs.get(g),C=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(C);f.Fs=f.Fs.insert(g,R)}}})})(r.localStore,o))})}function VU(t,e){return _(this,null,function*(){let n=G(t);if(!n.currentUser.isEqual(e)){L(B_,"User change. New user:",e.toKey());let r=yield W0(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(c=>{c.forEach(u=>{u.reject(new O(P.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield mc(n,r.Bs)}})}function jU(t,e){let n=G(t),r=n.Eu.get(e);if(r&&r.lu)return oe().add(r.key);{let i=oe(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let c=n.Pu.get(s);i=i.unionWith(c.view.tu)}return i}}function cN(t){let e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xU.bind(null,e),e.hu.J_=CU.bind(null,e.eventManager),e.hu.pu=SU.bind(null,e.eventManager),e}function BU(t){let e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FU.bind(null,e),e}var uN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=yf(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return aU(this.persistence,new Bv,n.initialUser,this.serializer)}Du(n){return new qd(Lv.Vi,this.serializer)}bu(n){return new Hv}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),l_=class extends uN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){le(this.persistence.referenceDelegate instanceof zd,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Dv(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?Ot.withCacheSize(this.cacheSizeBytes):Ot.DEFAULT;return new qd(r=>zd.Vi(r,n),this.serializer)}};var UU=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>LA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=VU.bind(null,this.syncEngine),yield bU(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new r_})()}createDatastore(n){let r=yf(n.databaseInfo.databaseId),i=(function(s){return new Kv(s)})(n.databaseInfo);return(function(s,c,u,l){return new Jv(s,c,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,c,u){return new e_(i,o,s,c,u)})(this.localStore,this.datastore,n.asyncQueue,r=>LA(this.syncEngine,r,0),(function(){return Wd.C()?new Wd:new qv})())}createSyncEngine(n,r){return(function(o,s,c,u,l,f,p){let g=new c_(o,s,c,u,l,f);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield(function(o){return _(this,null,function*(){let s=G(o);L($i,"RemoteStore shutting down."),s.Ia.add(5),yield gc(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var nf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Vr="FirestoreClient",d_=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qe.UNAUTHENTICATED,this.clientId=tc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){L(Vr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(L(Vr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=V_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Fy(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),L(Vr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield W0(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{xr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{L("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{xr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function jA(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield $U(t);L(Vr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>xA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>xA(e.remoteStore,i)),t._onlineComponents=e})}function $U(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L(Vr,"Using user provided OfflineComponentProvider");try{yield Fy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;xr("Error using user provided cache. Falling back to memory cache: "+n),yield Fy(t,new uN)}}else L(Vr,"Using default OfflineComponentProvider"),yield Fy(t,new l_(void 0));return t._offlineComponents})}function lN(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(L(Vr,"Using user provided OnlineComponentProvider"),yield jA(t,t._uninitializedComponentsProvider._online)):(L(Vr,"Using default OnlineComponentProvider"),yield jA(t,new UU))),t._onlineComponents})}function HU(t){return lN(t).then(e=>e.syncEngine)}function f_(t){return _(this,null,function*(){let e=yield lN(t),n=e.eventManager;return n.onListen=AU.bind(null,e.syncEngine),n.onUnlisten=PU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MU.bind(null,e.syncEngine),n})}function qU(t,e,n={}){let r=new hn;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return(function(o,s,c,u,l){let f=new nf({next:g=>{f.Ou(),s.enqueueAndForget(()=>nN(o,p)),g.fromCache&&u.source==="server"?l.reject(new O(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Xd(c,f,{includeMetadataChanges:!0,ka:!0});return tN(o,p)})(yield f_(t),t.asyncQueue,e,n,r)})),r.promise}function dN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var BA=new Map;var fN="firestore.googleapis.com",UA=!0,rf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fN,this.ssl=UA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:UA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=G0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iU)throw new O(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new O(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new O(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new O(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},is=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Ly;switch(r.type){case"firstParty":return new Uy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=BA.get(n);r&&(L("ComponentProvider","Removing Datastore"),BA.delete(n),r.terminate())})(this),Promise.resolve()}};function hN(t,e,n,r={}){var i;t=pn(t,is);let o=vr(e),s=t._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Wl(`https://${u}`),Kl("Firestore",!0)),s.host!==fN&&s.host!==u&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!cn(l,c)&&(t._setSettings(l),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=qe.MOCK_USER;else{f=_C(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new O(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new qe(g)}t._authCredentials=new Vy(new Rd(f,p))}}var jr=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ye=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(pc(n,t._jsonSchema))return new t(e,r||null,new B(Ie.fromString(n.referencePath)))}};Ye._jsonSchemaVersion="firestore/documentReference/1.0",Ye._jsonSchema={type:Fe("string",Ye._jsonSchemaVersion),referencePath:Fe("string")};var Rr=class t extends jr{constructor(e,n,r){super(e,n,R_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ye(this.firestore,null,new B(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function pN(t,e,...n){if(t=Ce(t),QA("collection","path",e),t instanceof is){let r=Ie.fromString(e,...n);return oA(r),new Rr(t,null,r)}{if(!(t instanceof Ye||t instanceof Rr))throw new O(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ie.fromString(e,...n));return oA(r),new Rr(t.firestore,null,r)}}function $_(t,e,...n){if(t=Ce(t),arguments.length===1&&(e=tc.newId()),QA("doc","path",e),t instanceof is){let r=Ie.fromString(e,...n);return iA(r),new Ye(t,null,new B(r))}{if(!(t instanceof Ye||t instanceof Rr))throw new O(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ie.fromString(e,...n));return iA(r),new Ye(t.firestore,t instanceof Rr?t.converter:null,new B(r))}}var $A="AsyncQueue",of=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Kd(this,"async_queue_retry"),this.oc=()=>{let r=Oy();r&&L($A,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=Oy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=Oy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new hn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!cs(e))throw e;L($A,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Hn("INTERNAL UNHANDLED ERROR: ",HA(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=t_.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&U(47125,{hc:HA(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function HA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function qA(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var Kn=class extends is{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new of,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new of(e),this._firestoreClient=void 0,yield e}})}};function gN(t,e){let n=typeof t=="object"?t:Ir(),r=typeof t=="string"?t:e||Od,i=Oo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=vC("firestore");o&&hN(i,...o)}return i}function H_(t){if(t._terminated)throw new O(P.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zU(t),t._firestoreClient}function zU(t){var e,n,r;let i=t._freezeSettings(),o=(function(c,u,l,f){return new Gy(c,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,dN(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new d_(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}})(t._componentsProvider))}var Pr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(at.fromBase64String(e))}catch(n){throw new O(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pc(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Pr._jsonSchemaVersion="firestore/bytes/1.0",Pr._jsonSchema={type:Fe("string",Pr._jsonSchemaVersion),bytes:Fe("string")};var os=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new O(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var dc=class{constructor(e){this._methodName=e}};var Mr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new O(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new O(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(pc(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Mr._jsonSchemaVersion="firestore/geoPoint/1.0",Mr._jsonSchema={type:Fe("string",Mr._jsonSchemaVersion),latitude:Fe("number"),longitude:Fe("number")};var kr=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pc(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new O(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};kr._jsonSchemaVersion="firestore/vectorValue/1.0",kr._jsonSchema={type:Fe("string",kr._jsonSchemaVersion),vectorValues:Fe("object")};var GU=/^__.*__$/,h_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _n(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ui(e,this.data,n,this.fieldTransforms)}},sf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _n(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function mN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw U(40011,{Ec:t})}}var p_=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return cf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(mN(this.Ec)&&GU.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},g_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yf(e)}Dc(e,n,r,i=!1){return new p_({Ec:e,methodName:n,bc:r,path:At.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function q_(t){let e=t._freezeSettings(),n=yf(t._databaseId);return new g_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WU(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);z_("Data must be an object, but it was:",s,r);let c=yN(r,s),u,l;if(o.merge)u=new Ft(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let g=m_(e,p,n);if(!s.contains(g))throw new O(P.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);_N(f,g)||f.push(g)}u=new Ft(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new h_(new St(c),u,l)}var af=class t extends dc{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function KU(t,e,n,r){let i=t.Dc(1,e,n);z_("Data must be an object, but it was:",i,r);let o=[],s=St.empty();Br(r,(u,l)=>{let f=G_(e,u,n);l=Ce(l);let p=i.gc(f);if(l instanceof af)o.push(f);else{let g=yc(l,p);g!=null&&(o.push(f),s.set(f,g))}});let c=new Ft(o);return new sf(s,c,i.fieldTransforms)}function QU(t,e,n,r,i,o){let s=t.Dc(1,e,n),c=[m_(e,r,n)],u=[i];if(o.length%2!=0)throw new O(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)c.push(m_(e,o[g])),u.push(o[g+1]);let l=[],f=St.empty();for(let g=c.length-1;g>=0;--g)if(!_N(l,c[g])){let y=c[g],C=u[g];C=Ce(C);let R=s.gc(y);if(C instanceof af)l.push(y);else{let N=yc(C,R);N!=null&&(l.push(y),f.set(y,N))}}let p=new Ft(l);return new sf(f,p,s.fieldTransforms)}function YU(t,e,n,r=!1){return yc(n,t.Dc(r?4:3,e))}function yc(t,e){if(vN(t=Ce(t)))return z_("Unsupported field value:",e,t),yN(t,e);if(t instanceof dc)return(function(r,i){if(!mN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=yc(c,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Le.fromDate(r);return{timestampValue:$d(i.serializer,o)}}if(r instanceof Le){let o=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$d(i.serializer,o)}}if(r instanceof Mr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pr)return{bytesValue:j0(i.serializer,r._byteString)};if(r instanceof Ye){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:M_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof kr)return(function(s,c){return{mapValue:{fields:{[b_]:{stringValue:C_},[Qo]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.wc("VectorValues must only contain numeric values.");return P_(c.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${ff(r)}`)})(t,e)}function yN(t,e){let n={};return d0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Br(t,(r,i)=>{let o=yc(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function vN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof Mr||t instanceof Pr||t instanceof Ye||t instanceof dc||t instanceof kr)}function z_(t,e,n){if(!vN(n)||!YA(n)){let r=ff(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function m_(t,e,n){if((e=Ce(e))instanceof os)return e._internalPath;if(typeof e=="string")return G_(t,e);throw cf("Field path arguments must be of type string or ",t,!1,void 0,n)}var ZU=new RegExp("[~\\*/\\[\\]]");function G_(t,e,n){if(e.search(ZU)>=0)throw cf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new os(...e.split("."))._internalPath}catch{throw cf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(P.INVALID_ARGUMENT,c+t+u)}function _N(t,e){return t.some(n=>n.isEqual(e))}var uf=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new y_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Ef("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},y_=class extends uf{data(){return super.data()}};function Ef(t,e){return typeof e=="string"?G_(t,e):e instanceof os?e._internalPath:e._delegate._internalPath}function EN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new O(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var fc=class{},lf=class extends fc{};function IN(t,e,...n){let r=[];e instanceof fc&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof v_).length,c=o.filter(u=>u instanceof df).length;if(s>1||s>0&&c>0)throw new O(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var df=class t extends lf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return DN(e._query,n),new jr(e.firestore,e.converter,ov(e._query,n))}_parse(e){let n=q_(e.firestore);return(function(o,s,c,u,l,f,p){let g;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new O(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){GA(p,f);let C=[];for(let R of p)C.push(zA(u,o,R));g={arrayValue:{values:C}}}else g=zA(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||GA(p,f),g=YU(c,s,p,f==="in"||f==="not-in");return Oe.create(l,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function wN(t,e,n){let r=e,i=Ef("where",t);return df._create(i,r,n)}var v_=class t extends fc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,c=o.getFlattenedFilters();for(let u of c)DN(s,u),s=ov(s,u)})(e._query,n),new jr(e.firestore,e.converter,ov(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var __=class t extends lf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new O(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vi(o,s)})(e._query,this._field,this._direction);return new jr(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Fr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function TN(t,e="asc"){let n=e,r=Ef("orderBy",t);return __._create(r,n)}function zA(t,e,n){if(typeof(n=Ce(n))=="string"){if(n==="")throw new O(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!b0(e)&&n.indexOf("/")!==-1)throw new O(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ie.fromString(n));if(!B.isDocumentKey(r))throw new O(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fA(t,new B(r))}if(n instanceof Ye)return fA(t,n._key);throw new O(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(n)}.`)}function GA(t,e){if(!Array.isArray(t)||t.length===0)throw new O(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DN(t,e){let n=(function(i,o){for(let s of i)for(let c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new O(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var E_=class{convertValue(e,n="none"){switch(Or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ee(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw U(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Br(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Qo].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ee(s.doubleValue));return new kr(o)}convertGeoPoint(e){return new Mr(Ee(e.latitude),Ee(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=pf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){let n=qn(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ie.fromString(e);le(z0(r),9688,{name:e});let i=new Fd(r.get(1),r.get(3)),o=new B(r.popFirst(5));return i.isEqual(n)||Hn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function JU(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ki=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xi=class t extends uf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Wo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Ef("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};xi._jsonSchemaVersion="firestore/documentSnapshot/1.0",xi._jsonSchema={type:Fe("string",xi._jsonSchemaVersion),bundleSource:Fe("string","DocumentSnapshot"),bundleName:Fe("string"),bundle:Fe("string")};var Wo=class extends xi{data(e={}){return super.data(e)}},Oi=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ki(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Wo(this._firestore,this._userDataWriter,r.key,r,new ki(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new O(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new Wo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ki(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new Wo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ki(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:XU(c.type),doc:u,oldIndex:l,newIndex:f}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function XU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return U(61501,{type:t})}}Oi._jsonSchemaVersion="firestore/querySnapshot/1.0",Oi._jsonSchema={type:Fe("string",Oi._jsonSchemaVersion),bundleSource:Fe("string","QuerySnapshot"),bundleName:Fe("string"),bundle:Fe("string")};var hc=class extends E_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,n)}};function bN(t){t=pn(t,jr);let e=pn(t.firestore,Kn),n=H_(e),r=new hc(e);return EN(t._query),qU(n,t._query).then(i=>new Oi(e,r,t,i))}function CN(t,e,n,...r){t=pn(t,Ye);let i=pn(t.firestore,Kn),o=q_(i),s;return s=typeof(e=Ce(e))=="string"||e instanceof os?QU(o,"updateDoc",t._key,e,n,r):KU(o,"updateDoc",t._key,e),K_(i,[s.toMutation(t._key,$n.exists(!0))])}function SN(t){return K_(pn(t.firestore,Kn),[new sc(t._key,$n.none())])}function AN(t,e){let n=pn(t.firestore,Kn),r=$_(t),i=JU(t.converter,e);return K_(n,[WU(q_(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,$n.exists(!1))]).then(()=>r)}function W_(t,...e){var n,r,i;t=Ce(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||qA(e[s])||(o=e[s++]);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(qA(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,f;if(t instanceof Ye)l=pn(t.firestore,Kn),f=R_(t._key.path),u={next:p=>{e[s]&&e[s](e$(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=pn(t,jr);l=pn(p.firestore,Kn),f=p._query;let g=new hc(l);u={next:y=>{e[s]&&e[s](new Oi(l,g,p,y))},error:e[s+1],complete:e[s+2]},EN(t._query)}return(function(g,y,C,R){let N=new nf(R),k=new Xd(y,N,C);return g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return tN(yield f_(g),k)})),()=>{N.Ou(),g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return nN(yield f_(g),k)}))}})(H_(l),f,c,u)}function K_(t,e){return(function(r,i){let o=new hn;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return kU(yield HU(r),i,o)})),o.promise})(H_(t),e)}function e$(t,e,n){let r=n.docs.get(e._key),i=new hc(t);return new xi(t,i,e._key,r,new ki(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){ss=i})(Er),Kt(new pt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Kn(new jy(r.getProvider("auth-internal")),new $y(s,r.getProvider("app-check-internal")),(function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fd(l.options.projectId,f)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Se(eA,tA,e),Se(eA,tA,"esm2017")})();var If=function(){return If=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},If.apply(this,arguments)};var r$={includeMetadataChanges:!1};function Q_(t,e){return e===void 0&&(e=r$),new Y(function(n){var r=W_(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function NN(t){return Q_(t,{includeMetadataChanges:!0})}function RN(t,e){return e===void 0&&(e={}),NN(t).pipe(lt(function(n){return Y_(n,e)}))}function Y_(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:If(If({},r),(n={},n[e.idField]=t.id,n))}function PN(t){return Q_(t,{includeMetadataChanges:!0}).pipe(lt(function(e){return e.docs}))}function MN(t,e){return e===void 0&&(e={}),PN(t).pipe(lt(function(n){return n.map(function(r){return Y_(r,e)})}))}var vc=class{constructor(e){return e}},kN="firestore",Z_=class{constructor(){return Lo(kN)}};var J_=new $("angularfire2.firestore-instances");function i$(t,e){let n=Oa(kN,t,e);return n&&new vc(n)}function o$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new vc(r)}}var s$={provide:Z_,deps:[[new Dt,J_]]},a$={provide:vc,useFactory:i$,deps:[[new Dt,J_],Ln]};function Ite(t,...e){return Se("angularfire",wr.full,"fst"),Rn([a$,s$,{provide:J_,useFactory:o$(t),multi:!0,deps:[ge,Ve,Tr,Ci,[new Dt,Ka],[new Dt,Vo],...e]}])}var wte=Ae(MN,!0);var Tte=Ae(RN,!0);var Dte=Ae(AN,!0,2);var bte=Ae(pN,!0,2);var Cte=Ae(SN,!0,2);var Ste=Ae($_,!0,2);var Ate=Ae(bN,!0);var Nte=Ae(gN,!0);var Rte=Ae(TN,!0,2),Pte=Ae(IN,!0,2);var Mte=Ae(CN,!0,2);var kte=Ae(wN,!0,2);export{me as a,Re as b,c$ as c,u$ as d,l$ as e,_ as f,Pe as g,cI as h,Y as i,ih as j,oh as k,Be as l,Ps as m,Rs as n,Jt as o,Qr as p,$R as q,rr as r,Yr as s,lt as t,BR as u,Zr as v,ch as w,Jr as x,ou as y,uh as z,to as A,SI as B,lh as C,Os as D,Dn as E,qR as F,zR as G,dh as H,GR as I,NI as J,PI as K,cu as L,WR as M,KR as N,j as O,An as P,Du as Q,J as R,ii as S,iP as T,$ as U,_e as V,F as W,Rn as X,Yh as Y,mt as Z,cr as _,yw as $,vw as aa,Pw as ba,Mw as ca,Ve as da,fi as ea,hi as fa,sr as ga,Ht as ha,Ip as ia,pr as ja,vo as ka,mT as la,ha as ma,ug as na,kn as oa,sM as pa,aM as qa,VT as ra,dg as sa,uM as ta,lM as ua,hM as va,wo as wa,EM as xa,BM as ya,sa as za,al as Aa,ga as Ba,_l as Ca,Mn as Da,ge as Ea,KM as Fa,ua as Ga,Tl as Ha,$e as Ia,Jk as Ja,_i as Ka,qD as La,GD as Ma,Hx as Na,Co as Oa,So as Pa,QD as Qa,YD as Ra,iO as Sa,ZD as Ta,JD as Ua,oO as Va,XD as Wa,ya as Xa,sO as Ya,tb as Za,Ii as _a,ib as $a,ob as ab,Vg as bb,jg as cb,sb as db,uO as eb,cb as fb,pO as gb,gO as hb,mO as ib,yO as jb,vO as kb,lb,db as mb,xO as nb,hb as ob,Bg as pb,pb as qb,gb as rb,mb as sb,jO as tb,yb as ub,BO as vb,zO as wb,GO as xb,WO as yb,QO as zb,ZO as Ab,JO as Bb,XO as Cb,e1 as Db,bl as Eb,i1 as Fb,Sb as Gb,kQ as Hb,I1 as Ib,Ea as Jb,xQ as Kb,OQ as Lb,A1 as Mb,FQ as Nb,Nl as Ob,N1 as Pb,Zg as Qb,R1 as Rb,No as Sb,$b as Tb,Hb as Ub,x1 as Vb,tF as Wb,cC as Xb,nF as Yb,oF as Zb,aF as _b,cF as $b,dF as ac,fF as bc,cm as cc,QY as dc,YY as ec,Po as fc,fm as gc,dZ as hc,fZ as ic,dJ as jc,fJ as kc,hJ as lc,Wa as mc,LX as nc,VX as oc,jX as pc,BX as qc,UX as rc,vc as sc,Ite as tc,wte as uc,Tte as vc,Dte as wc,bte as xc,Cte as yc,Ste as zc,Ate as Ac,Nte as Bc,Rte as Cc,Pte as Dc,Mte as Ec,kte as Fc};
